_vehicle_59 = objNull;
if (true) then
{
  _this = createVehicle ["B_Mortar_01_F", [7048.5371, 5921.1934, -0.043837924], [], 0, "CAN_COLLIDE"];
  _vehicle_59 = _this;
  _this setDir -132.91164;
  _this setVehicleVarName "Bis_KaminoMortar1";
  Bis_KaminoMortar1 = _this;
  _this setPos [7048.5371, 5921.1934, -0.043837924];
};

_vehicle_60 = objNull;
if (true) then
{
  _this = createVehicle ["B_Mortar_01_F", [7042.3325, 5930.1914, -0.086120166], [], 0, "CAN_COLLIDE"];
  _vehicle_60 = _this;
  _this setDir -126.31522;
  _this setVehicleVarName "Bis_KaminoMortar2";
  Bis_KaminoMortar2 = _this;
  _this setPos [7042.3325, 5930.1914, -0.086120166];
};

_vehicle_61 = objNull;
if (true) then
{
  _this = createVehicle ["Box_NATO_Grenades_F", [7049.2622, 5919.5894, 0.10278358], [], 0, "CAN_COLLIDE"];
  _vehicle_61 = _this;
  _this setDir -185.96936;
  _this setPos [7049.2622, 5919.5894, 0.10278358];
};

_vehicle_62 = objNull;
if (true) then
{
  _this = createVehicle ["Box_NATO_Grenades_F", [7040.3413, 5930.3267, 0.021605784], [], 0, "CAN_COLLIDE"];
  _vehicle_62 = _this;
  _this setDir -210.93596;
  _this setPos [7040.3413, 5930.3267, 0.021605784];
};

_vehicle_63 = objNull;
if (true) then
{
  _this = createVehicle ["Box_NATO_Grenades_F", [7042.2793, 5927.3188, 0.075086854], [], 0, "CAN_COLLIDE"];
  _vehicle_63 = _this;
  _this setDir -183.51616;
  _this setPos [7042.2793, 5927.3188, 0.075086854];
};

_vehicle_66 = objNull;
if (true) then
{
  _this = createVehicle ["Box_NATO_Grenades_F", [7042.8711, 5928.1548, -0.035364881], [], 0, "CAN_COLLIDE"];
  _vehicle_66 = _this;
  _this setDir -284.55594;
  _this setPos [7042.8711, 5928.1548, -0.035364881];
};

_vehicle_67 = objNull;
if (true) then
{
  _this = createVehicle ["Box_NATO_Wps_F", [7050.2026, 5919.3892, 0.08228156], [], 0, "CAN_COLLIDE"];
  _vehicle_67 = _this;
  _this setDir -174.34398;
  _this setPos [7050.2026, 5919.3892, 0.08228156];
};

_vehicle_68 = objNull;
if (true) then
{
  _this = createVehicle ["Box_NATO_Ammo_F", [7046.3706, 5922.1318, -0.011191274], [], 0, "CAN_COLLIDE"];
  _vehicle_68 = _this;
  _this setDir -185.96936;
  _this setPos [7046.3706, 5922.1318, -0.011191274];
};

_vehicle_69 = objNull;
if (true) then
{
  _this = createVehicle ["Land_CanisterPlastic_F", [7052.0645, 5925.3364, -0.15070271], [], 0, "CAN_COLLIDE"];
  _vehicle_69 = _this;
  _this setDir -185.96936;
  _this setPos [7052.0645, 5925.3364, -0.15070271];
};

_vehicle_70 = objNull;
if (true) then
{
  _this = createVehicle ["Land_BarrelEmpty_F", [7052.6611, 5925.3115, -0.047594365], [], 0, "CAN_COLLIDE"];
  _vehicle_70 = _this;
  _this setDir -185.96936;
  _this setPos [7052.6611, 5925.3115, -0.047594365];
};

_vehicle_71 = objNull;
if (true) then
{
  _this = createVehicle ["B_Boat_Transport_01_F", [7071.9741, 5906.6064], [], 0, "CAN_COLLIDE"];
  _vehicle_71 = _this;
  _this setDir -53.854992;
  _this setPos [7071.9741, 5906.6064];
};

_vehicle_73 = objNull;
if (true) then
{
  _this = createVehicle ["B_Boat_Transport_01_F", [7061.145, 5891.3174, -6.7830086e-005], [], 0, "CAN_COLLIDE"];
  _vehicle_73 = _this;
  _this setPos [7061.145, 5891.3174, -6.7830086e-005];
};

_vehicle_79 = objNull;
if (true) then
{
  _this = createVehicle ["B_Mortar_01_F", [7064.0186, 5956.1011, -3.8146973e-006], [], 0, "CAN_COLLIDE"];
  _vehicle_79 = _this;
  _this setDir -113.85217;
  _this setVehicleVarName "Bis_KaminoMortar3";
  Bis_KaminoMortar3 = _this;
  _this setPos [7064.0186, 5956.1011, -3.8146973e-006];
};

_vehicle_80 = objNull;
if (true) then
{
  _this = createVehicle ["Box_NATO_Grenades_F", [7062.8853, 5958.2329, 0.009206729], [], 0, "CAN_COLLIDE"];
  _vehicle_80 = _this;
  _this setDir -215.05077;
  _this setPos [7062.8853, 5958.2329, 0.009206729];
};

_vehicle_81 = objNull;
if (true) then
{
  _this = createVehicle ["Box_NATO_Grenades_F", [7063.5015, 5954.376, -0.098968506], [], 0, "CAN_COLLIDE"];
  _vehicle_81 = _this;
  _this setDir -148.47867;
  _this setPos [7063.5015, 5954.376, -0.098968506];
};

_vehicle_82 = objNull;
if (true) then
{
  _this = createVehicle ["Box_NATO_Grenades_F", [7064.2549, 5955.0156, -0.16943645], [], 0, "CAN_COLLIDE"];
  _vehicle_82 = _this;
  _this setDir -288.67081;
  _this setPos [7064.2549, 5955.0156, -0.16943645];
};

_vehicle_84 = objNull;
if (true) then
{
  _this = createVehicle ["B_Boat_Transport_01_F", [7064.5859, 5901.3306, 8.4877014e-005], [], 0, "CAN_COLLIDE"];
  _vehicle_84 = _this;
  _this setDir -53.854992;
  _this setPos [7064.5859, 5901.3306, 8.4877014e-005];
};

//--------------------------------------------------------------------------------------------------

Bis_GrpKaminoMortars = createGroup west;

{
	[_x, Bis_GrpKaminoMortars] call Bis_fnc_spawnCrew;
	_x setBehaviour "CARELESS";
}
forEach [Bis_KaminoMortar1, Bis_KaminoMortar2, Bis_KaminoMortar3];

Bis_KaminoAmmoBoxes = nearestObjects [Bis_KaminoMortars, ["Box_NATO_Grenades_F","Box_NATO_Grenades_F","Box_NATO_Wps_F","Box_NATO_Ammo_F"], 50];

Bis_ChainExplosionTriggered2 = false;

//do the chain explosion
Bis_createChainExplosionKamino =
{
	if (Bis_ChainExplosionTriggered2) exitWith
	{
		["ANOTHER EXPLOSION TERMINATED!"] call Bis_debugLog;
	};

	Bis_ChainExplosionTriggered2 = true;

	//remove handlers from all ammo boxes
	{
		_x removeAllEventHandlers "handledamage";
	}
	forEach Bis_KaminoAmmoBoxes;

	private["_unit","_damage"];

	_unit 	= _this select 0;
	_damage = _this select 2;

	["EXPLOSION TRIGGERED!"] call Bis_debugLog;

	[_unit,"HelicopterExploSmall"] call Bis_createExplosion;

	_unit setDamage 1;

	sleep 0.8;

	{
		if (_forEachIndex % 2 == 0) then
		{
			[_x,"HelicopterExploSmall"] call Bis_createExplosion;

			_x setDamage 1;

			sleep 0.8;
		};
	}
	forEach (Bis_KaminoAmmoBoxes - [_unit]);
};

//add event handler to ammo boxes
{
	_x addEventHandler ["handledamage",
	{
		if ((_this select 3) == (vehicle player)) then
		{
			_this spawn Bis_createChainExplosionKamino;
		};

		_damage
	}];
}
forEach Bis_KaminoAmmoBoxes;