/*%FSM<COMPILE "C:\BIS\FSMEditor\scriptedFSM.cfg, B_m01 Mission Flow">*/
/*%FSM<HEAD>*/
/*
item0[] = {"init",0,250,-220.000000,-230.000000,-130.000000,-180.000000,0.000000,"init"};
item1[] = {"debug_stage_0",4,218,-220.000000,-50.000000,-130.000000,0.000000,0.000000,"debug" \n "stage" \n "0"};
item2[] = {"stage_0",2,250,-220.000000,30.000000,-130.000000,80.000000,0.000000,"stage" \n "0"};
item3[] = {"",7,210,541.000000,-119.000000,549.000000,-111.000000,0.000000,""};
item4[] = {"mortar",2,250,110.000000,990.000000,200.000000,1040.000000,0.000000,"mortar"};
item5[] = {"debug_stage_2",4,218,500.000000,-50.000000,590.000000,0.000000,2.000000,"debug" \n "stage" \n "2"};
item6[] = {"stage_2",2,250,500.000000,30.000000,590.000000,80.000000,0.000000,"stage" \n "2"};
item7[] = {"defend_outpost",2,250,500.000000,350.000000,590.000000,400.000000,0.000000,"defend" \n "outpost"};
item8[] = {"conversations_fi",4,218,-220.000000,110.000000,-130.000000,160.000000,0.000000,"conversations" \n "finished"};
item9[] = {"stage_1",2,250,110.000000,30.000000,200.000000,80.000000,0.000000,"stage" \n "1"};
item10[] = {"neutralized",4,218,-220.000000,310.000000,-130.000000,360.000000,0.000000,"neutralized"};
item11[] = {"timeout",4,218,-340.000000,310.000000,-250.000000,360.000000,1.000000,"timeout"};
item12[] = {"",7,210,-179.000031,-119.000023,-170.999969,-110.999977,0.000000,""};
item13[] = {"outpost_secure",4,218,110.000000,430.000000,200.000000,480.000000,0.000000,"outpost" \n "secure"};
item14[] = {"delta_moves_to_o",2,250,110.000000,670.000000,200.000000,720.000000,0.000000,"delta moves" \n "to outpost"};
item15[] = {"delta_arrives",4,218,110.000000,750.000000,200.000000,800.000000,0.000000,"delta" \n "arrives"};
item16[] = {"mortar_detected",4,218,110.000000,1230.000000,200.000000,1280.000000,0.000000,"mortar" \n "detected"};
item17[] = {"eliminate_mortar",2,250,110.000000,1310.000000,200.000000,1360.000000,0.000000,"eliminate" \n "mortar"};
item18[] = {"mortar_eliminate",4,4314,110.000000,1550.000000,200.000000,1600.000000,1.000000,"mortar" \n "eliminated"};
item19[] = {"wait_for_orders",2,250,110.000000,1630.000000,200.000000,1680.000000,0.000000,"wait for" \n "orders"};
item20[] = {"conversations_fi",4,218,110.000000,1710.000000,200.000000,1760.000000,0.000000,"conversations" \n "finished"};
item21[] = {"",7,210,225.999969,1731.000122,234.000031,1738.999878,0.000000,""};
item22[] = {"",7,210,225.999985,50.999996,234.000015,59.000000,0.000000,""};
item23[] = {"supply_truck_pro",4,218,500.000000,750.000000,590.000000,800.000000,0.000000,"supply truck" \n "protected"};
item24[] = {"wait_for_orders_1",2,250,500.000000,190.000000,590.000000,240.000000,0.000000,"wait for" \n "orders"};
item25[] = {"at_the_outpost",4,218,500.000000,110.000000,590.000000,160.000000,0.000000,"at the" \n "outpost"};
item26[] = {"delay_finished",4,218,500.000000,270.000000,590.000000,320.000000,0.000000,"delay" \n "finished"};
item27[] = {"retreated",4,218,500.000000,1070.000000,590.000000,1120.000000,0.000000,"retreated"};
item28[] = {"WIN1",1,250,500.000000,1310.000000,590.000000,1360.000000,0.000000,"WIN1"};
item29[] = {"retreat",2,250,500.000000,990.000000,590.000000,1040.000000,0.000000,"retreat"};
item30[] = {"",7,210,-103.999992,651.000000,-96.000000,659.000061,0.000000,""};
item31[] = {"",7,210,-103.999992,51.000000,-96.000000,59.000000,0.000000,""};
item32[] = {"",7,210,151.000000,-119.000000,159.000000,-111.000000,0.000000,""};
item33[] = {"debug_stage_1",4,218,110.000000,-50.000000,200.000000,0.000000,1.000000,"debug" \n "stage" \n "1"};
item34[] = {"delta_starts_to",2,250,110.000000,830.000000,200.000000,880.000000,0.000000,"delta starts" \n "to resupply"};
item35[] = {"conversations_fi",4,218,110.000000,910.000000,200.000000,960.000000,0.000000,"conversations" \n "finished"};
item36[] = {"mortar_threshold",4,218,-50.000000,1310.000000,40.000000,1360.000000,2.000000,"mortar" \n "threshold" \n "reached"};
item37[] = {"FAIL_1",1,250,-50.000000,1550.000000,40.000000,1600.000000,0.000000,"FAIL 1"};
item38[] = {"supply_truck_des",4,218,620.000000,750.000000,710.000000,800.000000,1.000000,"supply truck" \n "destroyed"};
item39[] = {"truck_immobilize",2,250,620.000000,830.000000,710.000000,880.000000,0.000000,"truck" \n "immobilized"};
item40[] = {"",7,210,661.000000,930.999878,669.000000,939.000122,0.000000,""};
item41[] = {"tasks",2,250,500.000000,1150.000000,590.000000,1200.000000,0.000000,"tasks"};
item42[] = {"supplies_destroy",4,218,620.000000,1230.000000,710.000000,1280.000000,0.000000,"supplies" \n "destroyed"};
item43[] = {"supplies_safe",4,218,500.000000,1230.000000,590.000000,1280.000000,1.000000,"supplies" \n "safe"};
item44[] = {"WIN2",1,250,620.000000,1310.000000,710.000000,1360.000000,0.000000,"WIN2"};
item45[] = {"inside_outpost",4,218,110.000000,110.000000,200.000000,160.000000,0.000000,"inside" \n "outpost"};
item46[] = {"stop_suppressing",2,250,110.000000,190.000000,200.000000,240.000000,0.000000,"stop" \n "suppressing" \n "fire"};
item47[] = {"amazing",2,250,-220.000000,390.000000,-130.000000,440.000000,0.000000,"amazing"};
item48[] = {"always",4,218,-220.000000,630.000000,-130.000000,680.000000,0.000000,"always"};
item49[] = {"disapointing",2,250,-340.000000,390.000000,-250.000000,440.000000,0.000000,"disapointing"};
item50[] = {"",7,210,-299.000000,491.000000,-291.000000,499.000000,0.000000,""};
item51[] = {"",7,210,-179.000000,271.000000,-171.000000,279.000000,0.000000,""};
item52[] = {"",7,210,-299.000000,271.000000,-291.000000,279.000000,0.000000,""};
item53[] = {"near_tower",4,218,110.000000,270.000000,200.000000,320.000000,0.000000,"near" \n "tower"};
item54[] = {"player_needs_to",2,250,110.000000,350.000000,200.000000,400.000000,0.000000,"player needs" \n "to be at the" \n "outpost"};
item55[] = {"truck_protected",2,250,500.000000,830.000000,590.000000,880.000000,0.000000,"truck" \n "protected"};
item56[] = {"conversations_fi",4,218,500.000000,910.000000,590.000000,960.000000,0.000000,"conversations" \n "finished"};
item57[] = {"",7,210,661.000000,371.000000,669.000000,379.000031,0.000000,""};
item58[] = {"half_time_has_pa",4,218,500.000000,430.000000,590.000000,480.000000,0.000000,"half time" \n "has passed"};
item59[] = {"supplies_sitrep",2,250,500.000000,510.000000,590.000000,560.000000,0.000000,"supplies" \n "sitrep"};
item60[] = {"",7,210,661.000000,1171.000000,669.000000,1179.000000,0.000000,""};
item61[] = {"report_from_team",2,250,110.000000,510.000000,200.000000,560.000000,0.000000,"report" \n "from teams"};
item62[] = {"conversations_and",4,218,110.000000,590.000000,200.000000,640.000000,0.000000,"conversations" \n "and delay" \n "finished"};
item63[] = {"mortar_round_det",4,218,110.000000,1070.000000,200.000000,1120.000000,0.000000,"mortar" \n "round" \n "detected"};
item64[] = {"mortar_find_cove",2,250,110.000000,1150.000000,200.000000,1200.000000,0.000000,"mortar" \n "find cover"};
item65[] = {"taking_too_much",4,218,620.000000,30.000000,710.000000,80.000000,1.000000,"taking" \n "too much" \n "time"};
item66[] = {"warning",2,250,620.000000,110.000000,710.000000,160.000000,0.000000,"warning"};
item67[] = {"three_quarters_have",4,218,500.000000,590.000000,590.000000,640.000000,0.000000,"three quarters" \n "have passed"};
item68[] = {"units_sitrep",2,250,500.000000,670.000000,590.000000,720.000000,0.000000,"units" \n "sitrep"};
item69[] = {"too_late",4,218,740.000000,110.000000,830.000000,160.000000,1.000000,"too late"};
item70[] = {"FAIL2",1,250,740.000000,350.000000,830.000000,400.000000,0.000000,"FAIL2"};
item71[] = {"player_messed_up",2,250,740.000000,190.000000,830.000000,240.000000,0.000000,"player" \n "messed up"};
item72[] = {"conversations_fi",4,218,740.000000,270.000000,830.000000,320.000000,0.000000,"conversations" \n "finished"};
item73[] = {"player_messed_up_1",2,250,-50.000000,1390.000000,40.000000,1440.000000,0.000000,"player" \n "messed up"};
item74[] = {"conversations_fi",4,218,-50.000000,1470.000000,40.000000,1520.000000,0.000000,"conversations" \n "finished"};
item75[] = {"near_frini",4,218,110.000000,1390.000000,200.000000,1440.000000,0.000000,"near" \n "frini"};
item76[] = {"careful_in_frini",2,250,110.000000,1470.000000,200.000000,1520.000000,0.000000,"careful" \n "in frini"};
item77[] = {"",7,210,661.000000,531.000000,669.000000,539.000000,0.000000,""};
item78[] = {"",7,210,661.000000,691.000000,669.000000,699.000000,0.000000,""};
item79[] = {"engage",2,250,-220.000000,190.000000,-130.000000,240.000000,0.000000,"engage"};
item80[] = {"",7,210,-419.000000,271.000000,-411.000000,279.000000,0.000000,""};
item81[] = {"detected",4,218,-460.000000,310.000000,-370.000000,360.000000,2.000000,"detected"};
item82[] = {"horrible",2,250,-460.000000,390.000000,-370.000000,440.000000,0.000000,"horrible"};
item83[] = {"",7,210,-418.999969,491.000000,-411.000000,499.000000,0.000000,""};
item84[] = {"remove_instructor",2,250,-220.000000,550.000000,-130.000000,600.000000,0.000000,"remove" \n "instructor" \n "topic"};
item85[] = {"conversations_fi",4,218,-220.000000,470.000000,-130.000000,520.000000,0.000000,"conversations" \n "finished"};
item86[] = {"detected",4,218,-340.000000,30.000000,-250.000000,80.000000,1.000000,"detected"};
item87[] = {"",7,210,-539.000000,411.000000,-531.000000,419.000000,0.000000,""};
item88[] = {"",7,210,-539.000000,51.000000,-531.000000,59.000000,0.000000,""};
item89[] = {"always",4,218,-580.000000,310.000000,-490.000000,360.000000,0.000000,"always"};
item90[] = {"failed_to_stay_u",2,250,-460.000000,30.000000,-370.000000,80.000000,0.000000,"failed to" \n "stay" \n "undetected"};
item91[] = {"player_not_in_the",4,218,-10.000000,350.000000,80.000000,400.000000,1.000000,"player" \n "not in the" \n "outpost"};
item92[] = {"warning_1",2,250,-10.000000,430.000000,80.000000,480.000000,0.000000,"warning"};
item93[] = {"conversations_fi",4,218,-10.000000,510.000000,80.000000,560.000000,1.000000,"conversations" \n "finished"};
item94[] = {"FAIL_3",1,250,-10.000000,750.000000,80.000000,800.000000,0.000000,"FAIL 3"};
item95[] = {"player_messed_up_2",2,250,-10.000000,590.000000,80.000000,640.000000,0.000000,"player" \n "messed up"};
item96[] = {"conversations_fi",4,218,-10.000000,670.000000,80.000000,720.000000,0.000000,"conversations" \n "finished"};
item97[] = {"",7,210,71.000000,1571.000000,79.000000,1579.000000,0.000000,""};
item98[] = {"",7,210,71.000000,1331.000000,79.000000,1339.000000,0.000000,""};
link0[] = {0,12};
link1[] = {1,2};
link2[] = {2,8};
link3[] = {2,86};
link4[] = {3,5};
link5[] = {4,63};
link6[] = {5,6};
link7[] = {6,25};
link8[] = {6,65};
link9[] = {7,57};
link10[] = {7,58};
link11[] = {8,79};
link12[] = {9,45};
link13[] = {10,47};
link14[] = {11,49};
link15[] = {12,1};
link16[] = {12,32};
link17[] = {13,61};
link18[] = {14,15};
link19[] = {15,34};
link20[] = {16,17};
link21[] = {17,75};
link22[] = {17,98};
link23[] = {18,19};
link24[] = {19,20};
link25[] = {20,21};
link26[] = {21,22};
link27[] = {22,6};
link28[] = {23,55};
link29[] = {24,26};
link30[] = {25,24};
link31[] = {26,7};
link32[] = {27,41};
link33[] = {29,27};
link34[] = {30,31};
link35[] = {31,9};
link36[] = {32,3};
link37[] = {32,33};
link38[] = {33,9};
link39[] = {34,35};
link40[] = {35,4};
link41[] = {36,73};
link42[] = {38,39};
link43[] = {39,40};
link44[] = {40,56};
link45[] = {41,43};
link46[] = {41,60};
link47[] = {42,44};
link48[] = {43,28};
link49[] = {45,46};
link50[] = {46,53};
link51[] = {47,85};
link52[] = {48,30};
link53[] = {49,50};
link54[] = {50,85};
link55[] = {51,10};
link56[] = {51,52};
link57[] = {52,11};
link58[] = {52,80};
link59[] = {53,54};
link60[] = {54,13};
link61[] = {54,91};
link62[] = {55,56};
link63[] = {56,29};
link64[] = {57,77};
link65[] = {58,59};
link66[] = {59,67};
link67[] = {59,77};
link68[] = {60,42};
link69[] = {61,62};
link70[] = {62,14};
link71[] = {63,64};
link72[] = {64,16};
link73[] = {65,66};
link74[] = {66,25};
link75[] = {66,69};
link76[] = {67,68};
link77[] = {68,23};
link78[] = {68,78};
link79[] = {69,71};
link80[] = {71,72};
link81[] = {72,70};
link82[] = {73,74};
link83[] = {74,37};
link84[] = {75,76};
link85[] = {76,18};
link86[] = {77,78};
link87[] = {78,38};
link88[] = {79,51};
link89[] = {80,81};
link90[] = {81,82};
link91[] = {82,83};
link92[] = {83,50};
link93[] = {84,48};
link94[] = {85,84};
link95[] = {86,90};
link96[] = {87,82};
link97[] = {88,89};
link98[] = {89,87};
link99[] = {90,88};
link100[] = {91,92};
link101[] = {92,13};
link102[] = {92,93};
link103[] = {93,95};
link104[] = {95,96};
link105[] = {96,94};
link106[] = {97,18};
link107[] = {98,36};
link108[] = {98,97};
globals[] = {10.000000,1,0,0,0,640,480,1,275,6316128,1,-343.832764,526.837341,1754.730713,892.423218,1041,1031,1};
window[] = {2,-1,-1,-1,-1,1125,275,1715,275,3,1059};
*//*%FSM</HEAD>*/
class FSM
{
        fsmName = "B_m01 Mission Flow";
        class States
        {
                /*%FSM<STATE "init">*/
                class init
                {
                        name = "init";
                        itemno = 0;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Debug" \n
                         "//****************************************" \n
                         "private [""_debugSkipToStage""];" \n
                         "_debugSkipToStage 	= 0;" \n
                         "" \n
                         "//****************************************" \n
                         "//Groups" \n
                         "//****************************************" \n
                         "private [""_groupHq"", ""_groupAlpha"", ""_groupBravo"", ""_groupCharlie"", ""_groupDelta""];" \n
                         "_groupHq 		= BIS_hq;" \n
                         "_groupAlpha	= BIS_alpha;" \n
                         "_groupBravo	= BIS_bravo;" \n
                         "_groupCharlie	= BIS_charlie;" \n
                         "_groupDelta	= BIS_delta;" \n
                         "" \n
                         "//****************************************" \n
                         "//Positions" \n
                         "//****************************************" \n
                         "private [""_positionOutpost"", ""_positionFrini"", ""_positionForest"", ""_positionMortar"", ""_positionMiddleWay""];" \n
                         "_positionOutpost		= getMarkerPos ""BIS_outpost"";" \n
                         "_positionFrini			= getMarkerPos ""BIS_frini"";" \n
                         "_positionForest		= getMarkerPos ""BIS_forest"";" \n
                         "_positionMortar		= [getMarkerPos ""BIS_mortar_1"", getMarkerPos ""BIS_mortar_2"", getMarkerPos ""BIS_mortar_3""] call BIS_fnc_selectRandom;" \n
                         "_positionMiddleWay	= getMarkerPos ""BIS_middleWay"";" \n
                         "" \n
                         "//****************************************" \n
                         "//Units" \n
                         "//****************************************" \n
                         "private [""_unitAlphaLeader"", ""_unitBravoLeader"", ""_unitCharlieLeader"", ""_unitDeltaLeader""];" \n
                         "_unitAlphaLeader		= BIS_inf;" \n
                         "_unitBravoLeader		= BIS_bravoLeader;" \n
                         "_unitCharlieLeader	= BIS_charlieLeader;" \n
                         "_unitDeltaLeader		= BIS_deltaLeader;" \n
                         "" \n
                         "//****************************************" \n
                         "//Vehicles" \n
                         "//****************************************" \n
                         "private [""_vehicleTruck""];" \n
                         "_vehicleTruck = BIS_vehicleTruck;" \n
                         "" \n
                         "//****************************************" \n
                         "//Objects" \n
                         "//****************************************" \n
                         "private [""_objectTowerBig"", ""_objectTowerSmall"", ""_objectHq"", ""_objectAlarmLoudspeakers"", ""_objectAlarmDevice""];" \n
                         "_objectTowerBig 				= _positionOutpost nearestObject ""Land_Cargo_Tower_V3_F"";" \n
                         "_objectTowerSmall			= _positionOutpost nearestObject ""Land_Cargo_Patrol_V3_F"";" \n
                         "_objectHq						= _positionOutpost nearestObject ""Land_Cargo_HQ_V3_F"";" \n
                         "_objectAlarmLoudspeakers	= BIS_alarmLoudspeakers;" \n
                         "_objectAlarmDevice			= BIS_alarmDevice;" \n
                         "" \n
                         "//****************************************" \n
                         "//Timers" \n
                         "//****************************************" \n
                         "private [""_timeNeutralizeGuards"", ""_timeDefendOutpost"", ""_timeDesignateTargets"", ""_timeFocusTarget"", ""_timeRetreatFrini"", ""_timeDetectMortar"", ""_timeGetInOutpost""];" \n
                         "_timeNeutralizeGuards	= 60;" \n
                         "_timeDefendOutpost 		= 240;" \n
                         "_timeDesignateTargets	= 60;" \n
                         "_timeFocusTarget			= 2.5;" \n
                         "_timeRetreatFrini			= 360;" \n
                         "_timeDetectMortar		= 30;" \n
                         "_timeGetInOutpost		= 120;" \n
                         "" \n
                         "//****************************************" \n
                         "//Skills" \n
                         "//****************************************" \n
                         "private [""_skillEnemy"", ""_skillFriend""];" \n
                         "_skillEnemy	= 0.2;" \n
                         "_skillFriend 	= 0.6;" \n
                         "" \n
                         "//****************************************" \n
                         "//Misc" \n
                         "//****************************************" \n
                         "private [""_guardsMinFiredRounds""];" \n
                         "_guardsMinFiredRounds = 5;	//The minimum number of shots, guard towers need to fire in order to fail the task" \n
                         "" \n
                         "//****************************************" \n
                         "//Set friendlies skill" \n
                         "//****************************************" \n
                         "{" \n
                         "	_x setSkill _skillFriend;" \n
                         "} forEach units _groupAlpha + units _groupBravo + units _groupCharlie + units _groupDelta;" \n
                         "" \n
                         "//****************************************" \n
                         "//Friendly Fire" \n
                         "//****************************************" \n
                         "[""Init"", [units _groupAlpha + units _groupBravo + units _groupCharlie + units _groupDelta, true]] call BIS_fnc_moduleFriendlyFire;" \n
                         "" \n
                         "//****************************************" \n
                         "//Instructor Figure" \n
                         "//****************************************" \n
                         "[""Init""] call BIS_fnc_InstructorFigure;" \n
                         "" \n
                         "//****************************************" \n
                         "//Initial tasks" \n
                         "//****************************************" \n
                         "//""BIS_outpostAttack"" call BIS_fnc_missionTasks;" \n
                         "" \n
                         "//****************************************" \n
                         "//Quotation" \n
                         "//****************************************" \n
                         "private ""_quotation"";" \n
                         "_quotation = [""\A3\Missions_F_EPB\video\B_m01_quotation.ogv"", ""STR_A3_campaign_quote_33""] call BIS_fnc_quotations;" \n
                         "" \n
                         "//****************************************" \n
                         "//Group team leaders should report casualties" \n
                         "//****************************************" \n
                         "{" \n
                         "	//Go through each unit in the group" \n
                         "	{" \n
                         "		//The event handler" \n
                         "		private ""_handler"";" \n
                         "		_handler = _x addEventHandler [""Killed"", {" \n
                         "			//Parameters" \n
                         "			private [""_killed""];" \n
                         "			_killed = [_this, 0, objNull, [objNull]] call BIS_fnc_param;" \n
                         "			" \n
                         "			//The group" \n
                         "			private ""_group"";" \n
                         "			_group = group _killed;" \n
                         "			" \n
                         "			//Are there still alive units in the group, other then the team leader" \n
                         "			if ({ alive _x } count units _group <= 2 && isNil { _group getVariable ""BIS_casualtiesReported"" }) then {" \n
                         "				//Flag" \n
                         "				_group setVariable [""BIS_casualtiesReported"", true];" \n
                         "				" \n
                         "				//Since we can only report group casualties" \n
                         "				//After the group ""knows"" about those deaths" \n
                         "				//We will spawn a new thread that waits until the engine processes" \n
                         "				//The group knowlage and then we say the custom report" \n
                         "				_group spawn {" \n
                         "					scriptName format[""Group %1 waits for engine to process group"", _this];" \n
                         "					" \n
                         "					//We wait until group knows it's own status" \n
                         "					waitUntil { count units _this <= 2 };" \n
                         "					" \n
                         "					//Show conversation depending on the group" \n
                         "					switch (_this) do {" \n
                         "						case BIS_alpha : { ""BIS_x_casualtiesAlpha"" spawn BIS_fnc_missionConversations; };" \n
                         "						case BIS_bravo : { ""BIS_x_casualtiesBravo"" spawn BIS_fnc_missionConversations; };" \n
                         "						case BIS_charlie : { ""BIS_x_casualtiesCharlie"" spawn BIS_fnc_missionConversations; };" \n
                         "					};" \n
                         "					" \n
                         "					//Log" \n
                         "					[""Group (%1) is reporting casualties"", _this] call BIS_fnc_logFormat;" \n
                         "				};" \n
                         "				" \n
                         "				//Log" \n
                         "				[""Group (%1) has heavy casualties"", _group] call BIS_fnc_logFormat;" \n
                         "			};" \n
                         "		}];" \n
                         "		" \n
                         "		//Store event handler" \n
                         "		_x setVariable [""BIS_killed"", _handler];" \n
                         "	} forEach units _x;" \n
                         "} forEach [" \n
                         "	_groupAlpha," \n
                         "	_groupBravo," \n
                         "	_groupCharlie" \n
                         "];" \n
                         "" \n
                         "//****************************************" \n
                         "//Units and vehicles that should not die" \n
                         "//****************************************" \n
                         "{" \n
                         "	//The event handler" \n
                         "	private ""_handler"";" \n
                         "	_handler = _x addEventHandler [""HandleDamage"", {" \n
                         "		//Parameters" \n
                         "		private [""_object"", ""_damage"", ""_source""];" \n
                         "		_object	= [_this, 0, objNull, [objNull]] call BIS_fnc_param;" \n
                         "		_damage	= [_this, 2, 0, [0]] call BIS_fnc_param;" \n
                         "		_source	= [_this, 3, objNull, [objNull]] call BIS_fnc_param;" \n
                         "		" \n
                         "		if (_source == player) then {" \n
                         "			_damage;" \n
                         "		} else {" \n
                         "			0;" \n
                         "		};" \n
                         "	}];" \n
                         "	" \n
                         "	//Store event handler" \n
                         "	_x setVariable [""BIS_handleDamage"", _handler];" \n
                         "	" \n
                         "} forEach [" \n
                         "	_unitBravoLeader," \n
                         "	_unitCharlieLeader," \n
                         "	_unitDeltaLeader" \n
                         "];" \n
                         "" \n
                         "//****************************************" \n
                         "//Supplies truck wheels damaged" \n
                         "//****************************************" \n
                         "//The destroyed wheels" \n
                         "BIS_vehicleTruckDestroyedWheels = [];" \n
                         "" \n
                         "//The event handler" \n
                         "private ""_handler"";" \n
                         "_handler = _vehicleTruck addEventHandler [""HandleDamage"", {" \n
                         "	private [""_vehicle"", ""_damage"", ""_selection"", ""_source""];" \n
                         "	_vehicle 	= [_this, 0, objNull, [objNull]] call BIS_fnc_param;" \n
                         "	_selection	= [_this, 1, """", [""""]] call BIS_fnc_param;" \n
                         "	_damage	= [_this, 2, 0, [0]] call BIS_fnc_param;" \n
                         "	_source	= [_this, 3, objNull, [objNull]] call BIS_fnc_param;" \n
                         "	" \n
                         "	private ""_selectionLowerCase"";" \n
                         "	_selectionLowerCase = toLower _selection;" \n
                         "	" \n
                         "	private ""_wheels"";" \n
                         "	_wheels = [""wheel_1_1_steering"", ""wheel_1_2_steering"", ""wheel_2_1_steering"", ""wheel_2_2_steering""];" \n
                         "	" \n
                         "	//If damage was done on a wheel and it is high enough, we flag the tire as flat" \n
                         "	if (_selectionLowerCase in _wheels && { _damage >= 0.9 } && { !(_selectionLowerCase in BIS_vehicleTruckDestroyedWheels) }) then {" \n
                         "		BIS_vehicleTruckDestroyedWheels set [count BIS_vehicleTruckDestroyedWheels, _selectionLowerCase];" \n
                         "	};" \n
                         "	" \n
                         "	//Allow damage only if inflicted by the player" \n
                         "	if (_source == player) then {" \n
                         "		_damage;" \n
                         "	} else {" \n
                         "		0;" \n
                         "	};" \n
                         "}];" \n
                         "" \n
                         "//Store event handler on vehicle namespace" \n
                         "_vehicleTruck setVariable [""BIS_handleDamage"", _handler];" \n
                         "" \n
                         "//****************************************" \n
                         "//Supplies truck friendly fire check" \n
                         "//****************************************" \n
                         "//Friendly fire check" \n
                         "private ""_handler"";" \n
                         "_handler = _vehicleTruck addEventHandler [""Hit"", {" \n
                         "	private [""_vehicle"", ""_attacker"", ""_damage""];" \n
                         "	_vehicle 	= [_this, 0, objNull, [objNull]] call BIS_fnc_param;" \n
                         "	_attacker 	= [_this, 1, objNull, [objNull]] call BIS_fnc_param;" \n
                         "	_damage	= [_this, 2, 0, [0]] call BIS_fnc_param;" \n
                         "	" \n
                         "	//Is the vehicle still usable?" \n
                         "	if (!alive _vehicle || !canMove _vehicle || (!isNil { BIS_vehicleTruckDestroyedWheels } && { count BIS_vehicleTruckDestroyedWheels >= 1 })) then {" \n
                         "		//Remove event handler" \n
                         "		_vehicle removeEventHandler [""Hit"", _vehicle getVariable ""BIS_hit""];" \n
                         "		" \n
                         "		//Player caused the damage?" \n
                         "		if (_attacker == player) then {" \n
                         "			//End mission" \n
                         "			[""FriendlyFire"", false] call BIS_fnc_endMission;" \n
                         "		};" \n
                         "	};" \n
                         "}];" \n
                         "" \n
                         "//Store the event handlers" \n
                         "_vehicleTruck setVariable [""BIS_hit"", _handler];" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """B_m01 mission flow initialized"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "debug_stage_2">*/
                                class debug_stage_2
                                {
                                        itemno = 5;
                                        priority = 2.000000;
                                        to="stage_2";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_debugSkipToStage == 2" \n
                                         "&&" \n
                                         "{ !isNil { BIS_fnc_blackIn_completed } }" \n
                                         "&&" \n
                                         "{ BIS_fnc_blackIn_completed }" \n
                                         "&&" \n
                                         "{ scriptDone _quotation }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "debug_stage_1">*/
                                class debug_stage_1
                                {
                                        itemno = 33;
                                        priority = 1.000000;
                                        to="stage_1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_debugSkipToStage == 1" \n
                                         "&&" \n
                                         "{ !isNil { BIS_fnc_blackIn_completed } }" \n
                                         "&&" \n
                                         "{ BIS_fnc_blackIn_completed }" \n
                                         "&&" \n
                                         "{ scriptDone _quotation }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "debug_stage_0">*/
                                class debug_stage_0
                                {
                                        itemno = 1;
                                        priority = 0.000000;
                                        to="stage_0";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"_debugSkipToStage == 0" \n
                                         "&&" \n
                                         "{ !isNil { BIS_fnc_blackIn_completed } }" \n
                                         "&&" \n
                                         "{ BIS_fnc_blackIn_completed }" \n
                                         "&&" \n
                                         "{ scriptDone _quotation }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "stage_0">*/
                class stage_0
                {
                        name = "stage_0";
                        itemno = 2;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations & Tasks" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	//Wait task" \n
                         "	""BIS_wait"" call BIS_fnc_missionTasks;" \n
                         "	" \n
                         "	//Conversations" \n
                         "	{" \n
                         "		if (isNil { BIS_playerGroupDetectedAtStart }) then {" \n
                         "			_x call BIS_fnc_missionConversations;" \n
                         "		};" \n
                         "	} forEach [" \n
                         "		""BIS_sitrep""," \n
                         "		""BIS_engagePrepare""," \n
                         "		""BIS_plan""," \n
                         "		""BIS_Go""" \n
                         "	];" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Player group" \n
                         "//****************************************" \n
                         "//Hold fire, but be ready" \n
                         "enableSentences false;" \n
                         "_groupAlpha setCombatMode ""GREEN"";" \n
                         "_groupAlpha setBehaviour ""COMBAT"";" \n
                         "_groupAlpha setFormation ""LINE"";" \n
                         "_groupAlpha setSpeedMode ""FULL"";" \n
                         "" \n
                         "//If player or his team members fire their weapon" \n
                         "//before the tower enemies are down, attack starts prematurely" \n
                         "{" \n
                         "	//The event handler" \n
                         "	private ""_handlerFired"";" \n
                         "	_handlerFired = _x addEventHandler [""Fired"", {" \n
                         "		//Flag" \n
                         "		BIS_misfire = true;" \n
                         "		" \n
                         "		//Remove event handler from all team members" \n
                         "		{" \n
                         "			_x removeEventHandler [""Fired"", _x getVariable ""BIS_handlerFired""];" \n
                         "		} forEach units group (_this select 0);" \n
                         "	}];" \n
                         "	" \n
                         "	//Store handler" \n
                         "	_x setVariable [""BIS_handlerFired"", _handlerFired];" \n
                         "	" \n
                         "} forEach units _groupAlpha;" \n
                         "" \n
                         "//****************************************" \n
                         "//Tower guards" \n
                         "//****************************************" \n
                         "//The group" \n
                         "private ""_groupTowerGuards"";" \n
                         "_groupTowerGuards = createGroup RESISTANCE;" \n
                         "" \n
                         "//The times guards have fired their gun" \n
                         "//Used to detect when we should fail the task" \n
                         "BIS_guardsFiredRounds = 0;" \n
                         "" \n
                         "{" \n
                         "	//Parameters" \n
                         "	private [""_position"", ""_direction""];" \n
                         "	_position 	= [_x, 0, [0,0,0], [[]]] call BIS_fnc_param;" \n
                         "	_direction 	= [_x, 1, 0, [0]] call BIS_fnc_param;" \n
                         "	" \n
                         "	//Spawn the unit" \n
                         "	private ""_unit"";" \n
                         "	_unit = _groupTowerGuards createUnit [""I_soldier_F"", _position, [], 0, ""NONE""];" \n
                         "	" \n
                         "	//Set position and direction" \n
                         "	_unit setDir _direction;" \n
                         "	_unit setPosASL _position;" \n
                         "	" \n
                         "	//Disable Ai" \n
                         "	_unit disableAi ""MOVE"";" \n
                         "	" \n
                         "	//Always stand up" \n
                         "	_unit setUnitPos ""UP"";" \n
                         "	" \n
                         "	//Danger" \n
                         "	_unit setBehaviour ""COMBAT"";" \n
                         "	" \n
                         "	//Reveal to the player group" \n
                         "	_groupAlpha reveal [_unit, 4];" \n
                         "	" \n
                         "	//Hit event handler" \n
                         "	_unit addEventHandler [""Hit"", {" \n
                         "		(_this select 0) setDamage 1;" \n
                         "	}];" \n
                         "	" \n
                         "	//Fired event handler" \n
                         "	_unit addEventHandler [""Fired"", {" \n
                         "		BIS_guardsFiredRounds = BIS_guardsFiredRounds +1;" \n
                         "	}];" \n
                         "	" \n
                         "	//Log" \n
                         "	[""Stage 0: Guard tower (%1) was spawned at (%2) with direction of (%3)"", _unit, _position, _direction] call BIS_fnc_logFormat;" \n
                         "	" \n
                         "} forEach [" \n
                         "	[[14197,21248.9,81.032], 305]," \n
                         "	[[14220,21206.8,92.3466], 275]" \n
                         "];" \n
                         "" \n
                         "//***************************" \n
                         "//Ambient jet flyby" \n
                         "//***************************" \n
                         "private [""_start"", ""_end""];" \n
                         "_start 		= [_positionFrini, 1000, getDir player + 90] call BIS_fnc_relPos;" \n
                         "_end 		= [_positionFrini, 2000, getDir player + 270] call BIS_fnc_relPos;" \n
                         "" \n
                         "//Flyby" \n
                         "[_start, _end, 150, ""FULL"", ""I_Plane_Fighter_03_CAS_F"", RESISTANCE] call BIS_fnc_ambientFlyby;" \n
                         "" \n
                         "//***************************" \n
                         "//Music" \n
                         "//***************************" \n
                         "playMusic ""Track11_StageB_stealth"";" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 0: Initialized"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "detected">*/
                                class detected
                                {
                                        itemno = 86;
                                        priority = 1.000000;
                                        to="failed_to_stay_u";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!isNil { BIS_misfire }" \n
                                         "||" \n
                                         "(" \n
                                         "	{" \n
                                         "		private ""_guard"";" \n
                                         "		_guard = _x;" \n
                                         "		" \n
                                         "		{" \n
                                         "			_guard knowsAbout _x >= 1" \n
                                         "		} count units _groupAlpha > 0" \n
                                         "	 } count units _groupTowerGuards > 0" \n
                                         "	||" \n
                                         "	{ BIS_guardsFiredRounds >= _guardsMinFiredRounds }" \n
                                         ")" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "conversations_fi">*/
                                class conversations_fi
                                {
                                        itemno = 8;
                                        priority = 0.000000;
                                        to="engage";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "mortar">*/
                class mortar
                {
                        name = "mortar";
                        itemno = 4;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Enemy Group" \n
                         "//****************************************" \n
                         "private ""_group"";" \n
                         "_group = [_positionFrini, RESISTANCE, configfile >> ""CfgGroups"" >> ""Indep"" >> ""IND_F"" >> ""Infantry"" >> ""HAF_InfSquad_Weapons""] call BIS_fnc_spawnGroup;" \n
                         "" \n
                         "//Guard only, do not engage" \n
                         "_group enableAttack false;" \n
                         "" \n
                         "//Do not allow fleeing" \n
                         "_group allowFleeing 0;" \n
                         "" \n
                         "//Set skill" \n
                         "{" \n
                         "	_x setSkill _skillEnemy;" \n
                         "} forEach units _group;" \n
                         "" \n
                         "//Add guard waypoint" \n
                         "private ""_waypoint"";" \n
                         "_waypoint = _group addWaypoint [_positionFrini, 0];" \n
                         "_waypoint setWaypointType ""GUARD"";" \n
                         "_waypoint setWaypointBehaviour ""COMBAT"";" \n
                         "_waypoint setWaypointCombatMode ""YELLOW"";" \n
                         "_waypoint setWaypointSpeed ""NORMAL"";" \n
                         "_waypoint setWaypointCompletionRadius 100;" \n
                         "_waypoint setWaypointVisible false;" \n
                         "_waypoint showWaypoint ""NEVER"";" \n
                         "" \n
                         "//Log" \n
                         "[""Stage 1: Group (%1) spawned and guarding Frini"", _group] call BIS_fnc_logFormat;" \n
                         "" \n
                         "//****************************************" \n
                         "//Enemy Mortar" \n
                         "//****************************************" \n
                         "private [""_mortarContainer"", ""_mortar"", ""_mortarCrew"", ""_mortarGroup""];" \n
                         "_mortarContainer	= [_positionMortar, random 360, ""I_Mortar_01_F"", RESISTANCE] call BIS_fnc_spawnVehicle;" \n
                         "_mortar			= _mortarContainer select 0;" \n
                         "_mortarCrew		= _mortarContainer select 1;" \n
                         "_mortarGroup		= _mortarContainer select 2;" \n
                         "" \n
                         "//Make mortar fire on the Outpost until it is eliminated" \n
                         "private ""_mortarThread"";" \n
                         "_mortarThread = [_mortar, _mortarCrew, _mortarGroup, _positionOutpost] spawn {" \n
                         "	scriptName ""MissionFlow.fsm > Stage 2 > Mortar Thread"";" \n
                         "	" \n
                         "	//Parameters" \n
                         "	private [""_mortar"", ""_crew"", ""_group""];" \n
                         "	_mortar 	= [_this, 0, objNull, [objNull]] call BIS_fnc_param;" \n
                         "	_crew 		= [_this, 1, [], [[]]] call BIS_fnc_param;" \n
                         "	_group 	= [_this, 2, grpNull, [grpNull]] call BIS_fnc_param;" \n
                         "	_outpost	= [_this, 3, [], [[]]] call BIS_fnc_param;" \n
                         "	" \n
                         "	//Radius" \n
                         "	private ""_radiusDefault"";" \n
                         "	_radiusDefault = 150;" \n
                         "	" \n
                         "	//Time" \n
                         "	private ""_time"";" \n
                         "	_time = time;" \n
                         "	" \n
                         "	//Loop" \n
                         "	while { alive _mortar && { { alive _x } count _crew > 0 } && { isNil { BIS_mortarThresholdReached } } && { isNil { BIS_mortarKnowsAboutPlayer } } && { isNil { BIS_mortarThreshold } } } do {" \n
                         "		//Timenow" \n
                         "		private ""_timeNow"";" \n
                         "		_timeNow = time - _time;" \n
                         "		" \n
                         "		//Decrease only small percentage" \n
                         "		private ""_decrement"";" \n
                         "		_decrement = _timeNow / 10;" \n
                         "		" \n
                         "		//The current radius" \n
                         "		private ""_radius"";" \n
                         "		_radius = _radiusDefault - _decrement;" \n
                         "		" \n
                         "		//Minimum mortar radius" \n
                         "		if (_radius > 90) then {" \n
                         "			//The target position" \n
                         "			private ""_position"";" \n
                         "			_position = [_outpost, _radius, random 360] call BIS_fnc_relPos;" \n
                         "			" \n
                         "			//The maximum index" \n
                         "			private ""_index"";" \n
                         "			_index = 1;" \n
                         "			" \n
                         "			//Make sure position is not near friendly units" \n
                         "			while { { side _x == WEST && _x distance _position < 50 } count allUnits > 0 && _index < 100 } do {" \n
                         "				_position = [_outpost, _radius, random 360] call BIS_fnc_relPos;" \n
                         "			};" \n
                         "			" \n
                         "			//Rearm" \n
                         "			_mortar setVehicleAmmo 1;" \n
                         "			" \n
                         "			//Fire" \n
                         "			_mortar commandArtilleryFire [_position, (getArtilleryAmmo [_mortar]) select 0, 1];" \n
                         "			" \n
                         "			//Delay between each shot" \n
                         "			private ""_delay"";" \n
                         "			_delay = time + ([10, 20] call BIS_fnc_randomNum);" \n
                         "			" \n
                         "			//Wait until time to fire next shot or player is near" \n
                         "			waitUntil {" \n
                         "				time > _delay" \n
                         "				||" \n
                         "				(" \n
                         "					player distance _mortar < 15" \n
                         "					&&" \n
                         "					gunner _mortar knowsAbout player >= 3" \n
                         "				)" \n
                         "			};" \n
                         "			" \n
                         "			//Is player near the mortar? if so, we make the crew disembark" \n
                         "			if (player distance _mortar < 15 && { gunner _mortar knowsAbout player >= 3 }) then {" \n
                         "				//Flag" \n
                         "				BIS_mortarKnowsAboutPlayer = true;" \n
                         "				" \n
                         "				//Make gunner disembark" \n
                         "				crew _mortar orderGetIn false;" \n
                         "				crew _mortar allowGetIn false;" \n
                         "			};" \n
                         "			" \n
                         "			//Log" \n
                         "			[""Stage 1: Mortar (%1) fired at Position (%2), Radius (%3), TimeNow (%4)"", _mortar, _position, _radius, _timeNow] call BIS_fnc_logFormat;" \n
                         "		} else {" \n
                         "			//Fire" \n
                         "			_mortar commandArtilleryFire [position BIS_vehicleTruck, (getArtilleryAmmo [_mortar]) select 0, 1];" \n
                         "			" \n
                         "			//Event handler" \n
                         "			_mortar addEventHandler [""Fired"", {" \n
                         "				(_this select 6) spawn {" \n
                         "					//Wait until round hits something" \n
                         "					waitUntil { !isNull _this };" \n
                         "					" \n
                         "					//Destroy truck and driver" \n
                         "					detach BIS_deltaLeader;" \n
                         "					BIS_deltaLeader setDamage 1;" \n
                         "					BIS_vehicleTruck setDamage 1;" \n
                         "					" \n
                         "					//Flag" \n
                         "					BIS_mortarThresholdReached = true;" \n
                         "				};" \n
                         "			}];" \n
                         "			" \n
                         "			//Threshold flag" \n
                         "			BIS_mortarThreshold = true;" \n
                         "			" \n
                         "			//Log" \n
                         "			[""Stage 1: Mortar (%1) reached it's threshold, TimeNow (%2)"", _mortar, _timeNow] call BIS_fnc_logFormat;" \n
                         "		};" \n
                         "	};" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Music" \n
                         "//****************************************" \n
                         "5 fadeMusic 0;" \n
                         "[] spawn { sleep 5; playMusic ""Track12_StageC_action""; 5 fadeMusic 0.25; };" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         "[""Stage 1: Enemy Mortar (%1) now in Frini"", _mortar] call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "mortar_round_det">*/
                                class mortar_round_det
                                {
                                        itemno = 63;
                                        priority = 0.000000;
                                        to="mortar_find_cove";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"count (_positionOutpost nearObjects [""Sh_82mm_AMOS"", 250]) > 0" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "stage_2">*/
                class stage_2
                {
                        name = "stage_2";
                        itemno = 6;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Save game" \n
                         "//****************************************" \n
                         "saveGame;" \n
                         "" \n
                         "//****************************************" \n
                         "//Prepare stage" \n
                         "//****************************************" \n
                         "if (_debugSkipToStage == 2) then {" \n
                         "	[_debugSkipToStage] call BIS_fnc_b_m01_debugStage;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Conversations & Tasks" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	//Conversations" \n
                         "	""BIS_friniLeave"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	//Tasks" \n
                         "	""BIS_friniRetreat"" call BIS_fnc_missionTasks;" \n
                         "	" \n
                         "	//Conversations" \n
                         "	""BIS_friniLeaveGroup"" call BIS_fnc_missionConversations;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Enemy" \n
                         "//****************************************" \n
                         "{" \n
                         "	//Parameters" \n
                         "	private ""_cfgGroup"";" \n
                         "	_cfgGroup = _x;" \n
                         "	" \n
                         "	//Relative direction" \n
                         "	private ""_direction"";" \n
                         "	_direction = 135 + (10 * _forEachIndex);" \n
                         "	" \n
                         "	//The spawn position" \n
                         "	private ""_position"";" \n
                         "	_position = [_positionFrini, 500, _direction] call BIS_fnc_relPos;" \n
                         "	" \n
                         "	//The group" \n
                         "	private ""_group"";" \n
                         "	_group = [_position, RESISTANCE, _cfgGroup] call BIS_fnc_spawnGroup;" \n
                         "	" \n
                         "	//Do not allow fleeing" \n
                         "	_group allowFleeing 0;" \n
                         "	" \n
                         "	//Do not attack" \n
                         "	_group enableAttack false;" \n
                         "	" \n
                         "	//Set skill" \n
                         "	{" \n
                         "		_x setSkill _skillEnemy;" \n
                         "	} forEach units _group;" \n
                         "	" \n
                         "	//The waypoint" \n
                         "	private ""_waypoint"";" \n
                         "	_waypoint = _group addWaypoint [_positionFrini, 0];" \n
                         "	_waypoint setWaypointType ""MOVE"";" \n
                         "	_waypoint setWaypointCombatMode ""RED"";" \n
                         "	_waypoint setWaypointBehaviour ""AWARE"";" \n
                         "	_waypoint setWaypointSpeed ""FULL"";" \n
                         "	_waypoint setWaypointCompletionRadius 100;" \n
                         "	_waypoint setWaypointVisible false;" \n
                         "	_waypoint showWaypoint ""NEVER"";" \n
                         "	" \n
                         "	//The waypoint" \n
                         "	private ""_waypoint"";" \n
                         "	_waypoint = _group addWaypoint [_positionOutpost, 0];" \n
                         "	_waypoint setWaypointType ""SAD"";" \n
                         "	_waypoint setWaypointCombatMode ""RED"";" \n
                         "	_waypoint setWaypointBehaviour ""COMBAT"";" \n
                         "	_waypoint setWaypointSpeed ""FULL"";" \n
                         "	_waypoint setWaypointCompletionRadius 100;" \n
                         "	_waypoint setWaypointVisible false;" \n
                         "	_waypoint showWaypoint ""NEVER"";" \n
                         "	" \n
                         "	//Group vehicles" \n
                         "	private ""_vehicles"";" \n
                         "	_vehicles = [_group] call BIS_fnc_groupVehicles;" \n
                         "	" \n
                         "	//Group has vehicle? Board it then" \n
                         "	if (count _vehicles > 0) then {" \n
                         "		//The vehicle" \n
                         "		private ""_vehicle"";" \n
                         "		_vehicle = _vehicles select 0;" \n
                         "		" \n
                         "		{" \n
                         "			//Has no vehicle and there are seats available" \n
                         "			if (vehicle _x == _x && _vehicle emptyPositions ""CARGO"" > 0) then {" \n
                         "				_x assignAsCargo _vehicle;" \n
                         "				_x moveInCargo _vehicle;" \n
                         "			};" \n
                         "		} forEach units _group;" \n
                         "	};" \n
                         "	" \n
                         "	//Log" \n
                         "	[""Stage 2: Group (%1) spawned at position (%2), of type (%3)"", _group, _position, _cfgGroup] call BIS_fnc_logFormat;" \n
                         "" \n
                         "} forEach [" \n
                         "	configfile >> ""CfgGroups"" >> ""Indep"" >> ""IND_F"" >> ""Infantry"" >> ""HAF_InfSquad""," \n
                         "	configfile >> ""CfgGroups"" >> ""Indep"" >> ""IND_F"" >> ""Infantry"" >> ""HAF_InfSquad_Weapons""," \n
                         "	configfile >> ""CfgGroups"" >> ""Indep"" >> ""IND_F"" >> ""Motorized"" >> ""HAF_MotInf_Team""" \n
                         "];" \n
                         "" \n
                         "//****************************************" \n
                         "//Timeout" \n
                         "//****************************************" \n
                         "private [""_timeoutWarning"", ""_timeoutFail""];" \n
                         "_timeoutWarning 	= time + (_timeRetreatFrini / 2);" \n
                         "_timeoutFail		= time + _timeRetreatFrini;" \n
                         "" \n
                         "//****************************************" \n
                         "//Music" \n
                         "//****************************************" \n
                         "5 fadeMusic 0;" \n
                         "[] spawn { sleep 5; playMusic ""Track12_StageC_action""; 5 fadeMusic 0.25; };" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 2: Initialized"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "taking_too_much">*/
                                class taking_too_much
                                {
                                        itemno = 65;
                                        priority = 1.000000;
                                        to="warning";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{ time > _timeoutWarning }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "at_the_outpost">*/
                                class at_the_outpost
                                {
                                        itemno = 25;
                                        priority = 0.000000;
                                        to="wait_for_orders_1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{ player distance _positionOutpost < 100 }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "defend_outpost">*/
                class defend_outpost
                {
                        name = "defend_outpost";
                        itemno = 7;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations & Tasks" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	""BIS_outpostLastStand"" call BIS_fnc_missionConversations;" \n
                         "	""BIS_outpostDefend"" call BIS_fnc_missionTasks;" \n
                         "	savegame;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Enemy" \n
                         "//****************************************" \n
                         "{" \n
                         "	//Parameters" \n
                         "	private ""_cfgGroup"";" \n
                         "	_cfgGroup = _x;" \n
                         "	" \n
                         "	//Relative direction" \n
                         "	private ""_direction"";" \n
                         "	_direction = 135 + (10 * _forEachIndex);" \n
                         "	" \n
                         "	//The spawn position" \n
                         "	private ""_position"";" \n
                         "	_position = [_positionOutpost, 500, _direction] call BIS_fnc_relPos;" \n
                         "	" \n
                         "	//The group" \n
                         "	private ""_group"";" \n
                         "	_group = [_position, EAST, _cfgGroup] call BIS_fnc_spawnGroup;" \n
                         "	" \n
                         "	//Do not allow fleeing" \n
                         "	_group allowFleeing 0;" \n
                         "	" \n
                         "	//Set skill" \n
                         "	{" \n
                         "		_x setSkill _skillEnemy;" \n
                         "	} forEach units _group;" \n
                         "	" \n
                         "	//Group vehicles" \n
                         "	private ""_vehicles"";" \n
                         "	_vehicles = [_group] call BIS_fnc_groupVehicles;" \n
                         "	" \n
                         "	//Group has vehicle? Board it then" \n
                         "	if (count _vehicles > 0) then {" \n
                         "		//The vehicle" \n
                         "		private ""_vehicle"";" \n
                         "		_vehicle = _vehicles select 0;" \n
                         "		" \n
                         "		{" \n
                         "			//Has no vehicle and there are seats available" \n
                         "			if (vehicle _x == _x && _vehicle emptyPositions ""CARGO"" > 0) then {" \n
                         "				_x assignAsCargo _vehicle;" \n
                         "				_x moveInCargo _vehicle;" \n
                         "			};" \n
                         "		} forEach units _group;" \n
                         "	};" \n
                         "	" \n
                         "	//Log" \n
                         "	[""Stage 2: Group (%1) spawned at position (%2), of type (%3)"", _group, _position, _cfgGroup] call BIS_fnc_logFormat;" \n
                         "" \n
                         "} forEach [" \n
                         "	configfile >> ""CfgGroups"" >> ""East"" >> ""OPF_F"" >> ""Mechanized"" >> ""OIA_MechInfSquad""," \n
                         "	configfile >> ""CfgGroups"" >> ""East"" >> ""OPF_F"" >> ""Infantry"" >> ""OIA_InfSquad""" \n
                         "];" \n
                         "" \n
                         "//Make all enemy attack the Outpost" \n
                         "{" \n
                         "	//Make sure we only grab enemy groups" \n
                         "	if (side _x != WEST) then {" \n
                         "		//The waypoint" \n
                         "		private ""_waypoint"";" \n
                         "		_waypoint = _x addWaypoint [_positionMiddleWay, 0];" \n
                         "		_waypoint setWaypointType ""MOVE"";" \n
                         "		_waypoint setWaypointCombatMode ""RED"";" \n
                         "		_waypoint setWaypointBehaviour ""AWARE"";" \n
                         "		_waypoint setWaypointSpeed ""FULL"";" \n
                         "		_waypoint setWaypointCompletionRadius 50;" \n
                         "		_waypoint setWaypointVisible false;" \n
                         "		_waypoint showWaypoint ""NEVER"";" \n
                         "		" \n
                         "		//Set as current waypoint" \n
                         "		_x setCurrentWaypoint _waypoint;" \n
                         "		" \n
                         "		//The waypoint" \n
                         "		private ""_waypoint"";" \n
                         "		_waypoint = _x addWaypoint [_positionOutpost, 0];" \n
                         "		_waypoint setWaypointType ""SAD"";" \n
                         "		_waypoint setWaypointCombatMode ""RED"";" \n
                         "		_waypoint setWaypointBehaviour ""AWARE"";" \n
                         "		_waypoint setWaypointSpeed ""FULL"";" \n
                         "		_waypoint setWaypointCompletionRadius 50;" \n
                         "		_waypoint setWaypointVisible false;" \n
                         "		_waypoint showWaypoint ""NEVER"";" \n
                         "		" \n
                         "		//Enable attack" \n
                         "		_x enableAttack true;" \n
                         "		" \n
                         "		//Do not allow fleeing" \n
                         "		_x allowFleeing 0;" \n
                         "	};" \n
                         "} forEach allGroups;" \n
                         "" \n
                         "//****************************************" \n
                         "//Delay" \n
                         "//****************************************" \n
                         "private [""_half"", ""_quarter"", ""_delayHalf"", ""_delayThreeQuarters"", ""_delayTotal""];" \n
                         "_half					= _timeDefendOutpost / 2;" \n
                         "_quarter				= _timeDefendOutpost / 4;" \n
                         "_delayHalf				= time + _half;" \n
                         "_delayThreeQuarters	= time + _half + _quarter;" \n
                         "_delayTotal			= time + _timeDefendOutpost;" \n
                         "" \n
                         "//Log" \n
                         "[""Outpost defend time: %1, Half: %2, ThreeQuarters: %3, Total: %4"", _timeDefendOutpost, _delayHalf, _delayThreeQuarters, _delayTotal] call BIS_fnc_logFormat;" \n
                         "" \n
                         "//****************************************" \n
                         "//Instructor Figure" \n
                         "//****************************************" \n
                         "[""AddTopic"", [""i10_defendOutpost"",""B_m01"", localize ""STR_A3_Campaign_B_m01_Instructor_DefendOutpost""] ] call BIS_fnc_InstructorFigure;" \n
                         "" \n
                         "//****************************************" \n
                         "//Hints" \n
                         "//****************************************" \n
                         "[[""Command"", ""Complex""], 15] spawn BIS_fnc_advHint;" \n
                         "" \n
                         "//****************************************" \n
                         "//Music" \n
                         "//****************************************" \n
                         "5 fadeMusic 0;" \n
                         "[] spawn { sleep 5; playMusic ""Track10_StageB_action""; 5 fadeMusic 0.25; addMusicEventHandler [""MusicStop"", { playMusic (_this select 0); }]; };" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 2: Defending the Outpost"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "supply_truck_des">*/
                                class supply_truck_des
                                {
                                        itemno = 38;
                                        priority = 1.000000;
                                        to="truck_immobilize";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{" \n
                                         "	!alive _vehicleTruck" \n
                                         "	||" \n
                                         "	{ !canMove _vehicleTruck }" \n
                                         "	||" \n
                                         "	{ !alive _unitDeltaLeader }" \n
                                         "}" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "half_time_has_pa">*/
                                class half_time_has_pa
                                {
                                        itemno = 58;
                                        priority = 0.000000;
                                        to="supplies_sitrep";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{ time > _delayHalf }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "stage_1">*/
                class stage_1
                {
                        name = "stage_1";
                        itemno = 9;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Prepare stage" \n
                         "//****************************************" \n
                         "if (_debugSkipToStage == 1) then {" \n
                         "	[_debugSkipToStage] call BIS_fnc_b_m01_debugStage;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Conversations & Tasks" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	//Conversations" \n
                         "	""BIS_outpostAttack"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	//Tasks" \n
                         "	[""BIS_outpostAttack"", ""ASSIGNED""] call BIS_fnc_missionTasks;" \n
                         "	" \n
                         "	//Conversations" \n
                         "	""BIS_outpostAttackGroup"" call BIS_fnc_missionConversations;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Make groups attack the Outpost" \n
                         "//****************************************" \n
                         "{" \n
                         "	//The group" \n
                         "	private ""_group"";" \n
                         "	_group = _x;" \n
                         "	" \n
                         "	//Go through group units" \n
                         "	{" \n
                         "		//The unit" \n
                         "		private ""_unit"";" \n
                         "		_unit = _x;" \n
                         "		" \n
                         "		//Enable AI abilities" \n
                         "		_unit enableAi ""FSM"";" \n
                         "		_unit enableAi ""ANIM"";" \n
                         "		_unit enableAi ""MOVE"";" \n
                         "		_unit enableAi ""TARGET"";" \n
                         "		_unit enableAi ""AUTOTARGET"";" \n
                         "		" \n
                         "		//Enable AI ability to change stance" \n
                         "		_unit setUnitPos ""AUTO"";" \n
                         "		" \n
                         "		//Follow team leader" \n
                         "		if (_unit != leader _group) then {" \n
                         "			_unit doFollow leader _group;" \n
                         "		};" \n
                         "	} forEach units _group;" \n
                         "	" \n
                         "	//Add waypoint to attack Outpost" \n
                         "	private ""_waypoint"";" \n
                         "	_waypoint = _group addWaypoint [_positionOutpost, 0];" \n
                         "	_waypoint setWaypointType ""MOVE"";" \n
                         "	_waypoint setWaypointBehaviour ""COMBAT"";" \n
                         "	_waypoint setWaypointCombatMode ""YELLOW"";" \n
                         "	_waypoint setWaypointSpeed ""FULL"";" \n
                         "	_waypoint setWaypointFormation ""LINE"";" \n
                         "	_waypoint setWaypointCompletionRadius 50;" \n
                         "	_waypoint setWaypointVisible false;" \n
                         "	_waypoint showWaypoint ""NEVER"";" \n
                         "	" \n
                         "	//Do not allow fleeing" \n
                         "	_group allowFleeing 0;" \n
                         "	" \n
                         "	//Log" \n
                         "	[""Stage 1: Group (%1) is now attacking the Outpost"", _group] call BIS_fnc_logFormat;" \n
                         "	" \n
                         "} forEach [" \n
                         "	_groupAlpha," \n
                         "	_groupBravo," \n
                         "	_groupCharlie" \n
                         "];" \n
                         "" \n
                         "//****************************************" \n
                         "//Machine gunners give suppressing fire" \n
                         "//****************************************" \n
                         "private ""_machineGunners"";" \n
                         "_machineGunners = [];" \n
                         "" \n
                         "//Join MG's to the same group" \n
                         "{" \n
                         "	//Loop group units" \n
                         "	{" \n
                         "		//Is MG?" \n
                         "		if (typeOf _x == ""B_G_Soldier_AR_F"") then {" \n
                         "			//Store old group" \n
                         "			_x setVariable [""BIS_originalGroup"", group _x];" \n
                         "			" \n
                         "			//New group" \n
                         "			private ""_group"";" \n
                         "			_group = createGroup WEST;" \n
                         "			" \n
                         "			//Join group" \n
                         "			[_x] joinSilent _group;" \n
                         "			" \n
                         "			//Prone" \n
                         "			_x setUnitPos ""DOWN"";" \n
                         "			" \n
                         "			//Anim" \n
                         "			_x playMoveNow ""amovppnemstpsraswrfldnon"";" \n
                         "			" \n
                         "			//Suppressive fire thread" \n
                         "			[_x, _positionOutpost] spawn {" \n
                         "				//Parameters" \n
                         "				private [""_mg"", ""_positionOutpost""];" \n
                         "				_mg				= [_this, 0, objNull, [objNull]] call BIS_fnc_param;" \n
                         "				_positionOutpost	= [_this, 1, [], [[]]] call BIS_fnc_param;" \n
                         "				" \n
                         "				//Some delay before firing starts" \n
                         "				sleep 5;" \n
                         "				" \n
                         "				//Suppressive fire properties" \n
                         "				private [""_roundsPerBurst"", ""_delayBetweenBursts"", ""_delayBetweenShots"", ""_condition""];" \n
                         "				_roundsPerBurst 		= round ([5, 10] call BIS_fnc_randomNum);" \n
                         "				_delayBetweenBursts	= [1, 2] call BIS_fnc_randomNum;" \n
                         "				_delayBetweenShots	= 0.05 + random 0.1;" \n
                         "				_condition				= { { _x distance getMarkerPos ""BIS_outpost"" < 80 } count (units BIS_alpha + units BIS_bravo + units BIS_charlie) < 1 };" \n
                         "				" \n
                         "				//Start suppressing fire on the Outpost" \n
                         "				[_mg, _positionOutpost, _roundsPerBurst, _delayBetweenBursts, _delayBetweenShots, _condition] call BIS_fnc_b_m01_suppressiveFire;" \n
                         "			};" \n
                         "			" \n
                         "			//Store unit" \n
                         "			_machineGunners set [count _machineGunners, _x];" \n
                         "		};" \n
                         "	} forEach units _x;" \n
                         "} forEach [" \n
                         "	_groupAlpha," \n
                         "	_groupBravo," \n
                         "	_groupCharlie" \n
                         "];" \n
                         "" \n
                         "//Log" \n
                         "[""Stage 1: Machine gunners (%1) join independent group and give suppressive fire at the Outpost"", _machineGunners] call BIS_fnc_logFormat;" \n
                         "" \n
                         "//****************************************" \n
                         "//Smoke grenades" \n
                         "//****************************************" \n
                         "{" \n
                         "	//The leader of the group" \n
                         "	private ""_leader"";" \n
                         "	_leader = leader _x;" \n
                         "	" \n
                         "	//The start position for the smokeshell" \n
                         "	private ""_positionStart"";" \n
                         "	_positionStart = position _leader;" \n
                         "	_positionStart set [2, 25];" \n
                         "	" \n
                         "	//The relative direction" \n
                         "	private ""_direction"";" \n
                         "	_direction = ([_positionStart, _positionOutpost] call BIS_fnc_dirTo) + ([random -10, random 10] call BIS_fnc_selectRandom);" \n
                         "	" \n
                         "	//The smokeshell" \n
                         "	private ""_smokeshell"";" \n
                         "	_smokeshell = createVehicle [""SmokeShell"", _positionStart, [], 0, ""NONE""];" \n
                         "	" \n
                         "	//The added speed" \n
                         "	private ""_speed"";" \n
                         "	_speed = 80;" \n
                         "	" \n
                         "	//Add velocity to the smokeshell" \n
                         "	_smokeshell setVelocity [sin _direction * _speed, cos _direction * _speed, 0];" \n
                         "	" \n
                         "} forEach [" \n
                         "	_groupAlpha," \n
                         "	_groupBravo," \n
                         "	_groupCharlie" \n
                         "];" \n
                         "" \n
                         "//****************************************" \n
                         "//Enemy at the Outpost" \n
                         "//****************************************" \n
                         "//Group guarding the outpost" \n
                         "private ""_group"";" \n
                         "_group = [_positionOutpost, RESISTANCE, configfile >> ""CfgGroups"" >> ""Indep"" >> ""IND_F"" >> ""Infantry"" >> ""HAF_InfSquad""] call BIS_fnc_spawnGroup;" \n
                         "" \n
                         "//Do not allow fleeing" \n
                         "_group allowFleeing 0;" \n
                         "" \n
                         "//Do not allow attacking" \n
                         "_group enableAttack false;" \n
                         "" \n
                         "//Set skill" \n
                         "{" \n
                         "	_x setSkill _skillEnemy;" \n
                         "} forEach units _group;" \n
                         "" \n
                         "//Add waypoint" \n
                         "private ""_waypoint"";" \n
                         "_waypoint = _group addWaypoint [_positionOutpost, 0];" \n
                         "_waypoint setWaypointType ""GUARD"";" \n
                         "_waypoint setWaypointBehaviour ""COMBAT"";" \n
                         "_waypoint setWaypointCombatMode ""RED"";" \n
                         "_waypoint setWaypointSpeed ""NORMAL"";" \n
                         "_waypoint setWaypointCompletionRadius 50;" \n
                         "_waypoint setWaypointVisible false;" \n
                         "_waypoint showWaypoint ""NEVER"";" \n
                         "" \n
                         "//If player was detected on the intro, enemy is revealed, the FIA units" \n
                         "if (!isNil { BIS_playerGroupDetected }) then {" \n
                         "	{" \n
                         "		_group reveal [_x, 4];" \n
                         "	} forEach units _groupAlpha + units _groupBravo + units _groupCharlie;" \n
                         "};" \n
                         "" \n
                         "//Log" \n
                         "[""Stage 1: Group (%1) spawned at position (%2) and now guarding the Outpost"", _group, _positionOutpost] call BIS_fnc_logFormat;" \n
                         "" \n
                         "//****************************************" \n
                         "//Enemy that rushes to player" \n
                         "//****************************************" \n
                         "//The group config" \n
                         "private ""_cfgGroup"";" \n
                         "_cfgGroup = if (!isNil { BIS_playerGroupDetected }) then {" \n
                         "	configfile >> ""CfgGroups"" >> ""Indep"" >> ""IND_F"" >> ""Infantry"" >> ""HAF_InfSquad""" \n
                         "} else {" \n
                         "	configfile >> ""CfgGroups"" >> ""Indep"" >> ""IND_F"" >> ""Infantry"" >> ""HAF_InfTeam""" \n
                         "};" \n
                         "" \n
                         "//The group" \n
                         "private ""_group"";" \n
                         "_group = [_positionOutpost, RESISTANCE, _cfgGroup] call BIS_fnc_spawnGroup;" \n
                         "" \n
                         "//Group should not flee" \n
                         "_group allowFleeing 0;" \n
                         "" \n
                         "//Set skill" \n
                         "{" \n
                         "	_x setSkill _skillEnemy;" \n
                         "} forEach units _group;" \n
                         "" \n
                         "//The waypoint position, direction and distance" \n
                         "private [""_distance"", ""_direction"", ""_position""];" \n
                         "_distance	= (_positionOutpost distance leader _groupAlpha) / 2;" \n
                         "_direction	= [_positionOutpost, position leader _groupAlpha] call BIS_fnc_dirTo;" \n
                         "_position 	= [_positionOutpost, _distance, _direction] call BIS_fnc_relPos;" \n
                         "" \n
                         "//Add waypoint" \n
                         "private ""_waypoint"";" \n
                         "_waypoint = _group addWaypoint [_position, 0];" \n
                         "_waypoint setWaypointType ""SAD"";" \n
                         "_waypoint setWaypointBehaviour ""AWARE"";" \n
                         "_waypoint setWaypointCombatMode ""RED"";" \n
                         "_waypoint setWaypointSpeed ""FULL"";" \n
                         "_waypoint setWaypointFormation ""LINE"";" \n
                         "_waypoint setWaypointVisible false;" \n
                         "_waypoint showWaypoint ""NEVER"";" \n
                         "" \n
                         "//If player was detected on the intro, enemy is revealed, the FIA units" \n
                         "if (!isNil { BIS_playerGroupDetected }) then {" \n
                         "	{" \n
                         "		_group reveal [_x, 4];" \n
                         "	} forEach units _groupAlpha + units _groupBravo + units _groupCharlie;" \n
                         "};" \n
                         "" \n
                         "//Log" \n
                         "[""Stage 1: Group (%1) spawned at position (%2) and now rushing to player position"", _group, _position] call BIS_fnc_logFormat;" \n
                         "" \n
                         "//****************************************" \n
                         "//Hints" \n
                         "//****************************************" \n
                         "[[""Command"", ""Formations""], 15] spawn BIS_fnc_advHint;" \n
                         "" \n
                         "//****************************************" \n
                         "//Music" \n
                         "//****************************************" \n
                         "5 fadeMusic 0;" \n
                         "[] spawn { sleep 5; playMusic ""Track10_StageB_action""; 5 fadeMusic 0.25; };" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 1: Attack on the Outpost has started"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "inside_outpost">*/
                                class inside_outpost
                                {
                                        itemno = 45;
                                        priority = 0.000000;
                                        to="stop_suppressing";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{ _x distance _positionOutpost < 80 } count units _groupAlpha + units _groupBravo + units _groupCharlie > 0" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "delta_moves_to_o">*/
                class delta_moves_to_o
                {
                        name = "delta_moves_to_o";
                        itemno = 14;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations & Tasks" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	//Conversations" \n
                         "	""BIS_outpostSecure"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	//Tasks" \n
                         "	[""BIS_outpostAttack"", ""SUCCEEDED""] call BIS_fnc_missionTasks;" \n
                         "	" \n
                         "	//Conversations" \n
                         "	""BIS_deltaMoveIn"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	//Save game" \n
                         "	saveGame;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Supply Truck" \n
                         "//****************************************" \n
                         "//Add waypoint" \n
                         "private ""_waypoint"";" \n
                         "_waypoint = _groupDelta addWaypoint [_positionOutpost, 0];" \n
                         "_waypoint setWaypointType ""MOVE"";" \n
                         "_waypoint setWaypointBehaviour ""AWARE"";" \n
                         "_waypoint setWaypointCombatMode ""BLUE"";" \n
                         "_waypoint setWaypointSpeed ""FULL"";" \n
                         "_waypoint setWaypointFormation ""FILE"";" \n
                         "_waypoint setWaypointStatements [""true"", ""BIS_truckAtOutpost = true;""];" \n
                         "" \n
                         "//Disable attack ability" \n
                         "_groupDelta enableAttack false;" \n
                         "" \n
                         "//Do not flee" \n
                         "_groupDelta allowFleeing 0;" \n
                         "" \n
                         "//Disable Ai stuff" \n
                         "_unitDeltaLeader disableAi ""TARGET"";" \n
                         "_unitDeltaLeader disableAi ""AUTOTARGET"";" \n
                         "" \n
                         "//****************************************" \n
                         "//Enemy" \n
                         "//****************************************" \n
                         "//Small group fleeing the Outpost to Frini" \n
                         "private ""_group"";" \n
                         "_group = [_positionMiddleWay, RESISTANCE, configfile >> ""CfgGroups"" >> ""Indep"" >> ""IND_F"" >> ""Infantry"" >> ""HAF_InfTeam""] call BIS_fnc_spawnGroup;" \n
                         "" \n
                         "//Group should not flee" \n
                         "_group allowFleeing 0;" \n
                         "" \n
                         "//Group should not attack" \n
                         "_group enableAttack false;" \n
                         "" \n
                         "//Set skill" \n
                         "{" \n
                         "	_x setSkill _skillEnemy;" \n
                         "} forEach units _group;" \n
                         "" \n
                         "//Add waypoint" \n
                         "private ""_waypoint"";" \n
                         "_waypoint = _group addWaypoint [_positionMiddleWay, 0];" \n
                         "_waypoint setWaypointType ""GUARD"";" \n
                         "_waypoint setWaypointBehaviour ""COMBAT"";" \n
                         "_waypoint setWaypointCombatMode ""RED"";" \n
                         "_waypoint setWaypointSpeed ""FULL"";" \n
                         "_waypoint setWaypointFormation ""DIAMOND"";" \n
                         "_waypoint setWaypointCompletionRadius 50;" \n
                         "" \n
                         "//Log" \n
                         "[""Stage 1: Enemy group (%1) spawned at middle way to Frini"", _group] call BIS_fnc_logFormat;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 1: Delta is moving to the Outpost"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "delta_arrives">*/
                                class delta_arrives
                                {
                                        itemno = 15;
                                        priority = 0.000000;
                                        to="delta_starts_to";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!isNil { BIS_truckAtOutpost }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "eliminate_mortar">*/
                class eliminate_mortar
                {
                        name = "eliminate_mortar";
                        itemno = 17;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations & Tasks" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	//Conversations" \n
                         "	""BIS_mortarDestroy"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	//Tasks" \n
                         "	""BIS_mortarEliminate"" call BIS_fnc_missionTasks;" \n
                         "	" \n
                         "	//Conversation" \n
                         "	""BIS_mortarDestroyGroup"" call BIS_fnc_missionConversations;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//ORBAT" \n
                         "//****************************************" \n
                         "private ""_logic"";" \n
                         "_logic = (createGroup SideLogic) createUnit [""Logic"", getMarkerPos ""BIS_friniOrbat"", [], 0, ""none""];" \n
                         "_logic setVariable [""Path"", ""configfile >> 'CfgORBAT' >> 'BIS' >> 'I_A_5_3'""];" \n
                         "_logic setVariable [""Parent"", ""configfile >> 'CfgORBAT' >> 'BIS' >> 'I_CCompany'""];" \n
                         "[_logic] execVM ""A3\Modules_f\StrategicMap\functions\fn_moduleStrategicMapORBAT.sqf"";" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 1: Attack on the village of Frini has started"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "mortar_threshold">*/
                                class mortar_threshold
                                {
                                        itemno = 36;
                                        priority = 2.000000;
                                        to="player_messed_up_1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{ !isNil { BIS_mortarThresholdReached } }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "mortar_eliminate">*/
                                class mortar_eliminate
                                {
                                        itemno = 18;
                                        priority = 1.000000;
                                        to="wait_for_orders";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{" \n
                                         "	!alive _mortar" \n
                                         "	||" \n
                                         "	{ { alive _x } count crew _mortar < 1 }" \n
                                         "}" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "near_frini">*/
                                class near_frini
                                {
                                        itemno = 75;
                                        priority = 0.000000;
                                        to="careful_in_frini";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{ player distance _positionFrini < 100 }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "wait_for_orders">*/
                class wait_for_orders
                {
                        name = "wait_for_orders";
                        itemno = 19;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations & Tasks" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	""BIS_mortarDestroyed"" call BIS_fnc_missionConversations;" \n
                         "	[""BIS_mortarEliminate"", ""SUCCEEDED""] call BIS_fnc_missionTasks;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Instructor Figure" \n
                         "//****************************************" \n
                         "if ([""TopicExists"",[ ""i05_friniMortar"" ] ] call BIS_fnc_InstructorFigure != -1) then {" \n
                         "	[""RemoveTopic"", [""i05_friniMortar""] ] call BIS_fnc_InstructorFigure;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Hints" \n
                         "//****************************************" \n
                         "[[""Tactics"", ""Disassemble""], 15] spawn BIS_fnc_advHint;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 1: Completed"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "conversations_fi">*/
                                class conversations_fi
                                {
                                        itemno = 20;
                                        priority = 0.000000;
                                        to="stage_2";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "wait_for_orders_1">*/
                class wait_for_orders_1
                {
                        name = "wait_for_orders_1";
                        itemno = 24;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Tasks" \n
                         "//****************************************" \n
                         "[""BIS_friniRetreat"", ""SUCCEEDED""] call BIS_fnc_missionTasks;" \n
                         "" \n
                         "//****************************************" \n
                         "//Delay" \n
                         "//****************************************" \n
                         "private ""_delay"";" \n
                         "_delay = time + 30;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 2: Retreat from Frini succeeded"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "delay_finished">*/
                                class delay_finished
                                {
                                        itemno = 26;
                                        priority = 0.000000;
                                        to="defend_outpost";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _delay" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "WIN1">*/
                class WIN1
                {
                        name = "WIN1";
                        itemno = 28;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//End mission" \n
                         "//****************************************" \n
                         "[[""B_hub02"", 1], true] call BIS_fnc_endMission;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 2: Mission successfull"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "retreat">*/
                class retreat
                {
                        name = "retreat";
                        itemno = 29;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations & Tasks" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	""BIS_retreat"" call BIS_fnc_missionConversations;" \n
                         "	[""BIS_outpostDefend"", ""CANCELED""] call BIS_fnc_missionTasks;" \n
                         "	""BIS_retreat"" call BIS_fnc_missionTasks;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Friendlies retreat to the forest" \n
                         "//****************************************" \n
                         "{" \n
                         "	private ""_group"";" \n
                         "	_group = _x;" \n
                         "	" \n
                         "	//Bravo or Charlie may have gunners assigned to static weapons, unassign now" \n
                         "	{" \n
                         "		//Leave static weapons" \n
                         "		units _x orderGetIn false;" \n
                         "		units _x allowGetIn false;" \n
                         "	} forEach [_groupBravo, _groupCharlie];" \n
                         "	" \n
                         "	//Delta will board the truck" \n
                         "	if (alive _vehicleTruck && { canMove _vehicleTruck } && { alive _unitDeltaLeader }) then {" \n
                         "		//Detach unit from vehicle" \n
                         "		detach _unitDeltaLeader;" \n
                         "		" \n
                         "		//Allowed to board the vehicle" \n
                         "		[_unitDeltaLeader] orderGetIn true;" \n
                         "		[_unitDeltaLeader] allowGetIn true;" \n
                         "		" \n
                         "		//Board the truck" \n
                         "		_unitDeltaLeader assignAsDriver _vehicleTruck;" \n
                         "		_unitDeltaLeader moveInDriver _vehicleTruck;" \n
                         "	};" \n
                         "	" \n
                         "	//AI abilities" \n
                         "	{" \n
                         "		//Enable" \n
                         "		_x enableAi ""MOVE"";" \n
                         "		_x enableAi ""ANIM"";" \n
                         "		_x enableAi ""FSM"";" \n
                         "		" \n
                         "		//Disable" \n
                         "		_x disableAi ""TARGET"";" \n
                         "		_x disableAi ""AUTOTARGET"";" \n
                         "		" \n
                         "		//Stand up" \n
                         "		_x setUnitPos ""UP"";" \n
                         "		" \n
                         "	} forEach units _group;" \n
                         "	" \n
                         "	//The waypoint" \n
                         "	private ""_waypoint"";" \n
                         "	_waypoint = _group addWaypoint [_positionForest, 0];" \n
                         "	_waypoint setWaypointType ""MOVE"";" \n
                         "	_waypoint setWaypointCombatMode ""BLUE"";" \n
                         "	_waypoint setWaypointBehaviour ""AWARE"";" \n
                         "	_waypoint setWaypointSpeed ""FULL"";" \n
                         "	_waypoint setWaypointFormation ""LINE"";" \n
                         "	_waypoint setWaypointCompletionRadius 50;" \n
                         "	_waypoint setWaypointVisible false;" \n
                         "	_waypoint showWaypoint ""NEVER"";" \n
                         "	" \n
                         "	//Set as current waypoint" \n
                         "	_group setCurrentWaypoint _waypoint;" \n
                         "	" \n
                         "	//Do not allow fleeing" \n
                         "	_group allowFleeing 0;" \n
                         "	" \n
                         "	//Do not allow attacking" \n
                         "	_group enableAttack false;" \n
                         "	" \n
                         "	//Log" \n
                         "	[""Stage 2: Group (%1) is fleeing to position (%2) with Waypoint (%3)"", _group, _positionOutpost, _waypoint] call BIS_fnc_logFormat;" \n
                         "	" \n
                         "} forEach [" \n
                         "	_groupAlpha," \n
                         "	_groupBravo," \n
                         "	_groupCharlie," \n
                         "	_groupDelta" \n
                         "];" \n
                         "" \n
                         "//****************************************" \n
                         "//Enemy" \n
                         "//****************************************" \n
                         "private ""_cfgGroup"";" \n
                         "_cfgGroup = configfile >> ""CfgGroups"" >> ""East"" >> ""OPF_F"" >> ""Armored"" >> ""OIA_TankPlatoon"";" \n
                         "" \n
                         "//The spawn position" \n
                         "private ""_position"";" \n
                         "_position = [_positionOutpost, 1500, 180] call BIS_fnc_relPos;" \n
                         "" \n
                         "//The group" \n
                         "private ""_group"";" \n
                         "_group = [_position, EAST, _cfgGroup] call BIS_fnc_spawnGroup;" \n
                         "" \n
                         "//Do not allow fleeing" \n
                         "_group allowFleeing 0;" \n
                         "" \n
                         "//Do not attack" \n
                         "_group enableAttack false;" \n
                         "" \n
                         "//Set skill" \n
                         "{" \n
                         "	_x setSkill _skillEnemy;" \n
                         "} forEach units _group;" \n
                         "" \n
                         "//The waypoint" \n
                         "private ""_waypoint"";" \n
                         "_waypoint = _group addWaypoint [_positionOutpost, 0];" \n
                         "_waypoint setWaypointType ""SAD"";" \n
                         "_waypoint setWaypointCombatMode ""RED"";" \n
                         "_waypoint setWaypointBehaviour ""COMBAT"";" \n
                         "_waypoint setWaypointSpeed ""FULL"";" \n
                         "_waypoint setWaypointCompletionRadius 50;" \n
                         "_waypoint setWaypointVisible false;" \n
                         "_waypoint showWaypoint ""NEVER"";" \n
                         "" \n
                         "//Log" \n
                         "[""Stage 2: Enemy group (%1) spawned at position (%2), of type (%3)"", _group, _position, _cfgGroup] call BIS_fnc_logFormat;" \n
                         "" \n
                         "//****************************************" \n
                         "//Enemy plane" \n
                         "//****************************************" \n
                         "//The spawn position and direction" \n
                         "private [""_position"", ""_direction""];" \n
                         "_position 	= [_positionOutpost, 2500, 270] call BIS_fnc_relPos;" \n
                         "_direction	= [_position, _positionOutpost] call BIS_fnc_dirTo;" \n
                         "" \n
                         "private [""_planeContainer"", ""_plane"", ""_planeCrew"", ""_planeGroup""];" \n
                         "_planeContainer 	= [_position, _direction, ""I_Plane_Fighter_03_CAS_F"", RESISTANCE] call BIS_fnc_spawnVehicle;" \n
                         "_plane				= _planeContainer select 0;" \n
                         "_planeCrew		= _planeContainer select 1;" \n
                         "_planeGroup		= _planeContainer select 2;" \n
                         "" \n
                         "//Data" \n
                         "private [""_movement"", ""_firing""];" \n
                         "_movement 	= call compile preprocessFileLineNumbers ""scenes\movement.sqf"";" \n
                         "_firing 			= call compile preprocessFileLineNumbers ""scenes\firing.sqf"";" \n
                         "" \n
                         "//Unit Play" \n
                         "[_plane, _movement] spawn BIS_fnc_unitPlay;" \n
                         "[_plane, _firing] spawn BIS_fnc_unitPlayFiring;" \n
                         "" \n
                         "//****************************************" \n
                         "//Hints" \n
                         "//****************************************" \n
                         "[[""Command"", ""Waypoints""], 15] spawn BIS_fnc_advHint;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 2: Enemy is sending army to take the Outpost back, retreat to forest started"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "retreated">*/
                                class retreated
                                {
                                        itemno = 27;
                                        priority = 0.000000;
                                        to="tasks";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"vehicle player distance _positionForest < 250" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "delta_starts_to">*/
                class delta_starts_to
                {
                        name = "delta_starts_to";
                        itemno = 34;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations & Tasks" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	//Conversations" \n
                         "	""BIS_deltaArrives"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	//Tasks" \n
                         "	""BIS_truckProtect"" call BIS_fnc_missionTasks;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Delta - Truck driver" \n
                         "//****************************************" \n
                         "//Leave truck" \n
                         "private ""_handlerTruckFiller"";" \n
                         "_handlerTruckFiller = [_vehicleTruck, _unitDeltaLeader] spawn {" \n
                         "	scriptName ""MissionFlow.fsm: Truck driver position and animation setup"";" \n
                         "	" \n
                         "	//Parameters" \n
                         "	private [""_vehicleTruck"", ""_unitDeltaLeader""];" \n
                         "	_vehicleTruck		= [_this, 0, objNull, [objNull]] call BIS_fnc_param;" \n
                         "	_unitDeltaLeader	= [_this, 1, objNull, [objNull]] call BIS_fnc_param;" \n
                         "	" \n
                         "	//Leave truck" \n
                         "	[_unitDeltaLeader] orderGetIn false;" \n
                         "	[_unitDeltaLeader] allowGetIn false;" \n
                         "	" \n
                         "	//Wait until unit is outside of the vehicle" \n
                         "	waitUntil {" \n
                         "		vehicle _unitDeltaLeader == _unitDeltaLeader" \n
                         "	};" \n
                         "	" \n
                         "	//Some delay" \n
                         "	sleep 2;" \n
                         "	" \n
                         "	//Disable AI" \n
                         "	_unitDeltaLeader disableAi ""FSM"";" \n
                         "	_unitDeltaLeader disableAi ""MOVE"";" \n
                         "	_unitDeltaLeader disableAi ""ANIM"";" \n
                         "	_unitDeltaLeader disableAi ""TARGET"";" \n
                         "	_unitDeltaLeader disableAi ""AUTOTARGET"";" \n
                         "	" \n
                         "	//Set direction, inverted truck direction" \n
                         "	_unitDeltaLeader setDir (getDir _vehicleTruck + 180);" \n
                         "	" \n
                         "	//Positions" \n
                         "	private [""_modelCoordinates"", ""_waypointOne"", ""_waypointTwo""];" \n
                         "	_modelCoordinates	= [0,-3.5,-1.7];" \n
                         "	_waypointOne 		= [position _unitDeltaLeader, 6, getDir _unitDeltaLeader] call BIS_fnc_relPos;" \n
                         "	_waypointTwo			= _vehicleTruck modelToWorld _modelCoordinates;" \n
                         "	" \n
                         "	//Make unit move forward" \n
                         "	for ""_i"" from 1 to 5 do {" \n
                         "		_unitDeltaLeader playAction ""WalkF"";" \n
                         "	};" \n
                         "	" \n
                         "	//Delay" \n
                         "	sleep 5;" \n
                         "	" \n
                         "	//Set direction, inverted truck direction" \n
                         "	_unitDeltaLeader setDir ([_unitDeltaLeader, _waypointTwo] call BIS_fnc_dirTo);" \n
                         "	" \n
                         "	//Make unit move forward" \n
                         "	_unitDeltaLeader playActionNow ""WalkF"";" \n
                         "	" \n
                         "	//Some delay" \n
                         "	private ""_timeout"";" \n
                         "	_timeout = time + 5;" \n
                         "	" \n
                         "	//Wait for timeout or unit being in position" \n
                         "	waitUntil {" \n
                         "		time > _timeout" \n
                         "		||" \n
                         "		{ _unitDeltaLeader distance _waypointTwo <= 1.5 }" \n
                         "	};" \n
                         "	" \n
                         "	//Attach to vehicle" \n
                         "	_unitDeltaLeader attachTo [_vehicleTruck, _modelCoordinates];" \n
                         "	" \n
                         "	//Play fixing animation" \n
                         "	_unitDeltaLeader switchMove ""Acts_carFixingWheel"";" \n
                         "	" \n
                         "	//Add event handler so we can loop animation" \n
                         "	_unitDeltaLeader addEventHandler [""AnimDone"", {" \n
                         "		//Parameters" \n
                         "		private [""_unitDeltaLeader"", ""_animation""];" \n
                         "		_unitDeltaLeader	= [_this, 0, objNull, [objNull]] call BIS_fnc_param;" \n
                         "		_animation 		= [_this, 1, """", [""""]] call BIS_fnc_param;" \n
                         "		" \n
                         "		//Play animation again if unit is alive and the animation is correct" \n
                         "		if (alive _unitDeltaLeader && { _animation == ""Acts_carFixingWheel"" } && { vehicle _unitDeltaLeader == _unitDeltaLeader }) then {" \n
                         "			_unitDeltaLeader switchMove _animation;" \n
                         "		};" \n
                         "	}];" \n
                         "	" \n
                         "	//Log" \n
                         "	[""Stage 1: Truck driver (%1) is now supplying the truck (%2)"", _unitDeltaLeader, _vehicleTruck] call BIS_fnc_logFormat;" \n
                         "	" \n
                         "	//Add supplies to the truck" \n
                         "	//TODO: Make it splendid, currently the following is a placeholder" \n
                         "	" \n
                         "	//Add first item" \n
                         "	private ""_index"";" \n
                         "	_index = [_vehicleTruck] call BIS_fnc_b_m01_supplyAdd;" \n
                         "	" \n
                         "	//Fill the truck with supplies" \n
                         "	while { count (_vehicleTruck getVariable [""BIS_vehicleSupplyItems"", 0]) < 8 } do {" \n
                         "		//Delay between each supply being added" \n
                         "		sleep 120;" \n
                         "		" \n
                         "		//Add supply" \n
                         "		_index = [_vehicleTruck] call BIS_fnc_b_m01_supplyAdd;" \n
                         "	};" \n
                         "	" \n
                         "	//Log" \n
                         "	[""Stage 1: Vehicle (%1) is supplied."", _vehicleTruck] call BIS_fnc_logFormat;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Alarm- Turn off if still on" \n
                         "//****************************************" \n
                         "if (!isNil { BIS_playerGroupDetected }) then {" \n
                         "	if (isNil { _objectAlarmDevice getVariable ""BIS_alarmOff"" }) then {" \n
                         "		_objectAlarmDevice setvariable [""BIS_alarmOff"", true];" \n
                         "	};" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 1: Completed"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "conversations_fi">*/
                                class conversations_fi
                                {
                                        itemno = 35;
                                        priority = 0.000000;
                                        to="mortar";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "FAIL_1">*/
                class FAIL_1
                {
                        name = "FAIL_1";
                        itemno = 37;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Tasks" \n
                         "//****************************************" \n
                         "[""BIS_mortarEliminate"", ""FAILED""] call BIS_fnc_missionTasks;" \n
                         "[""BIS_truckProtect"", ""FAILED""] call BIS_fnc_missionTasks;" \n
                         "" \n
                         "//****************************************" \n
                         "//End mission" \n
                         "//****************************************" \n
                         "[[""B_hub02"", 3], false] call BIS_fnc_endMission;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 1: Mission failed"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "truck_immobilize">*/
                class truck_immobilize
                {
                        name = "truck_immobilize";
                        itemno = 39;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations & Tasks" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	//Conversations" \n
                         "	""BIS_x_supplyTruckDestroyed"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	//Tasks" \n
                         "	[""BIS_truckProtect"", ""FAILED""] call BIS_fnc_missionTasks;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Instructor Figure" \n
                         "//****************************************" \n
                         "if ([""TopicExists"",[ ""i10_defendOutpost"" ] ] call BIS_fnc_InstructorFigure != -1) then {" \n
                         "	[""RemoveTopic"", [""i10_defendOutpost""] ] call BIS_fnc_InstructorFigure;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         "[""Stage 2: Supply Truck (%1) immobilized, Alive (%2), Can Move (%3)"", _vehicleTruck, alive _vehicleTruck, canMove _vehicleTruck] call BIS_fnc_logFormat;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "conversations_fi">*/
                                class conversations_fi
                                {
                                        itemno = 56;
                                        priority = 0.000000;
                                        to="retreat";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "tasks">*/
                class tasks
                {
                        name = "tasks";
                        itemno = 41;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Tasks" \n
                         "//****************************************" \n
                         "[""BIS_retreat"", ""SUCCEEDED""] call BIS_fnc_missionTasks;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 2: Retreat was successfull"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "supplies_safe">*/
                                class supplies_safe
                                {
                                        itemno = 43;
                                        priority = 1.000000;
                                        to="WIN1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"alive _vehicleTruck" \n
                                         "&&" \n
                                         "{ canMove _vehicleTruck }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "supplies_destroy">*/
                                class supplies_destroy
                                {
                                        itemno = 42;
                                        priority = 0.000000;
                                        to="WIN2";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!alive _vehicleTruck" \n
                                         "||" \n
                                         "{ !canMove _vehicleTruck }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "WIN2">*/
                class WIN2
                {
                        name = "WIN2";
                        itemno = 44;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//End mission" \n
                         "//****************************************" \n
                         "[[""B_hub02"", 2], true] call BIS_fnc_endMission;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 2: Mission partially successfull"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "stop_suppressing">*/
                class stop_suppressing
                {
                        name = "stop_suppressing";
                        itemno = 46;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	""BIS_suppressiveFireStop"" call BIS_fnc_missionConversations;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Machine gunners stop suppressing fire" \n
                         "//****************************************" \n
                         "//Join MG's to the same group" \n
                         "{" \n
                         "	//Temporary group" \n
                         "	private ""_groupTemp"";" \n
                         "	_groupTemp = group _x;" \n
                         "	" \n
                         "	//The group" \n
                         "	private ""_group"";" \n
                         "	_group = _x getVariable [""BIS_originalGroup"", grpNull];" \n
                         "	" \n
                         "	//Join original group" \n
                         "	[_x] joinSilent _group;" \n
                         "	" \n
                         "	//Reset variable" \n
                         "	_x setVariable [""BIS_originalGroup"", nil];" \n
                         "	" \n
                         "	//Delete temporary group" \n
                         "	deleteGroup _groupTemp;" \n
                         "	" \n
                         "	//Enable AI abilities" \n
                         "	_x enableAi ""MOVE"";" \n
                         "	_x enableAi ""TARGET"";" \n
                         "	_x enableAi ""AUTOTARGET"";" \n
                         "	_x enableAi ""FSM"";" \n
                         "	_x enableAi ""ANIM"";" \n
                         "	" \n
                         "	//Enable AI ability to change stance" \n
                         "	_x setUnitPos ""AUTO"";" \n
                         "	" \n
                         "	//Follow leader" \n
                         "	_x commandFollow leader _group;" \n
                         "	" \n
                         "} forEach _machineGunners;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 1: Player is reminded that enemy might be inside buildings too. Machine gunners join original group"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "near_tower">*/
                                class near_tower
                                {
                                        itemno = 53;
                                        priority = 0.000000;
                                        to="player_needs_to";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{ _x distance _positionOutpost < 50 } count units _groupAlpha + units _groupBravo + units _groupCharlie > 0" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "amazing">*/
                class amazing
                {
                        name = "amazing";
                        itemno = 47;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations & Tasks" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	//Conversations" \n
                         "	""BIS_guardsDead"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	//Tasks" \n
                         "	[""BIS_targets"", ""SUCCEEDED""] call BIS_fnc_missionTasks;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 0: All guards are dead"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "conversations_fi">*/
                                class conversations_fi
                                {
                                        itemno = 85;
                                        priority = 0.000000;
                                        to="remove_instructor";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "disapointing">*/
                class disapointing
                {
                        name = "disapointing";
                        itemno = 49;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations & Tasks" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	//Conversations" \n
                         "	""BIS_x_guardsAlive"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	//Tasks" \n
                         "	[""BIS_targets"", ""FAILED""] call BIS_fnc_missionTasks;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Guards" \n
                         "//****************************************" \n
                         "{" \n
                         "	_x enableAi ""MOVE"";" \n
                         "	_x setUnitPos ""UP"";" \n
                         "	_x playMoveNow ""amovpercmstpsraswrfldnon"";" \n
                         "	doStop _x;" \n
                         "	" \n
                         "} forEach units _groupTowerGuards;" \n
                         "" \n
                         "//****************************************" \n
                         "//Flag" \n
                         "//****************************************" \n
                         "BIS_playerGroupDetected = true;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 0: Player did not eliminate the targets in time"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "conversations_fi">*/
                                class conversations_fi
                                {
                                        itemno = 85;
                                        priority = 0.000000;
                                        to="remove_instructor";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "player_needs_to">*/
                class player_needs_to
                {
                        name = "player_needs_to";
                        itemno = 54;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Timeout for player to be at the Outpost" \n
                         "//****************************************" \n
                         "private [""_timeoutGetInOutpostHalf"", ""_timeoutGetInOutpost""];" \n
                         "_timeoutGetInOutpostHalf	= time + (_timeGetInOutpost / 2);" \n
                         "_timeoutGetInOutpost 		= time + _timeGetInOutpost;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         "[""Stage 1: TimeGetInOutpostHalf: %1, TimeGetInOutpost: %2"", _timeoutGetInOutpostHalf, _timeoutGetInOutpost] call BIS_fnc_logFormat;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "player_not_in_the">*/
                                class player_not_in_the
                                {
                                        itemno = 91;
                                        priority = 1.000000;
                                        to="warning_1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > _timeoutGetInOutpostHalf" \n
                                         "&&" \n
                                         "{ player distance _positionOutpost > 100 }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "outpost_secure">*/
                                class outpost_secure
                                {
                                        itemno = 13;
                                        priority = 0.000000;
                                        to="report_from_team";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"private ""_allUnits"";" \n
                                         "_allUnits = allUnits;" \n
                                         "" \n
                                         "{" \n
                                         "	side _x != WEST" \n
                                         "	&&" \n
                                         "	{ _x distance _positionOutpost < 65 }" \n
                                         "} count _allUnits < 1" \n
                                         "&&" \n
                                         "{" \n
                                         "	{" \n
                                         "		_x distance _positionOutpost < 65" \n
                                         "	} count (units _groupAlpha + units _groupBravo + units _groupCharlie) > 1" \n
                                         "}" \n
                                         "&&" \n
                                         "{ player distance _positionOutpost <= 100 }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "truck_protected">*/
                class truck_protected
                {
                        name = "truck_protected";
                        itemno = 55;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations & Tasks" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	//Conversations" \n
                         "	""BIS_suppliesReady"" call BIS_fnc_missionConversations;" \n
                         "	""BIS_supplyTruckProtected"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	//Tasks" \n
                         "	[""BIS_truckProtect"", ""SUCCEEDED""] call BIS_fnc_missionTasks;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Instructor Figure" \n
                         "//****************************************" \n
                         "if ([""TopicExists"",[ ""i10_defendOutpost"" ] ] call BIS_fnc_InstructorFigure != -1) then {" \n
                         "	[""RemoveTopic"", [""i10_defendOutpost""] ] call BIS_fnc_InstructorFigure;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         "[""Stage 2: Supply Truck (%1) protected"", _vehicleTruck] call BIS_fnc_logFormat;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "conversations_fi">*/
                                class conversations_fi
                                {
                                        itemno = 56;
                                        priority = 0.000000;
                                        to="retreat";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "supplies_sitrep">*/
                class supplies_sitrep
                {
                        name = "supplies_sitrep";
                        itemno = 59;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	""BIS_suppliesSitrep"" call BIS_fnc_missionConversations;" \n
                         "	""BIS_outpostIsHot"" call BIS_fnc_missionConversations;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 2: Half the time defending the base has passed"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "supply_truck_des">*/
                                class supply_truck_des
                                {
                                        itemno = 38;
                                        priority = 1.000000;
                                        to="truck_immobilize";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{" \n
                                         "	!alive _vehicleTruck" \n
                                         "	||" \n
                                         "	{ !canMove _vehicleTruck }" \n
                                         "	||" \n
                                         "	{ !alive _unitDeltaLeader }" \n
                                         "}" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "three_quarters_have">*/
                                class three_quarters_have
                                {
                                        itemno = 67;
                                        priority = 0.000000;
                                        to="units_sitrep";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{ time > _delayThreeQuarters }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "report_from_team">*/
                class report_from_team
                {
                        name = "report_from_team";
                        itemno = 61;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = _objectAlarmDevice spawn {" \n
                         "	sleep 5;" \n
                         "	""BIS_outpostReport"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	if (!isNil { BIS_playerGroupDetected } && isNil { _this getVariable ""BIS_alarmOff"" }) then {" \n
                         "		sleep 10;" \n
                         "		""BIS_x_alarm"" call BIS_fnc_missionConversations;" \n
                         "	};" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Bravo and Charlie defend the Outpost" \n
                         "//****************************************" \n
                         "{" \n
                         "	//The group" \n
                         "	private ""_group"";" \n
                         "	_group = _x;" \n
                         "	" \n
                         "	private ""_waypoint"";" \n
                         "	_waypoint = _group addWaypoint [_positionOutpost, 0];" \n
                         "	_waypoint setWaypointType ""MOVE"";" \n
                         "	_waypoint setWaypointCombatMode ""GREEN"";" \n
                         "	_waypoint setWaypointBehaviour ""COMBAT"";" \n
                         "	_waypoint setWaypointSpeed ""NORMAL"";" \n
                         "	_waypoint setWaypointCompletionRadius 50;" \n
                         "	_waypoint setWaypointVisible false;" \n
                         "	_waypoint showWaypoint ""NEVER"";" \n
                         "	" \n
                         "	//Guard only, do not engage" \n
                         "	_group enableAttack false;" \n
                         "	" \n
                         "	//Do not allow fleeing" \n
                         "	_group allowFleeing 0;" \n
                         "	" \n
                         "	//Log" \n
                         "	[""Stage 1: Group (%1) is now guarding the Outpost"", _group] call BIS_fnc_logFormat;" \n
                         "	" \n
                         "} forEach [" \n
                         "	_groupBravo," \n
                         "	_groupCharlie" \n
                         "];" \n
                         "" \n
                         "//****************************************" \n
                         "//Bravo and Charlie populate the Outpost" \n
                         "//****************************************" \n
                         "//The bigger group Bravo vs Charlie will assign gunners for static weapons" \n
                         "private [""_groupBigger"", ""_groupSmaller""];" \n
                         "_groupBigger 	= if (count units _groupBravo > count units _groupCharlie) then { _groupBravo } else { _groupCharlie };" \n
                         "_groupSmaller	= if (_groupBigger == _groupBravo) then { _groupCharlie } else { _groupBravo };" \n
                         "" \n
                         "//****************************************" \n
                         "//Biggest team sends their man to static weapons" \n
                         "//****************************************" \n
                         "//Find Outpost static weapons" \n
                         "private ""_staticWeapons"";" \n
                         "_staticWeapons = _positionOutpost nearObjects [""I_HMG_01_high_F"", 100];" \n
                         "" \n
                         "//Resize" \n
                         "if (count _staticWeapons > count units _groupBigger) then {" \n
                         "	_staticWeapons resize count units _groupBigger;" \n
                         "};" \n
                         "" \n
                         "//Order units to board the static weapons" \n
                         "{" \n
                         "	//The weapon" \n
                         "	private ""_weapon"";" \n
                         "	_weapon = _x;" \n
                         "	" \n
                         "	//The unit" \n
                         "	private ""_unit"";" \n
                         "	_unit = units _groupBigger select _forEachIndex;" \n
                         "	" \n
                         "	//Unit is assigned as gunner" \n
                         "	_unit assignAsGunner _weapon;" \n
                         "	[_unit] orderGetIn true;" \n
                         "	[_unit] allowGetIn true;" \n
                         "	" \n
                         "	//Watch Frini" \n
                         "	_unit doWatch _positionFrini;" \n
                         "	" \n
                         "	//Log" \n
                         "	[""Stage 1: Unit (%1) from Group (%2) is now gunner at static Weapon (%3)"", _unit, _groupBigger, _weapon] call BIS_fnc_logFormat;" \n
                         "	" \n
                         "} forEach _staticWeapons;" \n
                         "" \n
                         "//****************************************" \n
                         "//Music" \n
                         "//****************************************" \n
                         "5 fadeMusic 0;" \n
                         "[] spawn { sleep 5; playMusic ""Track13_StageC_negative""; 5 fadeMusic 0.25; };" \n
                         "" \n
                         "//****************************************" \n
                         "//Delay" \n
                         "//****************************************" \n
                         "private ""_delay"";" \n
                         "_delay = time + 45;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 1: Teams reporting in at the Outpost"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "conversations_and">*/
                                class conversations_and
                                {
                                        itemno = 62;
                                        priority = 0.000000;
                                        to="delta_moves_to_o";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{ time > _delay }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "mortar_find_cove">*/
                class mortar_find_cove
                {
                        name = "mortar_find_cove";
                        itemno = 64;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversation" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	""BIS_mortarDetected"" call BIS_fnc_missionConversations;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Delay" \n
                         "//****************************************" \n
                         "private ""_delay"";" \n
                         "_delay = time + _timeDetectMortar;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "mortar_detected">*/
                                class mortar_detected
                                {
                                        itemno = 16;
                                        priority = 0.000000;
                                        to="eliminate_mortar";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "(" \n
                                         "	time > _delay" \n
                                         "	||" \n
                                         "	{ { _x knowsAbout _mortar > 0 } count units _groupAlpha > 0 }" \n
                                         ")" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "warning">*/
                class warning
                {
                        name = "warning";
                        itemno = 66;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	""BIS_x_friniLeaveWarning"" call BIS_fnc_missionConversations;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 2: Player receives warning about going to Outpost"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "too_late">*/
                                class too_late
                                {
                                        itemno = 69;
                                        priority = 1.000000;
                                        to="player_messed_up";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{ time > _timeoutFail }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "at_the_outpost">*/
                                class at_the_outpost
                                {
                                        itemno = 25;
                                        priority = 0.000000;
                                        to="wait_for_orders_1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{ player distance _positionOutpost < 100 }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "units_sitrep">*/
                class units_sitrep
                {
                        name = "units_sitrep";
                        itemno = 68;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	""BIS_outpostIsImpossible"" call BIS_fnc_missionConversations;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 2: Three quarters of the time defending the base has passed"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "supply_truck_des">*/
                                class supply_truck_des
                                {
                                        itemno = 38;
                                        priority = 1.000000;
                                        to="truck_immobilize";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{" \n
                                         "	!alive _vehicleTruck" \n
                                         "	||" \n
                                         "	{ !canMove _vehicleTruck }" \n
                                         "	||" \n
                                         "	{ !alive _unitDeltaLeader }" \n
                                         "}" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "supply_truck_pro">*/
                                class supply_truck_pro
                                {
                                        itemno = 23;
                                        priority = 0.000000;
                                        to="truck_protected";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{ time > _delayTotal }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "FAIL2">*/
                class FAIL2
                {
                        name = "FAIL2";
                        itemno = 70;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Tasks" \n
                         "//****************************************" \n
                         "[""BIS_truckProtect"", ""FAILED""] call BIS_fnc_missionTasks;" \n
                         "[""BIS_friniRetreat"", ""FAILED""] call BIS_fnc_missionTasks;" \n
                         "" \n
                         "//****************************************" \n
                         "//End mission" \n
                         "//****************************************" \n
                         "[[""B_hub02"", 4], false] call BIS_fnc_endMission;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 2: Mission failed"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "player_messed_up">*/
                class player_messed_up
                {
                        name = "player_messed_up";
                        itemno = 71;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	""BIS_x_friniLeaveFailed"" call BIS_fnc_missionConversations;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 2: Player did not reach the Outpost in time"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "conversations_fi">*/
                                class conversations_fi
                                {
                                        itemno = 72;
                                        priority = 0.000000;
                                        to="FAIL2";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "player_messed_up_1">*/
                class player_messed_up_1
                {
                        name = "player_messed_up_1";
                        itemno = 73;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	""BIS_x_mortarNeutralizeFailed"" call BIS_fnc_missionConversations;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 1: Player was not able to neutralize mortar in time"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "conversations_fi">*/
                                class conversations_fi
                                {
                                        itemno = 74;
                                        priority = 0.000000;
                                        to="FAIL_1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "careful_in_frini">*/
                class careful_in_frini
                {
                        name = "careful_in_frini";
                        itemno = 76;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	""BIS_friniReached"" call BIS_fnc_missionConversations;" \n
                         "	saveGame;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Instructor Figure" \n
                         "//****************************************" \n
                         "[""AddTopic"", [""i05_friniMortar"",""B_m01"", localize ""STR_A3_Campaign_B_m01_Instructor_MortarHunt""] ] call BIS_fnc_InstructorFigure;" \n
                         "" \n
                         "//****************************************" \n
                         "//Music" \n
                         "//****************************************" \n
                         "5 fadeMusic 0;" \n
                         "[] spawn { sleep 5; playMusic ""Track06_CarnHeli""; 5 fadeMusic 0.25; };" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 1: The player reached Frini and is looking for the mortar"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "mortar_eliminate">*/
                                class mortar_eliminate
                                {
                                        itemno = 18;
                                        priority = 1.000000;
                                        to="wait_for_orders";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{" \n
                                         "	!alive _mortar" \n
                                         "	||" \n
                                         "	{ { alive _x } count crew _mortar < 1 }" \n
                                         "}" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "engage">*/
                class engage
                {
                        name = "engage";
                        itemno = 79;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations & Tasks" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	//Tasks" \n
                         "	[""BIS_wait"", ""SUCCEEDED""] call BIS_fnc_missionTasks;" \n
                         "	""BIS_targets"" call BIS_fnc_missionTasks;" \n
                         "	" \n
                         "	//Conversations" \n
                         "	""BIS_engage"" call BIS_fnc_missionConversations;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Player group" \n
                         "//****************************************" \n
                         "//Enable AI" \n
                         "{" \n
                         "	if (_x != player) then {" \n
                         "		//Enable AI abilities" \n
                         "		_x enableAi ""FSM"";" \n
                         "		_x enableAi ""ANIM"";" \n
                         "		_x enableAi ""MOVE"";" \n
                         "		_x enableAi ""TARGET"";" \n
                         "		_x enableAi ""AUTOTARGET"";" \n
                         "		" \n
                         "		//Stop" \n
                         "		doStop _x;" \n
                         "		" \n
                         "		//Target" \n
                         "		private ""_target"";" \n
                         "		_target = if (_forEachIndex < (count units _groupAlpha - 1) / 2) then { (units _groupTowerGuards) select 0; } else { (units _groupTowerGuards) select 1; };" \n
                         "		" \n
                         "		//Ready to engage" \n
                         "		_x doWatch _target;" \n
                         "		_x doTarget _target;" \n
                         "	};" \n
                         "} forEach units _groupAlpha;" \n
                         "" \n
                         "//Reveal targets" \n
                         "{" \n
                         "	_groupAlpha reveal [_x, 4];" \n
                         "} forEach units _groupTowerGuards;" \n
                         "" \n
                         "//****************************************" \n
                         "//Instructor Figure" \n
                         "//****************************************" \n
                         "[""AddTopic"", [""i00_neutralizeTargets"",""B_m01"", localize ""STR_A3_Campaign_B_m01_Instructor_NeutralizeTargets""] ] call BIS_fnc_InstructorFigure;" \n
                         "" \n
                         "//****************************************" \n
                         "//Hints" \n
                         "//****************************************" \n
                         "[[""Command"", ""MarkTarget""], 15] spawn BIS_fnc_advHint;" \n
                         "" \n
                         "//****************************************" \n
                         "//Delay" \n
                         "//****************************************" \n
                         "private ""_delay"";" \n
                         "_delay = time + _timeNeutralizeGuards;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 0: Player is now engaging the tower guards"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "detected">*/
                                class detected
                                {
                                        itemno = 81;
                                        priority = 2.000000;
                                        to="horrible";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "(" \n
                                         "	{" \n
                                         "		private ""_guard"";" \n
                                         "		_guard = _x;" \n
                                         "		" \n
                                         "		{" \n
                                         "			_guard knowsAbout _x >= 1" \n
                                         "		} count units _groupAlpha > 0" \n
                                         "	 } count units _groupTowerGuards > 0" \n
                                         "	||" \n
                                         "	{ BIS_guardsFiredRounds >= _guardsMinFiredRounds }" \n
                                         ")" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "timeout">*/
                                class timeout
                                {
                                        itemno = 11;
                                        priority = 1.000000;
                                        to="disapointing";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{ time > _delay }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "neutralized">*/
                                class neutralized
                                {
                                        itemno = 10;
                                        priority = 0.000000;
                                        to="amazing";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{ { alive _x } count units _groupTowerGuards < 1 }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "horrible">*/
                class horrible
                {
                        name = "horrible";
                        itemno = 82;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations & Tasks" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	//Conversations" \n
                         "	""BIS_x_guardsDetected"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	//Tasks" \n
                         "	if (""BIS_targets"" call BIS_fnc_taskExists) then {" \n
                         "		[""BIS_targets"", ""FAILED""] call BIS_fnc_missionTasks;" \n
                         "	};" \n
                         "	if (""BIS_wait"" call BIS_fnc_taskExists) then {" \n
                         "		if (""BIS_wait"" call BIS_fnc_taskState != ""SUCCEEDED"") then {" \n
                         "			[""BIS_wait"", ""FAILED""] call BIS_fnc_missionTasks;" \n
                         "		};" \n
                         "	};" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Guards" \n
                         "//****************************************" \n
                         "{" \n
                         "	_x enableAi ""MOVE"";" \n
                         "	_x setUnitPos ""UP"";" \n
                         "	_x playMoveNow ""amovpercmstpsraswrfldnon"";" \n
                         "	doStop _x;" \n
                         "	" \n
                         "	//Target" \n
                         "	private ""_target"";" \n
                         "	_target = units _groupAlpha call BIS_fnc_selectRandom;" \n
                         "	" \n
                         "	//Reveal, target and fire" \n
                         "	_x reveal [_target, 4];" \n
                         "	_x doWatch _target;" \n
                         "	_x doTarget _target;" \n
                         "	_x doFire _target;" \n
                         "	_x forceWeaponFire [primaryWeapon _x, ""Manual""];" \n
                         "	" \n
                         "} forEach units _groupTowerGuards;" \n
                         "" \n
                         "//****************************************" \n
                         "//Flag" \n
                         "//****************************************" \n
                         "BIS_playerGroupDetected = true;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 0: Player team was detected"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "conversations_fi">*/
                                class conversations_fi
                                {
                                        itemno = 85;
                                        priority = 0.000000;
                                        to="remove_instructor";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "remove_instructor">*/
                class remove_instructor
                {
                        name = "remove_instructor";
                        itemno = 84;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Player group detected" \n
                         "//****************************************" \n
                         "if (!isNil { BIS_playerGroupDetected }) then {" \n
                         "	//Set off the alarm" \n
                         "	[_objectAlarmDevice, _objectAlarmLoudspeakers] spawn BIS_fnc_b_m01_alarm;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Instructor Figure" \n
                         "//****************************************" \n
                         "if ([""TopicExists"",[ ""i00_neutralizeTargets"" ] ] call BIS_fnc_InstructorFigure != -1) then {" \n
                         "	[""RemoveTopic"", [""i00_neutralizeTargets""] ] call BIS_fnc_InstructorFigure;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 0: Stage 0 completed"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "always">*/
                                class always
                                {
                                        itemno = 48;
                                        priority = 0.000000;
                                        to="stage_1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "failed_to_stay_u">*/
                class failed_to_stay_u
                {
                        name = "failed_to_stay_u";
                        itemno = 90;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Flag" \n
                         "//****************************************" \n
                         "BIS_playerGroupDetectedAtStart = true;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 0: Was detected prematurely"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "always">*/
                                class always
                                {
                                        itemno = 89;
                                        priority = 0.000000;
                                        to="horrible";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "warning_1">*/
                class warning_1
                {
                        name = "warning_1";
                        itemno = 92;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	""BIS_x_getIntoOutpost"" call BIS_fnc_missionConversations;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 1: Get into the Outpost warning"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "conversations_fi">*/
                                class conversations_fi
                                {
                                        itemno = 93;
                                        priority = 1.000000;
                                        to="player_messed_up_2";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         "&&" \n
                                         "{ time > _timeoutGetInOutpost }" \n
                                         "&&" \n
                                         "{ player distance _positionOutpost > 100 }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "outpost_secure">*/
                                class outpost_secure
                                {
                                        itemno = 13;
                                        priority = 0.000000;
                                        to="report_from_team";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"private ""_allUnits"";" \n
                                         "_allUnits = allUnits;" \n
                                         "" \n
                                         "{" \n
                                         "	side _x != WEST" \n
                                         "	&&" \n
                                         "	{ _x distance _positionOutpost < 65 }" \n
                                         "} count _allUnits < 1" \n
                                         "&&" \n
                                         "{" \n
                                         "	{" \n
                                         "		_x distance _positionOutpost < 65" \n
                                         "	} count (units _groupAlpha + units _groupBravo + units _groupCharlie) > 1" \n
                                         "}" \n
                                         "&&" \n
                                         "{ player distance _positionOutpost <= 100 }" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "FAIL_3">*/
                class FAIL_3
                {
                        name = "FAIL_3";
                        itemno = 94;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Tasks" \n
                         "//****************************************" \n
                         "[""BIS_outpostAttack"", ""FAILED""] call BIS_fnc_missionTasks;" \n
                         "" \n
                         "//****************************************" \n
                         "//End mission" \n
                         "//****************************************" \n
                         "[[""B_hub02"", 5], false] call BIS_fnc_endMission;" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 1: Mission failed"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "player_messed_up_2">*/
                class player_messed_up_2
                {
                        name = "player_messed_up_2";
                        itemno = 95;
                        init = /*%FSM<STATEINIT""">*/"//****************************************" \n
                         "//Conversations" \n
                         "//****************************************" \n
                         "private ""_conversations"";" \n
                         "_conversations = [] spawn {" \n
                         "	""BIS_x_getIntoOutpostFailed"" call BIS_fnc_missionConversations;" \n
                         "};" \n
                         "" \n
                         "//****************************************" \n
                         "//Log" \n
                         "//****************************************" \n
                         """Stage 1: Player did not attack the Outpost like he was ordered to"" call BIS_fnc_log;" \n
                         ""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "conversations_fi">*/
                                class conversations_fi
                                {
                                        itemno = 96;
                                        priority = 0.000000;
                                        to="FAIL_3";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _conversations" \n
                                         ""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
        };
        initState="init";
        finalStates[] =
        {
                "WIN1",
                "FAIL_1",
                "WIN2",
                "FAIL2",
                "FAIL_3",
        };
};
/*%FSM</COMPILE>*/