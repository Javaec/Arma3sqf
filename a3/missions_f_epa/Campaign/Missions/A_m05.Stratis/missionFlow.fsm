/*%FSM<COMPILE "C:\Bis\fsmeditor\scriptedFSM.cfg, Mission Flow">*/
/*%FSM<HEAD>*/
/*
item0[] = {"Start",0,250,-75.000000,-125.000000,25.000000,-75.000000,0.000000,"Start"};
item1[] = {"Surfaced",4,218,-75.000000,-50.000000,25.000000,0.000000,0.000000,"Surfaced"};
item2[] = {"Enemies_spotted",2,250,-75.000000,25.000000,25.000000,75.000000,0.000000,"Enemies spotted"};
item3[] = {"",7,210,46.000000,-104.000000,54.000000,-96.000000,0.000000,""};
item4[] = {"Court_martialed",4,218,75.000000,-125.000000,175.000000,-75.000000,0.000000,"Court-martialed"};
item5[] = {"Terminate",1,250,200.000000,-125.000000,300.000000,-75.000000,0.000000,"Terminate"};
item6[] = {"",7,210,46.000000,46.000004,54.000000,53.999996,0.000000,""};
item7[] = {"On_shore",4,218,-75.000000,100.000000,25.000000,150.000000,0.000000,"On shore"};
item8[] = {"Open_up",2,250,-75.000000,175.000000,25.000000,225.000000,0.000000,"Open up"};
item9[] = {"",7,210,46.000000,196.000000,54.000004,204.000000,0.000000,""};
item10[] = {"Guards_dead",4,218,-75.000000,250.000000,25.000000,300.000000,0.000000,"Guards dead"};
item11[] = {"Report_in",2,250,-75.000000,325.000000,25.000000,375.000000,0.000000,"Report in"};
item12[] = {"",7,210,-179.000000,-104.000000,-171.000000,-96.000000,0.000000,""};
item13[] = {"Spotted_by_beach",4,218,-225.000000,-50.000000,-125.000000,0.000000,0.000000,"Spotted by" \n "beach"};
item14[] = {"",7,210,-104.000000,-104.000000,-96.000000,-96.000000,0.000000,""};
item15[] = {"",7,210,-104.000000,46.000000,-96.000000,54.000000,0.000000,""};
item16[] = {"",7,210,46.000000,346.000000,54.000000,354.000000,0.000000,""};
item17[] = {"In_position",4,218,-75.000000,400.000000,25.000000,450.000000,0.000000,"In position"};
item18[] = {"Set_up",2,250,-75.000000,475.000000,25.000000,525.000000,0.000000,"Set up"};
item19[] = {"",7,210,46.000004,496.000000,54.000000,504.000000,0.000000,""};
item20[] = {"Town_clear",4,218,-75.000000,850.000000,25.000000,900.000000,0.000000,"Town clear"};
item21[] = {"Identify_the_bod",2,250,-75.000000,925.000000,25.000000,975.000000,0.000000,"Identify the body"};
item22[] = {"",7,210,45.999996,946.000000,54.000004,954.000000,0.000000,""};
item23[] = {"Body_found",4,218,-75.000000,1150.000000,25.000000,1200.000000,0.000000,"Body found"};
item24[] = {"Not_the_target",2,250,-75.000000,1225.000000,25.000000,1275.000000,0.000000,"Not the target"};
item25[] = {"",7,210,45.999989,1246.000000,54.000011,1254.000000,0.000000,""};
item26[] = {"Retreat_ordered",4,218,-75.000000,1300.000000,25.000000,1350.000000,0.000000,"Retreat ordered"};
item27[] = {"_",2,250,-75.000000,1375.000000,25.000000,1425.000000,0.000000,""};
item28[] = {"Player_there",4,218,-75.000000,550.000000,25.000000,600.000000,0.000000,"Player there"};
item29[] = {"Prepare",2,250,-75.000000,625.000000,25.000000,675.000000,0.000000,"Prepare"};
item30[] = {"",7,210,46.000000,646.000000,54.000000,654.000000,0.000000,""};
item31[] = {"Searching",4,218,-75.000000,1000.000000,25.000000,1050.000000,0.000000,"Searching"};
item32[] = {"__1",2,250,-75.000000,1075.000000,25.000000,1125.000000,0.000000,""};
item33[] = {"",7,210,45.999992,1096.000000,54.000008,1104.000000,0.000000,""};
item34[] = {"Reinforcements_s",4,218,-200.000000,1075.000000,-100.000000,1125.000000,0.000000,"Reinforcements" \n "spotted"};
item35[] = {"Hurry_up",2,250,-200.000000,1000.000000,-100.000000,1050.000000,0.000000,"Hurry up"};
item36[] = {"",7,210,-29.000002,1446.000000,-21.000000,1454.000000,0.000000,""};
item37[] = {"Truck_alive",4,218,-75.000000,1475.000000,25.000000,1525.000000,0.000000,"Truck alive"};
item38[] = {"",7,210,-154.000000,1446.000000,-145.999985,1454.000000,0.000000,""};
item39[] = {"Truck_destroyed",4,218,-200.000000,1475.000000,-100.000000,1525.000000,0.000000,"Truck" \n "destroyed"};
item40[] = {"",7,210,45.999992,1396.000000,54.000008,1404.000000,0.000000,""};
item41[] = {"Success__2",1,250,-200.000000,1550.000000,-100.000000,1600.000000,0.000000,"Success #2"};
item42[] = {"Board_truck",2,250,-75.000000,1550.000000,25.000000,1600.000000,0.000000,"Board truck"};
item43[] = {"",7,210,-29.000006,1621.000000,-20.999996,1629.000000,0.000000,""};
item44[] = {"",7,210,-29.000008,1646.000000,-20.999994,1654.000000,0.000000,""};
item45[] = {"Player_in",4,218,-325.000000,1675.000000,-225.000000,1725.000000,1.000000,"Player in"};
item46[] = {"Lock_truck",2,250,-325.000000,1750.000000,-225.000000,1800.000000,0.000000,"Lock truck"};
item47[] = {"Driver_in",4,218,-200.000000,1675.000000,-100.000000,1725.000000,0.000000,"Driver in"};
item48[] = {"",7,210,-279.000031,1821.000000,-271.000000,1829.000000,0.000000,""};
item49[] = {"",7,210,-354.000031,1821.000000,-345.999969,1829.000000,0.000000,""};
item50[] = {"Retreated",4,218,-75.000000,1825.000000,25.000000,1875.000000,0.000000,"Retreated"};
item51[] = {"",7,210,-354.000031,1621.000000,-345.999969,1629.000000,0.000000,""};
item52[] = {"",7,210,-279.000031,1646.000000,-271.000000,1654.000000,0.000000,""};
item53[] = {"Success__1",1,250,-75.000000,1900.000000,25.000000,1950.000000,0.000000,"Success #1"};
item54[] = {"Unlock_truck",2,250,-200.000000,1750.000000,-100.000000,1800.000000,0.000000,"Unlock truck"};
item55[] = {"",7,210,-154.000031,1646.000000,-145.999954,1654.000000,0.000000,""};
item56[] = {"",7,210,-154.000031,1821.000000,-145.999954,1829.000000,0.000000,""};
item57[] = {"All_in",4,218,-75.000000,1675.000000,25.000000,1725.000000,0.000000,"All in"};
item58[] = {"Exfil",2,250,-75.000000,1750.000000,25.000000,1800.000000,0.000000,"Exfil"};
item59[] = {"",7,210,-179.000000,196.000000,-171.000000,204.000000,0.000000,""};
item60[] = {"",7,210,-254.000000,-104.000000,-246.000000,-96.000000,0.000000,""};
item61[] = {"",7,210,-329.000000,-104.000000,-321.000000,-96.000000,0.000000,""};
item62[] = {"Spotted_by_town",4,218,-375.000000,-50.000000,-275.000000,0.000000,0.000000,"Spotted by" \n "town"};
item63[] = {"",7,210,-253.999985,196.000000,-246.000015,204.000000,0.000000,""};
item64[] = {"",7,210,-254.000000,346.000000,-246.000000,354.000000,0.000000,""};
item65[] = {"",7,210,-254.000000,496.000000,-246.000000,504.000000,0.000000,""};
item66[] = {"Prepared",4,218,-75.000000,700.000000,25.000000,750.000000,0.000000,"Prepared"};
item67[] = {"Attack",2,250,-75.000000,775.000000,25.000000,825.000000,0.000000,"Attack"};
item68[] = {"",7,210,46.000000,796.000000,54.000000,804.000000,0.000000,""};
item69[] = {"",7,210,-253.999985,646.000000,-246.000000,654.000000,0.000000,""};
item70[] = {"Attack_premature",2,250,-375.000000,25.000000,-275.000000,75.000000,0.000000,"Attack prematurely"};
item71[] = {"",7,210,-329.000000,420.999969,-321.000000,429.000000,0.000000,""};
link0[] = {0,1};
link1[] = {0,3};
link2[] = {0,14};
link3[] = {1,2};
link4[] = {2,6};
link5[] = {2,7};
link6[] = {2,15};
link7[] = {3,4};
link8[] = {4,5};
link9[] = {6,3};
link10[] = {7,8};
link11[] = {8,9};
link12[] = {8,10};
link13[] = {8,63};
link14[] = {9,6};
link15[] = {10,11};
link16[] = {11,16};
link17[] = {11,17};
link18[] = {11,64};
link19[] = {12,13};
link20[] = {12,60};
link21[] = {13,59};
link22[] = {14,12};
link23[] = {15,14};
link24[] = {16,9};
link25[] = {17,18};
link26[] = {18,19};
link27[] = {18,28};
link28[] = {18,65};
link29[] = {19,16};
link30[] = {20,21};
link31[] = {21,22};
link32[] = {21,31};
link33[] = {22,68};
link34[] = {23,24};
link35[] = {24,25};
link36[] = {24,26};
link37[] = {25,33};
link38[] = {26,27};
link39[] = {27,36};
link40[] = {27,40};
link41[] = {28,29};
link42[] = {29,30};
link43[] = {29,66};
link44[] = {29,69};
link45[] = {30,19};
link46[] = {31,32};
link47[] = {32,23};
link48[] = {32,33};
link49[] = {32,34};
link50[] = {33,22};
link51[] = {34,35};
link52[] = {35,31};
link53[] = {36,37};
link54[] = {36,38};
link55[] = {37,42};
link56[] = {38,39};
link57[] = {39,41};
link58[] = {40,25};
link59[] = {42,43};
link60[] = {43,44};
link61[] = {44,55};
link62[] = {44,57};
link63[] = {45,46};
link64[] = {46,48};
link65[] = {47,54};
link66[] = {48,49};
link67[] = {49,51};
link68[] = {50,53};
link69[] = {51,43};
link70[] = {52,45};
link71[] = {54,56};
link72[] = {55,47};
link73[] = {55,52};
link74[] = {56,48};
link75[] = {57,58};
link76[] = {58,50};
link77[] = {59,8};
link78[] = {60,61};
link79[] = {61,62};
link80[] = {62,70};
link81[] = {63,60};
link82[] = {64,63};
link83[] = {65,64};
link84[] = {66,67};
link85[] = {67,20};
link86[] = {67,68};
link87[] = {68,30};
link88[] = {69,65};
link89[] = {70,71};
link90[] = {71,17};
globals[] = {25.000000,1,0,0,0,640,480,1,208,6316128,1,-513.165161,520.778809,2056.111572,1079.432373,975,1071,1};
window[] = {2,-1,-1,-1,-1,792,25,1239,25,3,993};
*//*%FSM</HEAD>*/
class FSM
{
        fsmName = "Mission Flow";
        class States
        {
                /*%FSM<STATE "Start">*/
                class Start
                {
                        name = "Start";
                        itemno = 0;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Terminate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Spotted_by_beach">*/
                                class Spotted_by_beach
                                {
                                        itemno = 13;
                                        priority = 0.000000;
                                        to="Open_up";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{behaviour _x == ""COMBAT""} count units BIS_IA_group1 > 0"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Spotted_by_town">*/
                                class Spotted_by_town
                                {
                                        itemno = 62;
                                        priority = 0.000000;
                                        to="Attack_premature";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{behaviour _x == ""COMBAT""} count BIS_town_defenders > 0" \n
                                         "&&" \n
                                         "isNil ""BIS_premature"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Surfaced">*/
                                class Surfaced
                                {
                                        itemno = 1;
                                        priority = 0.000000;
                                        to="Enemies_spotted";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(underwater BIS_BLU1)" \n
                                         "&&" \n
                                         "!(isNil ""BIS_toBeach"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Enemies_spotted">*/
                class Enemies_spotted
                {
                        name = "Enemies_spotted";
                        itemno = 2;
                        init = /*%FSM<STATEINIT""">*/"[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: enemies spotted"";" \n
                         "	" \n
                         "	sleep 1;" \n
                         "		" \n
                         "	""BIS_enemiesSpotted"" call BIS_fnc_missionConversations;" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Terminate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Spotted_by_beach">*/
                                class Spotted_by_beach
                                {
                                        itemno = 13;
                                        priority = 0.000000;
                                        to="Open_up";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{behaviour _x == ""COMBAT""} count units BIS_IA_group1 > 0"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Spotted_by_town">*/
                                class Spotted_by_town
                                {
                                        itemno = 62;
                                        priority = 0.000000;
                                        to="Attack_premature";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{behaviour _x == ""COMBAT""} count BIS_town_defenders > 0" \n
                                         "&&" \n
                                         "isNil ""BIS_premature"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "On_shore">*/
                                class On_shore
                                {
                                        itemno = 7;
                                        priority = 0.000000;
                                        to="Open_up";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(surfaceIsWater position BIS_BLU1)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Terminate">*/
                class Terminate
                {
                        name = "Terminate";
                        itemno = 5;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Open_up">*/
                class Open_up
                {
                        name = "Open_up";
                        itemno = 8;
                        init = /*%FSM<STATEINIT""">*/"// Register they're on shore" \n
                         "BIS_onShore = true;" \n
                         "" \n
                         "{_x setCombatMode ""YELLOW""} forEach units group BIS_inf;" \n
                         "" \n
                         "// Take beach guards off captive" \n
                         "{_x setCaptive false} forEach units BIS_IA_group1;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Terminate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Spotted_by_town">*/
                                class Spotted_by_town
                                {
                                        itemno = 62;
                                        priority = 0.000000;
                                        to="Attack_premature";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{behaviour _x == ""COMBAT""} count BIS_town_defenders > 0" \n
                                         "&&" \n
                                         "isNil ""BIS_premature"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Guards_dead">*/
                                class Guards_dead
                                {
                                        itemno = 10;
                                        priority = 0.000000;
                                        to="Report_in";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{alive _x} count units BIS_IA_group1 == 0"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Report_in">*/
                class Report_in
                {
                        name = "Report_in";
                        itemno = 11;
                        init = /*%FSM<STATEINIT""">*/"[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: report in"";" \n
                         "	" \n
                         "	sleep (5 + random 5);" \n
                         "	" \n
                         "	0 fadeMusic 0.2;" \n
                         "	playMusic ""EventTrack01_F_EPA"";" \n
                         "	" \n
                         "	// Move into position" \n
                         "	BIS_toPosition = true;" \n
                         "	" \n
                         "	// Stop player from firing unpenalized" \n
                         "	BIS_canShoot = nil; " \n
                         "	" \n
                         "	{_x call BIS_fnc_missionTasks} forEach [""BIS_insert"", ""BIS_position""];" \n
                         "	" \n
                         "	{" \n
                         "		private [""_unit""];" \n
                         "		_unit = _x;" \n
                         "		" \n
                         "		// Put them back on captive" \n
                         "		_unit setCaptive true;" \n
                         "		" \n
                         "		if (_unit != BIS_inf) then {" \n
                         "			private [""_killedEH""];" \n
                         "			_killedEH = _unit addEventHandler [""Killed"", {_this call BIS_killedEH}];" \n
                         "			_unit setVariable [""BIS_killedEH"", _killedEH];" \n
                         "		};" \n
                         "		" \n
                         "		// Stop from shooting" \n
                         "		_unit setCombatMode ""BLUE"";" \n
                         "	} forEach units group BIS_inf;" \n
                         "	" \n
                         "	sleep 1;" \n
                         "	" \n
                         "	""BIS_guardsDead"" call BIS_fnc_missionConversations;" \n
                         "	""BIS_reportIn"" call BIS_fnc_missionConversations;" \n
                         "	""BIS_move"" call BIS_fnc_missionConversations;" \n
                         "	""BIS_bravo"" call BIS_fnc_missionConversations;" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Terminate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Spotted_by_town">*/
                                class Spotted_by_town
                                {
                                        itemno = 62;
                                        priority = 0.000000;
                                        to="Attack_premature";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{behaviour _x == ""COMBAT""} count BIS_town_defenders > 0" \n
                                         "&&" \n
                                         "isNil ""BIS_premature"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "In_position">*/
                                class In_position
                                {
                                        itemno = 17;
                                        priority = 0.000000;
                                        to="Set_up";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{!(isNil _x)} count [""BIS_inPosition"", ""BIS_premature""] > 0"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Set_up">*/
                class Set_up
                {
                        name = "Set_up";
                        itemno = 18;
                        init = /*%FSM<STATEINIT""">*/"// Make player's team crouch" \n
                         "{_x setUnitPos ""MIDDLE""} forEach units group BIS_inf;" \n
                         "" \n
                         "private [""_diverMove""];" \n
                         "_diverMove = {" \n
                         "	private [""_unit"", ""_move"", ""_target""];" \n
                         "	_unit = _this select 0;" \n
                         "	_move = _this select 1;" \n
                         "	_target = _this select 2;" \n
                         "	" \n
                         "	scriptName format [""missionFlow.fsm: _diverMove - [%1,%2,%3]"", _unit, _move, _target];" \n
                         "	" \n
                         "	// Move into position" \n
                         "	_unit doMove markerPos _move;" \n
                         "	" \n
                         "	if (_unit == BIS_BLU1) then {" \n
                         "		waitUntil {!(unitReady _unit)};" \n
                         "		waitUntil {unitReady _unit};" \n
                         "	} else {" \n
                         "		waitUntil {!(unitReady _unit) || !(isNil ""BIS_premature"")};" \n
                         "		waitUntil {unitReady _unit || !(isNil ""BIS_premature"")};" \n
                         "	};" \n
                         "	" \n
                         "	// Watch the assigned targets" \n
                         "	if (alive _unit) then {" \n
                         "		if (_unit == BIS_BLU1) then {" \n
                         "			_unit doWatch markerPos _target;" \n
                         "		} else {" \n
                         "			if (isNil ""BIS_premature"") then {" \n
                         "				_unit doWatch markerPos _target;" \n
                         "			};" \n
                         "		};" \n
                         "	};" \n
                         "};" \n
                         "" \n
                         "// Move AI into position" \n
                         "{" \n
                         "	private [""_group""];" \n
                         "	_group = createGroup WEST;" \n
                         "	[_x] joinSilent _group;" \n
                         "	" \n
                         "	_x allowFleeing 0;" \n
                         "	_x setBehaviour ""AWARE"";" \n
                         "	_x setCombatMode ""BLUE"";" \n
                         "	" \n
                         "	if (_x == BIS_leader) then {" \n
                         "		_group setGroupID [localize ""STR_A3_Group_Swordfish1""];" \n
                         "	};" \n
                         "	" \n
                         "	private [""_assign""];" \n
                         "	_assign = _forEachIndex + 1;" \n
                         "	" \n
                         "	[" \n
                         "		_x," \n
                         "		format [""BIS_move%1"", _assign]," \n
                         "		format [""BIS_target%1"", _assign]" \n
                         "	] spawn _diverMove;" \n
                         "} forEach (units group BIS_inf - [BIS_inf]);" \n
                         "" \n
                         "// Set player's group ID" \n
                         "BIS_inf setGroupID [localize ""STR_A3_Group_Swordfish2""];"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Terminate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Spotted_by_town">*/
                                class Spotted_by_town
                                {
                                        itemno = 62;
                                        priority = 0.000000;
                                        to="Attack_premature";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{behaviour _x == ""COMBAT""} count BIS_town_defenders > 0" \n
                                         "&&" \n
                                         "isNil ""BIS_premature"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Player_there">*/
                                class Player_there
                                {
                                        itemno = 28;
                                        priority = 0.000000;
                                        to="Prepare";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"BIS_inf in list BIS_positionTrig" \n
                                         "||" \n
                                         "!(isNil ""BIS_premature"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Identify_the_bod">*/
                class Identify_the_bod
                {
                        name = "Identify_the_bod";
                        itemno = 21;
                        init = /*%FSM<STATEINIT""">*/"[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: identify the body"";" \n
                         "	" \n
                         "	sleep (5 + random 10);" \n
                         "	" \n
                         "	""BIS_town"" call BIS_fnc_missionTasks;" \n
                         "	""BIS_townClear"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	""BIS_identify"" call BIS_fnc_missionTasks;" \n
                         "	" \n
                         "	// Start search" \n
                         "	BIS_identify = true;" \n
                         "	" \n
                         "	// Unhide reinforcements" \n
                         "	{" \n
                         "		private [""_unit""];" \n
                         "		_unit = _x;" \n
                         "		" \n
                         "		_unit hideObject false;" \n
                         "		_unit enableSimulation true;" \n
                         "		_unit allowDamage true;" \n
                         "		_unit setCaptive false;" \n
                         "		" \n
                         "		{_unit enableAI _x} forEach [""ANIM"", ""AUTOTARGET"", ""FSM"", ""MOVE"", ""TARGET""];" \n
                         "	} forEach units BIS_IA_group2;" \n
                         "	" \n
                         "	// Reveal officer to player" \n
                         "	BIS_inf reveal BIS_target;" \n
                         "	" \n
                         "	""BIS_identify"" call BIS_fnc_missionConversations;" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Terminate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Searching">*/
                                class Searching
                                {
                                        itemno = 31;
                                        priority = 0.000000;
                                        to="__1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_identify"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Not_the_target">*/
                class Not_the_target
                {
                        name = "Not_the_target";
                        itemno = 24;
                        init = /*%FSM<STATEINIT""">*/"0 fadeMusic 0.15;" \n
                         "playMusic ""LeadTrack02_F_EPA"";" \n
                         "" \n
                         """BIS_identify"" call BIS_fnc_missionTasks;" \n
                         "" \n
                         "[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: not the target"";" \n
                         "	" \n
                         "	""BIS_identified"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	// Make the leader go back to the SDV" \n
                         "	group BIS_leader addVehicle BIS_BLU_SDV1;" \n
                         "	BIS_leader assignAsDriver BIS_BLU_SDV1;" \n
                         "	[BIS_leader] orderGetIn true;" \n
                         "	" \n
                         "	BIS_leader setUnitPos ""AUTO"";" \n
                         "	" \n
                         "	""BIS_retreat"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	// Signal the retreat" \n
                         "	BIS_retreat = true;" \n
                         "	" \n
                         "	30 fadeMusic 0.4;" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Terminate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Retreat_ordered">*/
                                class Retreat_ordered
                                {
                                        itemno = 26;
                                        priority = 0.000000;
                                        to="_";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_retreat"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "_">*/
                class _
                {
                        name = "_";
                        itemno = 27;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Truck_destroyed">*/
                                class Truck_destroyed
                                {
                                        itemno = 39;
                                        priority = 0.000000;
                                        to="Success__2";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(canMove BIS_IA_truck1)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Terminate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Truck_alive">*/
                                class Truck_alive
                                {
                                        itemno = 37;
                                        priority = 0.000000;
                                        to="Board_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"canMove BIS_IA_truck1"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Prepare">*/
                class Prepare
                {
                        name = "Prepare";
                        itemno = 29;
                        init = /*%FSM<STATEINIT""">*/"if (isNil ""BIS_premature"") then {" \n
                         "	""BIS_position"" call BIS_fnc_missionTasks;" \n
                         "	" \n
                         "	[] spawn {" \n
                         "		scriptName ""missionFlow.fsm: prepare"";" \n
                         "		" \n
                         "		""BIS_ready"" call BIS_fnc_missionConversations;" \n
                         "		" \n
                         "		sleep 1;" \n
                         "		" \n
                         "		saveGame;" \n
                         "		" \n
                         "		sleep 1;" \n
                         "		" \n
                         "		// Register preparation" \n
                         "		BIS_prepared = true;" \n
                         "	};" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Terminate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Spotted_by_town">*/
                                class Spotted_by_town
                                {
                                        itemno = 62;
                                        priority = 0.000000;
                                        to="Attack_premature";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{behaviour _x == ""COMBAT""} count BIS_town_defenders > 0" \n
                                         "&&" \n
                                         "isNil ""BIS_premature"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Prepared">*/
                                class Prepared
                                {
                                        itemno = 66;
                                        priority = 0.000000;
                                        to="Attack";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{!(isNil _x)} count [""BIS_prepared"", ""BIS_premature""] > 0"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "__1">*/
                class __1
                {
                        name = "__1";
                        itemno = 32;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Reinforcements_s">*/
                                class Reinforcements_s
                                {
                                        itemno = 34;
                                        priority = 0.000000;
                                        to="Hurry_up";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(" \n
                                         "	{leader BIS_inf knowsAbout _x >= 1.5} count units BIS_IA_group2 > 0" \n
                                         "	||" \n
                                         "	{BIS_leader knowsAbout _x >= 1.5} count units BIS_IA_group2 > 0" \n
                                         ")" \n
                                         "&&" \n
                                         "isNil ""_reinfSpotted"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Terminate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Body_found">*/
                                class Body_found
                                {
                                        itemno = 23;
                                        priority = 0.000000;
                                        to="Not_the_target";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"BIS_inf distance BIS_target <= 5" \n
                                         "&&" \n
                                         "cursorTarget == BIS_target"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Hurry_up">*/
                class Hurry_up
                {
                        name = "Hurry_up";
                        itemno = 35;
                        init = /*%FSM<STATEINIT""">*/"private [""_reinfSpotted""];" \n
                         "_reinfSpotted = ""BIS_reinf"" spawn BIS_fnc_missionConversations;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Searching">*/
                                class Searching
                                {
                                        itemno = 31;
                                        priority = 0.000000;
                                        to="__1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_identify"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Success__2">*/
                class Success__2
                {
                        name = "Success__2";
                        itemno = 41;
                        init = /*%FSM<STATEINIT""">*/"// Make them go on foot" \n
                         "BIS_noTruck = true;" \n
                         "" \n
                         "[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: success #2"";" \n
                         "	" \n
                         "	""BIS_noTruck"" call BIS_fnc_missionConversations;" \n
                         "	""BIS_understood"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	sleep 1;" \n
                         "	" \n
                         "	[[""A_hub01"", 1], true, true, false] call BIS_fnc_endMission;" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Board_truck">*/
                class Board_truck
                {
                        name = "Board_truck";
                        itemno = 42;
                        init = /*%FSM<STATEINIT""">*/"[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: board truck"";" \n
                         "	" \n
                         "	""BIS_truck"" call BIS_fnc_missionConversations;" \n
                         "	""BIS_understood"" call BIS_fnc_missionConversations;" \n
                         "};" \n
                         "" \n
                         """BIS_truck"" call BIS_fnc_missionTasks;" \n
                         "" \n
                         "// Determine surviving units" \n
                         "private [""_units""];" \n
                         "_units = (units group BIS_inf + units BIS_BLU_group1 - [BIS_inf]);" \n
                         "{if (!(alive _x)) then {_units = _units - [_x]}} forEach _units;" \n
                         "" \n
                         "BIS_IA_truck1 setDamage 0;" \n
                         "" \n
                         "// Never make player the driver" \n
                         "BIS_inf assignAsCargoIndex [BIS_IA_truck1, 13];" \n
                         "" \n
                         "private [""_seats""];" \n
                         "_seats = [0,1,2,3,4,5,6,7,8,9,10,11,12,14,15];" \n
                         "" \n
                         "{" \n
                         "	if (isNull (assignedDriver BIS_IA_truck1)) then {" \n
                         "		// Assign as driver" \n
                         "		_x assignAsDriver BIS_IA_truck1;" \n
                         "	} else {" \n
                         "		private [""_seat""];" \n
                         "		_seat = _seats call BIS_fnc_selectRandom;" \n
                         "		_seats = _seats - [_seat];" \n
                         "		" \n
                         "		// Assign as cargo" \n
                         "		_x assignAsCargoIndex [BIS_IA_truck1, _seat];" \n
                         "	};" \n
                         "} forEach _units;" \n
                         "" \n
                         "// Order them to get in" \n
                         "(_units + [BIS_inf]) orderGetIn true;" \n
                         "" \n
                         "// Unlock the truck if the player can't mess with it" \n
                         "if ({alive _x} count (units group BIS_inf - [BIS_inf]) > 0) then {" \n
                         "	BIS_IA_truck1 setVehicleLock ""DEFAULT"";" \n
                         "};" \n
                         "" \n
                         "private [""_truckTimeout""];" \n
                         "_truckTimeout = time + 60;" \n
                         "" \n
                         "// Prevent the player destroying the truck" \n
                         "[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: truck alive control"";" \n
                         "	" \n
                         "	waitUntil {!(canMove BIS_IA_truck1) || !(isNil ""BIS_courtMartial"")};" \n
                         "	" \n
                         "	if (isNil ""BIS_courtMartial"") then {" \n
                         "		// Ensure player is court-martialed" \n
                         "		BIS_courtMartial = true;" \n
                         "		" \n
                         "		// Fail tasks" \n
                         "		{if (_x call BIS_fnc_taskExists) then {_x call BIS_fnc_missionTasks}} forEach [""BIS_insert"", ""BIS_position"", ""BIS_town"", ""BIS_identify"", ""BIS_extract""];" \n
                         "		" \n
                         "		[[missionName, 1], false] call BIS_fnc_endMission;" \n
                         "	};" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Player_in">*/
                                class Player_in
                                {
                                        itemno = 45;
                                        priority = 1.000000;
                                        to="Lock_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"BIS_inf in BIS_IA_truck1" \n
                                         "&&" \n
                                         "isNil ""_playerIn"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Driver_in">*/
                                class Driver_in
                                {
                                        itemno = 47;
                                        priority = 0.000000;
                                        to="Unlock_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNull driver BIS_IA_truck1)" \n
                                         "&&" \n
                                         "isNil ""_playerIn"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "All_in">*/
                                class All_in
                                {
                                        itemno = 57;
                                        priority = 0.000000;
                                        to="Exfil";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{_x in BIS_IA_truck1} count (units group BIS_inf + units BIS_BLU_group1) == {alive _x} count (units group BIS_inf + units BIS_BLU_group1)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Lock_truck">*/
                class Lock_truck
                {
                        name = "Lock_truck";
                        itemno = 46;
                        init = /*%FSM<STATEINIT""">*/"private [""_playerIn""];" \n
                         "_playerIn = true;" \n
                         "" \n
                         """BIS_truck"" call BIS_fnc_missionTasks;" \n
                         "" \n
                         "// Lock truck" \n
                         "BIS_IA_truck1 lock true;" \n
                         "" \n
                         "[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: lock truck"";" \n
                         "	" \n
                         "	sleep 30;" \n
                         "	" \n
                         "	// Force remaining AI into the truck" \n
                         "	{" \n
                         "		if (alive _x && !(_x in BIS_IA_truck1) && vehicle _x distance BIS_IA_truck1 >= 15) then {" \n
                         "			if (assignedDriver BIS_IA_truck1 == _x) then {" \n
                         "				// Move driver" \n
                         "				_x moveInDriver BIS_IA_truck1;" \n
                         "			} else {" \n
                         "				// Move cargo" \n
                         "				_x moveInCargo BIS_IA_truck1;" \n
                         "			};" \n
                         "		};" \n
                         "	} forEach (units group BIS_inf + units BIS_BLU_group1 - [BIS_inf]);" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Player_in">*/
                                class Player_in
                                {
                                        itemno = 45;
                                        priority = 1.000000;
                                        to="Lock_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"BIS_inf in BIS_IA_truck1" \n
                                         "&&" \n
                                         "isNil ""_playerIn"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Driver_in">*/
                                class Driver_in
                                {
                                        itemno = 47;
                                        priority = 0.000000;
                                        to="Unlock_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNull driver BIS_IA_truck1)" \n
                                         "&&" \n
                                         "isNil ""_playerIn"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "All_in">*/
                                class All_in
                                {
                                        itemno = 57;
                                        priority = 0.000000;
                                        to="Exfil";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{_x in BIS_IA_truck1} count (units group BIS_inf + units BIS_BLU_group1) == {alive _x} count (units group BIS_inf + units BIS_BLU_group1)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Success__1">*/
                class Success__1
                {
                        name = "Success__1";
                        itemno = 53;
                        init = /*%FSM<STATEINIT""">*/"// Register that the player extracted" \n
                         "BIS_extracted = true;" \n
                         "if (""BIS_extract"" call BIS_fnc_taskExists) then {""BIS_extract"" call BIS_fnc_missionTasks};" \n
                         "" \n
                         "[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: success #1"";" \n
                         "	" \n
                         "	sleep 6;" \n
                         "	" \n
                         "	[[""A_hub01"", 1], true, true, false] call BIS_fnc_endMission;" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Unlock_truck">*/
                class Unlock_truck
                {
                        name = "Unlock_truck";
                        itemno = 54;
                        init = /*%FSM<STATEINIT""">*/"private [""_unlocked""];" \n
                         "_unlocked = true;" \n
                         "" \n
                         "// Unlock the truck" \n
                         "BIS_IA_truck1 setVehicleLock ""DEFAULT"";"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Player_in">*/
                                class Player_in
                                {
                                        itemno = 45;
                                        priority = 1.000000;
                                        to="Lock_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"BIS_inf in BIS_IA_truck1" \n
                                         "&&" \n
                                         "isNil ""_playerIn"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Driver_in">*/
                                class Driver_in
                                {
                                        itemno = 47;
                                        priority = 0.000000;
                                        to="Unlock_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNull driver BIS_IA_truck1)" \n
                                         "&&" \n
                                         "isNil ""_playerIn"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "All_in">*/
                                class All_in
                                {
                                        itemno = 57;
                                        priority = 0.000000;
                                        to="Exfil";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{_x in BIS_IA_truck1} count (units group BIS_inf + units BIS_BLU_group1) == {alive _x} count (units group BIS_inf + units BIS_BLU_group1)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Exfil">*/
                class Exfil
                {
                        name = "Exfil";
                        itemno = 58;
                        init = /*%FSM<STATEINIT""">*/"enableSentences false;" \n
                         "" \n
                         "// Signal that all are in" \n
                         "BIS_allIn = true;" \n
                         "10 fadeMusic 0.6;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Retreated">*/
                                class Retreated
                                {
                                        itemno = 50;
                                        priority = 0.000000;
                                        to="Success__1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"vehicle leader BIS_inf distance markerPos ""BIS_town"" > 200"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Attack">*/
                class Attack
                {
                        name = "Attack";
                        itemno = 67;
                        init = /*%FSM<STATEINIT""">*/"[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: attack"";" \n
                         "	" \n
                         "	if (isNil ""BIS_premature"") then {" \n
                         "		""BIS_attack"" call BIS_fnc_missionConversations;" \n
                         "		""BIS_moving"" spawn BIS_fnc_missionConversations;" \n
                         "		" \n
                         "		sleep 1;" \n
                         "	};" \n
                         "	" \n
                         "	""BIS_town"" call BIS_fnc_missionTasks;" \n
                         "	" \n
                         "	// Join units except leader to player" \n
                         "	{" \n
                         "		if (alive _x) then {" \n
                         "			_x setCombatMode ""BLUE"";" \n
                         "			" \n
                         "			[_x] joinSilent group BIS_inf;" \n
                         "			" \n
                         "			if (leader BIS_inf == BIS_inf) then {" \n
                         "				// Ensure AI group leader" \n
                         "				group BIS_inf selectLeader _x;" \n
                         "			};" \n
                         "		};" \n
                         "	} forEach [BIS_BLU2, BIS_BLU3];" \n
                         "	" \n
                         "	// Start attack" \n
                         "	BIS_attack = true;" \n
                         "	" \n
                         "	{" \n
                         "		private [""_unit""];" \n
                         "		_unit = _x;" \n
                         "		" \n
                         "		// Take off captive" \n
                         "		_unit setCaptive false;" \n
                         "		" \n
                         "		if (_unit != BIS_inf) then {" \n
                         "			_unit removeEventHandler [""Killed"", _unit getVariable ""BIS_killedEH""];" \n
                         "			" \n
                         "			_x enableAI ""MOVE"";" \n
                         "			_x setUnitPos ""AUTO"";" \n
                         "			_x setCombatMode ""YELLOW"";" \n
                         "		};" \n
                         "	} forEach (units group BIS_inf + units BIS_BLU_group1);" \n
                         "	" \n
                         "	BIS_leader setCaptive false;" \n
                         "	BIS_leader setCombatMode ""YELLOW"";" \n
                         "	" \n
                         "	// Take enemies off captive" \n
                         "	{" \n
                         "		_x setCaptive false;" \n
                         "		_x setBehaviour ""SAFE"";" \n
                         "	} forEach BIS_town_defenders;" \n
                         "	" \n
                         "	if (isNil ""BIS_premature"") then {sleep 5};" \n
                         "	" \n
                         "	""BIS_moveIn"" call BIS_fnc_missionConversations;" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Terminate";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Town_clear">*/
                                class Town_clear
                                {
                                        itemno = 20;
                                        priority = 0.000000;
                                        to="Identify_the_bod";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{isNil _x} count [""BIS_townClear"", ""BIS_attack""] == 0" \n
                                         "&&" \n
                                         "!(alive BIS_target)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Attack_premature">*/
                class Attack_premature
                {
                        name = "Attack_premature";
                        itemno = 70;
                        init = /*%FSM<STATEINIT""">*/"// Register that they attacked prematurely" \n
                         "BIS_premature = true;" \n
                         "BIS_prepared = true;" \n
                         "" \n
                         "// Player attacked prematurely" \n
                         "{_x call BIS_fnc_missionTasks} forEach [""BIS_insert"", ""BIS_position""];"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "In_position">*/
                                class In_position
                                {
                                        itemno = 17;
                                        priority = 0.000000;
                                        to="Set_up";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{!(isNil _x)} count [""BIS_inPosition"", ""BIS_premature""] > 0"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
        };
        initState="Start";
        finalStates[] =
        {
                "Terminate",
                "Success__2",
                "Success__1",
        };
};
/*%FSM</COMPILE>*/