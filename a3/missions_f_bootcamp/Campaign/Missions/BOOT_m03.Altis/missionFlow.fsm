/*%FSM<COMPILE "C:\Bis\FSMEditor\scriptedFSM.cfg, Mission Flow">*/
/*%FSM<HEAD>*/
/*
item0[] = {"Mission_Flow",0,250,-75.000000,-75.000000,25.000000,-25.000000,0.000000,"Mission Flow"};
item1[] = {"Mission_started",4,218,-75.000000,0.000000,25.000000,50.000000,0.000000,"Mission started"};
item2[] = {"Mark_start",2,250,-75.000000,375.000000,25.000000,425.000000,0.000000,"Mark start"};
item3[] = {"Town_marked",4,218,-75.000000,750.000000,25.000000,800.000000,0.000000,"Town marked"};
item4[] = {"Mark_hill",2,250,-75.000000,825.000000,25.000000,875.000000,0.000000,"Mark hill"};
item5[] = {"Left_1",4,218,-75.000000,1550.000000,25.000000,1600.000000,0.000000,"Left 1"};
item6[] = {"Left_1",2,250,-75.000000,1625.000000,25.000000,1675.000000,0.000000,"Left 1"};
item7[] = {"",7,210,46.000000,1646.000000,54.000000,1654.000000,0.000000,""};
item8[] = {"",7,210,46.000000,1721.000000,54.000000,1729.000000,0.000000,""};
item9[] = {"Left_2",4,218,-75.000000,1700.000000,25.000000,1750.000000,0.000000,"Left 2"};
item10[] = {"Located",2,250,-75.000000,1125.000000,25.000000,1175.000000,0.000000,"Located"};
item11[] = {"In_truck",4,218,-75.000000,1400.000000,25.000000,1450.000000,0.000000,"In truck"};
item12[] = {"Drive_to_AAF",2,250,-75.000000,1475.000000,25.000000,1525.000000,0.000000,"Drive to AAF"};
item13[] = {"Map_closed",4,218,-325.000000,1400.000000,-225.000000,1450.000000,0.000000,"Map closed"};
item14[] = {"Board_truck",2,250,-325.000000,1475.000000,-225.000000,1525.000000,0.000000,"Board truck"};
item15[] = {"At_AAF",4,218,-75.000000,2450.000000,25.000000,2500.000000,0.000000,"At AAF"};
item16[] = {"Stop_the_truck",2,250,-75.000000,2525.000000,25.000000,2575.000000,0.000000,"Stop the truck"};
item17[] = {"Truck_stopped",4,218,-75.000000,2600.000000,25.000000,2650.000000,0.000000,"Truck stopped"};
item18[] = {"Disembark",2,250,-75.000000,2675.000000,25.000000,2725.000000,0.000000,"Disembark"};
item19[] = {"Player_out",4,218,-75.000000,2750.000000,25.000000,2800.000000,0.000000,"Player out"};
item20[] = {"Meeting",2,250,-75.000000,2825.000000,25.000000,2875.000000,0.000000,"Meeting"};
item21[] = {"Stash_found",4,218,-75.000000,2900.000000,25.000000,2950.000000,0.000000,"Stash found"};
item22[] = {"Intro",2,250,-75.000000,75.000000,25.000000,125.000000,0.000000,"Intro"};
item23[] = {"Intro_ended",4,218,-75.000000,150.000000,25.000000,200.000000,0.000000,"Intro ended"};
item24[] = {"",7,210,-28.999996,1346.000000,-21.000004,1354.000000,0.000000,""};
item25[] = {"",7,210,-29.000004,1371.000000,-20.999996,1379.000000,0.000000,""};
item26[] = {"",7,210,-153.999969,1371.000000,-146.000046,1379.000000,0.000000,""};
item27[] = {"",7,210,-279.000000,1371.000000,-270.999969,1379.000000,0.000000,""};
item28[] = {"Others_in_truck",4,218,-200.000000,1400.000000,-100.000000,1450.000000,0.000000,"Others in" \n "truck"};
item29[] = {"",7,210,-279.000000,1546.000000,-270.999969,1554.000000,0.000000,""};
item30[] = {"",7,210,-354.000000,1546.000000,-345.999969,1554.000000,0.000000,""};
item31[] = {"",7,210,-354.000000,1346.000000,-345.999969,1354.000000,0.000000,""};
item32[] = {"Unlock_truck",2,250,-200.000000,1475.000000,-100.000000,1525.000000,0.000000,"Unlock truck"};
item33[] = {"",7,210,-153.999969,1546.000000,-146.000046,1554.000000,0.000000,""};
item34[] = {"Left_2",2,250,-75.000000,1775.000000,25.000000,1825.000000,0.000000,"Left 2"};
item35[] = {"",7,210,46.000000,1796.000000,54.000000,1804.000000,0.000000,""};
item36[] = {"On_the_way",4,218,-75.000000,1200.000000,25.000000,1250.000000,0.000000,"On the way"};
item37[] = {"Get_in_the_truck",2,250,-75.000000,1275.000000,25.000000,1325.000000,0.000000,"Get in the truck"};
item38[] = {"Map",2,250,-75.000000,225.000000,25.000000,275.000000,0.000000,"Map"};
item39[] = {"Map_opened",4,218,-75.000000,300.000000,25.000000,350.000000,1.000000,"Map opened"};
item40[] = {"Map_closed",8,218,50.000000,225.000000,150.000000,275.000000,0.000000,"Map closed"};
item41[] = {"Open_map",2,250,50.000000,300.000000,150.000000,350.000000,0.000000,"Open map"};
item42[] = {"",7,210,46.000000,2021.000244,54.000000,2028.999756,0.000000,""};
item43[] = {"Left_3",4,218,-75.000000,2000.000000,25.000000,2050.000000,0.000000,"Left 3"};
item44[] = {"Left_3",2,250,-75.000000,2075.000000,25.000000,2125.000000,0.000000,"Left 3"};
item45[] = {"",7,210,46.000000,2096.000244,54.000000,2103.999756,0.000000,""};
item46[] = {"Right_1",4,218,-75.000000,2300.000000,25.000000,2350.000000,0.000000,"Right 1"};
item47[] = {"",7,210,45.999992,2321.000244,54.000008,2328.999756,0.000000,""};
item48[] = {"Right_1",2,250,-75.000000,2375.000000,25.000000,2425.000000,0.000000,"Right 1"};
item49[] = {"",7,210,45.999992,2396.000244,54.000008,2403.999756,0.000000,""};
item50[] = {"",7,210,46.000004,1946.000244,53.999996,1953.999756,0.000000,""};
item51[] = {"",7,210,45.999996,2471.000244,54.000004,2478.999756,0.000000,""};
item52[] = {"Hill_marked",4,218,-75.000000,900.000000,25.000000,950.000000,0.000000,"Hill marked"};
item53[] = {"Mark_location",2,250,-75.000000,975.000000,25.000000,1025.000000,0.000000,"Mark location"};
item54[] = {"Window_open",4,218,-75.000000,450.000000,25.000000,500.000000,0.000000,"Window open"};
item55[] = {"Show_hint",2,250,-75.000000,525.000000,25.000000,575.000000,0.000000,"Show hint"};
item56[] = {"Start_marked",4,218,-75.000000,600.000000,25.000000,650.000000,0.000000,"Start marked"};
item57[] = {"Mark_town",2,250,-75.000000,675.000000,25.000000,725.000000,0.000000,"Mark town"};
item58[] = {"Location_marked",4,218,-75.000000,1050.000000,25.000000,1100.000000,0.000000,"Location" \n "marked"};
item59[] = {"",7,210,46.000000,1496.000000,54.000000,1504.000000,0.000000,""};
item60[] = {"",7,210,46.000000,1571.000000,54.000000,1579.000000,0.000000,""};
item61[] = {"Return",2,250,-75.000000,2975.000000,25.000000,3025.000000,0.000000,"Return"};
item62[] = {"Returned",4,218,-75.000000,3050.000000,25.000000,3100.000000,0.000000,"Returned"};
item63[] = {"End",1,250,-75.000000,3125.000000,25.000000,3175.000000,0.000000,"End"};
item64[] = {"Passing_town",4,218,-75.000000,1850.000000,25.000000,1900.000000,0.000000,"Passing town"};
item65[] = {"Earthquake",2,250,-75.000000,1925.000000,25.000000,1975.000000,0.000000,"Earthquake"};
item66[] = {"",7,210,46.000000,1871.000000,54.000000,1879.000000,0.000000,""};
item67[] = {"Nearing_location",4,218,-75.000000,2150.000000,25.000000,2200.000000,0.000000,"Nearing" \n "location"};
item68[] = {"GPS",2,250,-75.000000,2225.000000,25.000000,2275.000000,0.000000,"GPS"};
item69[] = {"",7,210,46.000000,2246.000000,54.000000,2254.000000,0.000000,""};
item70[] = {"",7,210,46.000000,2171.000000,54.000000,2179.000000,0.000000,""};
link0[] = {0,1};
link1[] = {1,22};
link2[] = {2,54};
link3[] = {3,4};
link4[] = {4,52};
link5[] = {5,6};
link6[] = {6,7};
link7[] = {6,9};
link8[] = {7,8};
link9[] = {8,9};
link10[] = {8,35};
link11[] = {9,34};
link12[] = {10,36};
link13[] = {11,12};
link14[] = {12,5};
link15[] = {12,59};
link16[] = {13,14};
link17[] = {14,29};
link18[] = {15,16};
link19[] = {16,17};
link20[] = {17,18};
link21[] = {18,19};
link22[] = {19,20};
link23[] = {20,21};
link24[] = {21,61};
link25[] = {22,23};
link26[] = {23,38};
link27[] = {24,25};
link28[] = {25,11};
link29[] = {25,26};
link30[] = {26,27};
link31[] = {26,28};
link32[] = {27,13};
link33[] = {28,32};
link34[] = {29,30};
link35[] = {30,31};
link36[] = {31,24};
link37[] = {32,33};
link38[] = {33,29};
link39[] = {34,35};
link40[] = {34,64};
link41[] = {35,66};
link42[] = {36,37};
link43[] = {37,24};
link44[] = {38,39};
link45[] = {38,40};
link46[] = {39,2};
link47[] = {40,41};
link48[] = {41,39};
link49[] = {42,43};
link50[] = {42,45};
link51[] = {43,44};
link52[] = {44,45};
link53[] = {44,67};
link54[] = {45,70};
link55[] = {46,48};
link56[] = {47,46};
link57[] = {47,49};
link58[] = {48,15};
link59[] = {48,49};
link60[] = {49,51};
link61[] = {50,42};
link62[] = {51,15};
link63[] = {52,53};
link64[] = {53,58};
link65[] = {54,55};
link66[] = {55,56};
link67[] = {56,57};
link68[] = {57,3};
link69[] = {58,10};
link70[] = {59,60};
link71[] = {60,5};
link72[] = {60,7};
link73[] = {61,62};
link74[] = {62,63};
link75[] = {64,65};
link76[] = {65,43};
link77[] = {65,50};
link78[] = {66,64};
link79[] = {67,68};
link80[] = {68,46};
link81[] = {68,69};
link82[] = {69,47};
link83[] = {70,67};
globals[] = {25.000000,1,0,0,0,640,480,1,193,6316128,1,-417.513428,333.496124,755.752747,-90.911682,950,1071,1};
window[] = {2,-1,-1,-1,-1,905,25,1419,25,3,968};
*//*%FSM</HEAD>*/
class FSM
{
        fsmName = "Mission Flow";
        class States
        {
                /*%FSM<STATE "Mission_Flow">*/
                class Mission_Flow
                {
                        name = "Mission_Flow";
                        itemno = 0;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Mission_started">*/
                                class Mission_started
                                {
                                        itemno = 1;
                                        priority = 0.000000;
                                        to="Intro";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time > 1"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Mark_start">*/
                class Mark_start
                {
                        name = "Mark_start";
                        itemno = 2;
                        init = /*%FSM<STATEINIT""">*/"[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: mark start"";" \n
                         "	" \n
                         "	""20_Lesson"" call BIS_fnc_missionConversations;" \n
                         "	""25_Grids"" spawn BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	[" \n
                         "		[""Multiplayer"", ""Markers"", ""CreateMarkers_sub""]," \n
                         "		nil, nil," \n
                         "		10e10," \n
                         "		""false""," \n
                         "		true," \n
                         "		true" \n
                         "	] call BIS_fnc_advHint;" \n
                         "	" \n
                         "	// Mark start" \n
                         "	[" \n
                         "		BIS_start," \n
                         "		""BIS_startMarker""," \n
                         "		0.01," \n
                         "		""x01_Mark_Start_Wrong_1""," \n
                         "		""x05_Mark_Start_Wrong_2""" \n
                         "	] execFSM ""markerControl.fsm"";" \n
                         "	" \n
                         "	// Tell the player to keep his map open" \n
                         "	[] spawn {" \n
                         "		scriptName ""missionFlow.fsm: map reprimand"";" \n
                         "		" \n
                         "		private [""_time""];" \n
                         "		_time = 0;" \n
                         "		" \n
                         "		private [""_reprimands""];" \n
                         "		_reprimands = [" \n
                         "			""x45_Closed_Map_1""," \n
                         "			""x50_Closed_Map_2""," \n
                         "			""x55_Closed_Map_3""" \n
                         "		];" \n
                         "		" \n
                         "		while {BIS_locationMarker == """"} do {" \n
                         "			waitUntil {(!(visibleMap) && time > _time) || BIS_locationMarker != """"};" \n
                         "			" \n
                         "			if (BIS_locationMarker == """") then {" \n
                         "				if (count _reprimands == 0) then {" \n
                         "					// Replenish reprimands" \n
                         "					_reprimands = [" \n
                         "						""x45_Closed_Map_1""," \n
                         "						""x50_Closed_Map_2""," \n
                         "						""x55_Closed_Map_3""" \n
                         "					];" \n
                         "				};" \n
                         "				" \n
                         "				// Play a random reprimand" \n
                         "				private [""_reprimand""];" \n
                         "				_reprimand = _reprimands call BIS_fnc_selectRandom;" \n
                         "				_reprimands = _reprimands - [_reprimand];" \n
                         "				_reprimand call BIS_fnc_missionConversations;" \n
                         "				" \n
                         "				// Increase time" \n
                         "				_time = time + 15;" \n
                         "			};" \n
                         "		};" \n
                         "	};" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Window_open">*/
                                class Window_open
                                {
                                        itemno = 54;
                                        priority = 0.000000;
                                        to="Show_hint";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNull (findDisplay 54))"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Mark_hill">*/
                class Mark_hill
                {
                        name = "Mark_hill";
                        itemno = 4;
                        init = /*%FSM<STATEINIT""">*/"[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: mark hill"";" \n
                         "	" \n
                         "	""45_Town_Marked"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	private [""_pos""];" \n
                         "	_pos = [markerPos BIS_townMarker, 5000, (90 + 180)] call BIS_fnc_relPos;" \n
                         "	[BIS_townMarker, _pos, -3, [""RECTANGLE""]] call BIS_fnc_markerPath;" \n
                         "	" \n
                         "	""49_More_Info"" call BIS_fnc_missionConversations;" \n
                         "	""50_Mark_Hill"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	// Mark the hill" \n
                         "	[" \n
                         "		BIS_hill," \n
                         "		""BIS_hillMarker""," \n
                         "		0.01," \n
                         "		""x20_Mark_Hill_Wrong_1""," \n
                         "		""x25_Mark_Hill_Wrong_2""" \n
                         "	] execFSM ""markerControl.fsm"";" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Hill_marked">*/
                                class Hill_marked
                                {
                                        itemno = 52;
                                        priority = 0.000000;
                                        to="Mark_location";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"BIS_hillMarker != """""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Left_1">*/
                class Left_1
                {
                        name = "Left_1";
                        itemno = 6;
                        init = /*%FSM<STATEINIT""">*/"""85_Left_1"" spawn BIS_fnc_missionConversations;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Passing_town">*/
                                class Passing_town
                                {
                                        itemno = 64;
                                        priority = 0.000000;
                                        to="Earthquake";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_expTrig"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Left_2">*/
                                class Left_2
                                {
                                        itemno = 9;
                                        priority = 0.000000;
                                        to="Left_2";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_left2"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Located">*/
                class Located
                {
                        name = "Located";
                        itemno = 10;
                        init = /*%FSM<STATEINIT""">*/"""BIS_drive"" setMarkerPos markerPos BIS_locationMarker;" \n
                         "[""BIS_locate"", ""SUCCEEDED""] call BIS_fnc_missionTasks;" \n
                         "" \n
                         "private [""_located""];" \n
                         "_located = [] spawn {" \n
                         "	scriptName ""missionFlow.fsm: located"";" \n
                         "	" \n
                         "	""65_Location_Marked"" spawn BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	sleep 6;" \n
                         "	" \n
                         "	saveGame;" \n
                         "	" \n
                         "	sleep 1;" \n
                         "	" \n
                         "	""70_En_Route"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	// Stop Adams' animation" \n
                         "	BIS_adams setBehaviour ""AWARE"";" \n
                         "	BIS_adams playMoveNow ""Acts_listeningToRadio_Out"";" \n
                         "	" \n
                         "	private [""_animEH""];" \n
                         "	_animEH = BIS_adams addEventHandler [" \n
                         "		""AnimDone""," \n
                         "		{" \n
                         "			private [""_unit"", ""_anim""];" \n
                         "			_unit = _this select 0;" \n
                         "			_anim = _this select 1;" \n
                         "			" \n
                         "			if (_anim == ""Acts_listeningToRadio_Out"") then {" \n
                         "				_unit removeEventHandler [""AnimDone"", _unit getVariable ""BIS_animEH""];" \n
                         "				_unit setVariable [""BIS_animEH"", nil];" \n
                         "				" \n
                         "				{_unit enableAI _x} forEach [""ANIM"", ""AUTOTARGET"", ""TARGET""];" \n
                         "				_unit enableMimics true;" \n
                         "			};" \n
                         "		}" \n
                         "	];" \n
                         "	" \n
                         "	BIS_adams setVariable [""BIS_animEH"", _animEH];" \n
                         "	" \n
                         "	""75_Orders"" call BIS_fnc_missionConversations;" \n
                         "	""80_Get_In"" spawn BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	{_x call BIS_fnc_missionTasks} forEach [""BIS_getIn"", ""BIS_drive""];" \n
                         "	" \n
                         "	// Make units get in the truck" \n
                         "	BIS_adams assignAsCargoIndex [BIS_truck, 0];" \n
                         "	BIS_team1 assignAsCargoIndex [BIS_truck, 1];" \n
                         "	BIS_team2 assignAsCargoIndex [BIS_truck, 2];" \n
                         "	[BIS_adams, BIS_team1, BIS_team2] orderGetIn true;" \n
                         "	" \n
                         "	// Let team mates move" \n
                         "	{_x enableAI ""MOVE""} forEach [BIS_adams, BIS_team1, BIS_team2];" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "On_the_way">*/
                                class On_the_way
                                {
                                        itemno = 36;
                                        priority = 0.000000;
                                        to="Get_in_the_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _located"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Drive_to_AAF">*/
                class Drive_to_AAF
                {
                        name = "Drive_to_AAF";
                        itemno = 12;
                        init = /*%FSM<STATEINIT""">*/"// Swap zone restriction" \n
                         "{" \n
                         "	_x triggerAttachVehicle [BIS_lacey];" \n
                         "	_x setTriggerActivation [""VEHICLE"", triggerActivation _x select 1, triggerActivation _x select 2];" \n
                         "} forEach [BIS_AO2, BIS_AO3, BIS_AO4, BIS_AO5, BIS_AO6];" \n
                         "" \n
                         "BIS_AO1 triggerAttachVehicle [];" \n
                         "" \n
                         "BIS_truck lock true;" \n
                         "" \n
                         "[""BIS_getIn"", ""SUCCEEDED""] call BIS_fnc_missionTasks;" \n
                         "[""BIS_drive"", ""CURRENT""] call BIS_fnc_missionTasks;" \n
                         "" \n
                         "[" \n
                         "	[""Vehicle"", ""Driving""]," \n
                         "	nil, nil," \n
                         "	10e10," \n
                         "	""false""," \n
                         "	true," \n
                         "	true" \n
                         "] call BIS_fnc_advHint;" \n
                         "" \n
                         "// Music" \n
                         "[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: driving music"";" \n
                         "	" \n
                         "	waitUntil {triggerActivated BIS_music};" \n
                         "	" \n
                         "	0 fadeMusic 0.6;" \n
                         "	playMusic ""BackgroundTrack04_F_EPC"";" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Passing_town">*/
                                class Passing_town
                                {
                                        itemno = 64;
                                        priority = 0.000000;
                                        to="Earthquake";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_expTrig"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Left_2">*/
                                class Left_2
                                {
                                        itemno = 9;
                                        priority = 0.000000;
                                        to="Left_2";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_left2"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Left_1">*/
                                class Left_1
                                {
                                        itemno = 5;
                                        priority = 0.000000;
                                        to="Left_1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_left1"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Board_truck">*/
                class Board_truck
                {
                        name = "Board_truck";
                        itemno = 14;
                        init = /*%FSM<STATEINIT""">*/"private [""_mapClosed""];" \n
                         "_mapClosed = true;" \n
                         "" \n
                         "[" \n
                         "	[""Vehicle"", ""Entering"", ""EnteringVehicle_sub""]," \n
                         "	nil, nil," \n
                         "	10e10," \n
                         "	""false""," \n
                         "	true," \n
                         "	true" \n
                         "] call BIS_fnc_advHint;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Others_in_truck">*/
                                class Others_in_truck
                                {
                                        itemno = 28;
                                        priority = 0.000000;
                                        to="Unlock_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{!(_x in BIS_truck)} count [BIS_adams, BIS_team1, BIS_team2] == 0" \n
                                         "&&" \n
                                         "!(_othersIn)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Map_closed">*/
                                class Map_closed
                                {
                                        itemno = 13;
                                        priority = 0.000000;
                                        to="Board_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(visibleMap)" \n
                                         "&&" \n
                                         "!(_mapClosed)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "In_truck">*/
                                class In_truck
                                {
                                        itemno = 11;
                                        priority = 0.000000;
                                        to="Drive_to_AAF";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"driver BIS_truck == BIS_lacey" \n
                                         "&&" \n
                                         "_othersIn"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Stop_the_truck">*/
                class Stop_the_truck
                {
                        name = "Stop_the_truck";
                        itemno = 16;
                        init = /*%FSM<STATEINIT""">*/"// Change zone restriction" \n
                         "BIS_AO7 triggerAttachVehicle [BIS_lacey];" \n
                         "BIS_AO7 setTriggerActivation [""VEHICLE"", triggerActivation BIS_AO7 select 1, triggerActivation BIS_AO7 select 2];" \n
                         "" \n
                         "{_x triggerAttachVehicle []} forEach [BIS_AO2, BIS_AO3, BIS_AO4, BIS_AO5, BIS_AO6];" \n
                         "" \n
                         "[""BIS_drive"", ""SUCCEEDED""] call BIS_fnc_missionTasks;" \n
                         """BIS_getOut"" call BIS_fnc_missionTasks;" \n
                         "" \n
                         """120_Arrived"" spawn BIS_fnc_missionConversations;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Truck_stopped">*/
                                class Truck_stopped
                                {
                                        itemno = 17;
                                        priority = 0.000000;
                                        to="Disembark";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"speed BIS_truck == 0"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Disembark">*/
                class Disembark
                {
                        name = "Disembark";
                        itemno = 18;
                        init = /*%FSM<STATEINIT""">*/"BIS_truck lock false;" \n
                         "" \n
                         "[" \n
                         "	[""Vehicle"", ""Exit""]," \n
                         "	nil, nil," \n
                         "	10e10," \n
                         "	""BIS_playerOut""," \n
                         "	true," \n
                         "	true" \n
                         "] call BIS_fnc_advHint;" \n
                         "" \n
                         "{" \n
                         "	// Ensure units walk" \n
                         "	_x setBehaviour ""SAFE"";" \n
                         "	_x forceSpeed 1.5;" \n
                         "	" \n
                         "	// Stay out of the truck" \n
                         "	_x leaveVehicle BIS_truck;" \n
                         "} forEach [BIS_adams, BIS_team1, BIS_team2];" \n
                         "" \n
                         "doGetOut [BIS_adams, BIS_team1, BIS_team2];" \n
                         "" \n
                         """125_Disembark"" spawn BIS_fnc_missionConversations;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Player_out">*/
                                class Player_out
                                {
                                        itemno = 19;
                                        priority = 0.000000;
                                        to="Meeting";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(BIS_lacey in BIS_truck)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Meeting">*/
                class Meeting
                {
                        name = "Meeting";
                        itemno = 20;
                        init = /*%FSM<STATEINIT""">*/"BIS_truck lock true;" \n
                         "[""BIS_getOut"", ""SUCCEEDED""] call BIS_fnc_missionTasks;" \n
                         "" \n
                         "// Register that the player got out" \n
                         "BIS_playerOut = true;" \n
                         "" \n
                         "private [""_meeting""];" \n
                         "_meeting = [] spawn {" \n
                         "	scriptName ""missionFlow.fsm: meeting"";" \n
                         "	" \n
                         "	sleep 6;" \n
                         "	" \n
                         "	private [""_script""];" \n
                         "	_script = execVM ""meeting.sqf"";" \n
                         "	" \n
                         "	waitUntil {scriptDone _script};" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Stash_found">*/
                                class Stash_found
                                {
                                        itemno = 21;
                                        priority = 0.000000;
                                        to="Return";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"BIS_stashFound" \n
                                         "&&" \n
                                         "scriptDone _meeting"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Intro">*/
                class Intro
                {
                        name = "Intro";
                        itemno = 22;
                        init = /*%FSM<STATEINIT""">*/"execVM ""intro.sqf"";"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Intro_ended">*/
                                class Intro_ended
                                {
                                        itemno = 23;
                                        priority = 0.000000;
                                        to="Map";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"BIS_introEnded"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Unlock_truck">*/
                class Unlock_truck
                {
                        name = "Unlock_truck";
                        itemno = 32;
                        init = /*%FSM<STATEINIT""">*/"private [""_othersIn""];" \n
                         "_othersIn = true;" \n
                         "" \n
                         "// Unlock the truck" \n
                         "BIS_truck lock false;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Others_in_truck">*/
                                class Others_in_truck
                                {
                                        itemno = 28;
                                        priority = 0.000000;
                                        to="Unlock_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{!(_x in BIS_truck)} count [BIS_adams, BIS_team1, BIS_team2] == 0" \n
                                         "&&" \n
                                         "!(_othersIn)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Map_closed">*/
                                class Map_closed
                                {
                                        itemno = 13;
                                        priority = 0.000000;
                                        to="Board_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(visibleMap)" \n
                                         "&&" \n
                                         "!(_mapClosed)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "In_truck">*/
                                class In_truck
                                {
                                        itemno = 11;
                                        priority = 0.000000;
                                        to="Drive_to_AAF";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"driver BIS_truck == BIS_lacey" \n
                                         "&&" \n
                                         "_othersIn"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Left_2">*/
                class Left_2
                {
                        name = "Left_2";
                        itemno = 34;
                        init = /*%FSM<STATEINIT""">*/"""95_Left_2"" spawn BIS_fnc_missionConversations;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Passing_town">*/
                                class Passing_town
                                {
                                        itemno = 64;
                                        priority = 0.000000;
                                        to="Earthquake";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_expTrig"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Get_in_the_truck">*/
                class Get_in_the_truck
                {
                        name = "Get_in_the_truck";
                        itemno = 37;
                        init = /*%FSM<STATEINIT""">*/"private [""_mapClosed"", ""_othersIn""];" \n
                         "_mapClosed = false;" \n
                         "_othersIn = false;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Others_in_truck">*/
                                class Others_in_truck
                                {
                                        itemno = 28;
                                        priority = 0.000000;
                                        to="Unlock_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{!(_x in BIS_truck)} count [BIS_adams, BIS_team1, BIS_team2] == 0" \n
                                         "&&" \n
                                         "!(_othersIn)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Map_closed">*/
                                class Map_closed
                                {
                                        itemno = 13;
                                        priority = 0.000000;
                                        to="Board_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(visibleMap)" \n
                                         "&&" \n
                                         "!(_mapClosed)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "In_truck">*/
                                class In_truck
                                {
                                        itemno = 11;
                                        priority = 0.000000;
                                        to="Drive_to_AAF";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"driver BIS_truck == BIS_lacey" \n
                                         "&&" \n
                                         "_othersIn"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Map">*/
                class Map
                {
                        name = "Map";
                        itemno = 38;
                        init = /*%FSM<STATEINIT""">*/"""BIS_locate"" call BIS_fnc_missionTasks;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Map_opened">*/
                                class Map_opened
                                {
                                        itemno = 39;
                                        priority = 1.000000;
                                        to="Mark_start";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"visibleMap"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Map_closed">*/
                                class Map_closed
                                {
                                        itemno = 40;
                                        priority = 0.000000;
                                        to="Open_map";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Open_map">*/
                class Open_map
                {
                        name = "Open_map";
                        itemno = 41;
                        init = /*%FSM<STATEINIT""">*/"[" \n
                         "	[""Navigation"", ""Map"", ""OpenMap_sub""]," \n
                         "	nil, nil," \n
                         "	10e10," \n
                         "	""visibleMap""," \n
                         "	true," \n
                         "	true" \n
                         "] call BIS_fnc_advHint;" \n
                         "" \n
                         """15_Map"" spawn BIS_fnc_missionConversations;" \n
                         "" \n
                         "[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: open map"";" \n
                         "	" \n
                         "	private [""_time""];" \n
                         "	_time = time + 15;" \n
                         "	" \n
                         "	waitUntil {time > _time || visibleMap};" \n
                         "	" \n
                         "	if (!(visibleMap)) then {" \n
                         "		// Reprimand player" \n
                         "		""x50_Closed_Map_2"" spawn BIS_fnc_missionConversations;" \n
                         "	};" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Map_opened">*/
                                class Map_opened
                                {
                                        itemno = 39;
                                        priority = 1.000000;
                                        to="Mark_start";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"visibleMap"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Left_3">*/
                class Left_3
                {
                        name = "Left_3";
                        itemno = 44;
                        init = /*%FSM<STATEINIT""">*/"""100_Left_3"" spawn BIS_fnc_missionConversations;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Nearing_location">*/
                                class Nearing_location
                                {
                                        itemno = 67;
                                        priority = 0.000000;
                                        to="GPS";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_GPSTrig"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Right_1">*/
                class Right_1
                {
                        name = "Right_1";
                        itemno = 48;
                        init = /*%FSM<STATEINIT""">*/"""115_Right_1"" spawn BIS_fnc_missionConversations;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "At_AAF">*/
                                class At_AAF
                                {
                                        itemno = 15;
                                        priority = 0.000000;
                                        to="Stop_the_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_location"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Mark_location">*/
                class Mark_location
                {
                        name = "Mark_location";
                        itemno = 53;
                        init = /*%FSM<STATEINIT""">*/"[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: mark location"";" \n
                         "	" \n
                         "	""55_Hill_Marked"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	private [""_pos""];" \n
                         "	_pos = [markerPos BIS_hillMarker, 5000, (130 + 180)] call BIS_fnc_relPos;" \n
                         "	[BIS_hillMarker, _pos, -3, [""RECTANGLE""]] call BIS_fnc_markerPath;" \n
                         "	" \n
                         "	""60_Mark_Location"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	// Mark location" \n
                         "	[" \n
                         "		BIS_location," \n
                         "		""BIS_locationMarker""," \n
                         "		0.01," \n
                         "		[""x30_Mark_Location_Wrong"", ""x35_Mark_Location_Info""]," \n
                         "		""""" \n
                         "	] execFSM ""markerControl.fsm"";" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Location_marked">*/
                                class Location_marked
                                {
                                        itemno = 58;
                                        priority = 0.000000;
                                        to="Located";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"BIS_locationMarker != """""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Show_hint">*/
                class Show_hint
                {
                        name = "Show_hint";
                        itemno = 55;
                        init = /*%FSM<STATEINIT""">*/"[" \n
                         "	[""Multiplayer"", ""Markers"", ""ChangeMarkers_sub""]," \n
                         "	nil, nil," \n
                         "	10e10," \n
                         "	""BIS_startMarker != ''""," \n
                         "	true," \n
                         "	true" \n
                         "] call BIS_fnc_advHint;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Start_marked">*/
                                class Start_marked
                                {
                                        itemno = 56;
                                        priority = 0.000000;
                                        to="Mark_town";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"BIS_startMarker != """""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Mark_town">*/
                class Mark_town
                {
                        name = "Mark_town";
                        itemno = 57;
                        init = /*%FSM<STATEINIT""">*/"[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: mark town"";" \n
                         "	" \n
                         "	""30_Triangulate"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	// Talk on the radio" \n
                         "	{BIS_adams disableAI _x} forEach [""ANIM"", ""AUTOTARGET"", ""TARGET""];" \n
                         "	BIS_adams enableMimics false;" \n
                         "	BIS_adams playMoveNow ""Acts_listeningToRadio_Loop"";" \n
                         "	" \n
                         "	[] spawn {" \n
                         "		disableSerialization;" \n
                         "		" \n
                         "		scriptName ""missionFlow.fsm: grid distances"";" \n
                         "		" \n
                         "		waitUntil {!(isNull (findDisplay 12))};" \n
                         "		" \n
                         "		private [""_display"", ""_control""];" \n
                         "		_display = findDisplay 12;" \n
                         "		_control = _display displayCtrl 51;" \n
                         "		" \n
                         "		// Grab map position" \n
                         "		private [""_EH""];" \n
                         "		_EH = _control ctrlAddEventHandler [""MouseMoving"", {BIS_mapPos = [_this select 1, _this select 2]}];" \n
                         "		" \n
                         "		waitUntil {!(isNil ""BIS_mapPos"")};" \n
                         "		waitUntil {BIS_stopTracking};" \n
                         "		" \n
                         "		// Remove eventhandler" \n
                         "		_control ctrlRemoveEventHandler [""MouseMoving"", _EH];" \n
                         "		" \n
                         "		// Convert map position" \n
                         "		private [""_pos""];" \n
                         "		_pos = _control ctrlMapScreenToWorld BIS_mapPos;" \n
                         "		" \n
                         "		// Zoom the map" \n
                         "		_control ctrlMapAnimAdd [0.5, 0.05, _pos];" \n
                         "		ctrlMapAnimCommit _control;" \n
                         "	};" \n
                         "	" \n
                         "	""35_Info"" call BIS_fnc_missionConversations;" \n
                         "	""40_Mark_Town"" spawn BIS_fnc_missionConversations;" \n
                         "	BIS_stopTracking = true;" \n
                         "	" \n
                         "	waitUntil {!(isNil ""BIS_mapPos"")};" \n
                         "	" \n
                         "	// Mark town" \n
                         "	[" \n
                         "		BIS_town," \n
                         "		""BIS_townMarker""," \n
                         "		0.02," \n
                         "		""x10_Mark_Town_Wrong_1""," \n
                         "		""x15_Mark_Town_Wrong_2""" \n
                         "	] execFSM ""markerControl.fsm"";" \n
                         "	" \n
                         "	// Explain grid distances" \n
                         "	[" \n
                         "		[""Navigation"", ""Map"", ""GridDistances_sub""]," \n
                         "		nil, nil," \n
                         "		10e10," \n
                         "		""BIS_townMarker != ''""," \n
                         "		true," \n
                         "		true" \n
                         "	] call BIS_fnc_advHint;" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Town_marked">*/
                                class Town_marked
                                {
                                        itemno = 3;
                                        priority = 0.000000;
                                        to="Mark_hill";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"BIS_townMarker != """""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Return">*/
                class Return
                {
                        name = "Return";
                        itemno = 61;
                        init = /*%FSM<STATEINIT""">*/"// Turn all markers green" \n
                         "{_x setMarkerColor ""ColorIndependent""} forEach [""BIS_stash1"", ""BIS_stash2"", ""BIS_stash3""];" \n
                         "" \n
                         "// Move Adams" \n
                         "BIS_adams disableAI ""MOVE"";" \n
                         "BIS_adams setPos markerPos ""BIS_return"";" \n
                         "BIS_adams setDir markerDir ""BIS_return"";" \n
                         "" \n
                         "// Kill civilian" \n
                         "BIS_wounded setDamage 1;" \n
                         "BIS_wounded setDamage 0.5;" \n
                         "{BIS_wounded setHitPointDamage [_x, 0]} forEach [""HitLegs"", ""HitHands""];" \n
                         "" \n
                         "// Unhide helicopter" \n
                         "{" \n
                         "	_x hideObject false;" \n
                         "	_x enableSimulation true;" \n
                         "	_x setCaptive false;" \n
                         "} forEach ([BIS_heli] + units group BIS_heliD + units BIS_heliGroup);" \n
                         "" \n
                         "{_x allowDamage true} forEach (units group BIS_heliD + units BIS_heliGroup);" \n
                         "" \n
                         "[BIS_heli, BIS_heli getVariable ""BIS_alt""] call BIS_fnc_setHeight;" \n
                         "" \n
                         "[""BIS_search"", ""SUCCEEDED""] call BIS_fnc_missionTasks;" \n
                         "" \n
                         "private [""_return""];" \n
                         "_return = [] spawn {" \n
                         "	scriptName ""missionFlow.fsm: return"";" \n
                         "	" \n
                         "	""145_Stash_Found"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	// Add task" \n
                         "	""BIS_return"" call BIS_fnc_missionTasks;" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Returned">*/
                                class Returned
                                {
                                        itemno = 62;
                                        priority = 0.000000;
                                        to="End";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"scriptDone _return" \n
                                         "&&" \n
                                         "BIS_lacey distance markerPos ""BIS_return"" < 5"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "End">*/
                class End
                {
                        name = "End";
                        itemno = 63;
                        init = /*%FSM<STATEINIT""">*/"// Terminate friendly fire" \n
                         "BIS_fnc_initFF_terminate = true;" \n
                         "" \n
                         "[""BIS_return"", ""SUCCEEDED""] call BIS_fnc_missionTasks;" \n
                         "" \n
                         "// Stop Adams from moving" \n
                         "BIS_adams disableAI ""MOVE"";" \n
                         "" \n
                         "[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: end"";" \n
                         "	" \n
                         "	""d05_Returned"" call BIS_fnc_missionConversations;" \n
                         "	""150_RTB"" spawn BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	sleep 1;" \n
                         "	" \n
                         "	5 fadeSound 0;" \n
                         "	titleCut ["""", ""BLACK OUT"", 5];" \n
                         "	" \n
                         "	sleep 5;" \n
                         "	" \n
                         "	BIS_lacey allowDamage false;" \n
                         "	BIS_lacey setDamage 0;" \n
                         "	BIS_lacey setCaptive true;" \n
                         "	BIS_lacey switchMove ""HubSpectator_stand"";" \n
                         "	" \n
                         "	sleep 1;" \n
                         "	" \n
                         "	endMission ""BOOT_m04_1"";" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Earthquake">*/
                class Earthquake
                {
                        name = "Earthquake";
                        itemno = 65;
                        init = /*%FSM<STATEINIT""">*/"1 spawn BIS_fnc_earthquake;" \n
                         "" \n
                         "[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: earthquake"";" \n
                         "	" \n
                         "	waitUntil {missionNamespace getVariable [""BIS_fnc_earthquake_inprogress"", false]};" \n
                         "	" \n
                         "	sleep 3;" \n
                         "	" \n
                         "	""105_Earthquake_1"" spawn BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	waitUntil {!(BIS_fnc_earthquake_inprogress)};" \n
                         "	" \n
                         "	""105_Earthquake_2"" call BIS_fnc_missionConversations;" \n
                         "	""110_SITREP"" call BIS_fnc_missionConversations;" \n
                         "};" \n
                         "" \n
                         "[""Civil01"",true] call BIS_fnc_loadScene;" \n
                         "[""Civil02"",true] call BIS_fnc_loadScene;" \n
                         "[""Civil03"",true] call BIS_fnc_loadScene;" \n
                         "[""AAF01"",true] call BIS_fnc_loadScene;" \n
                         "[""AAF02"",true] call BIS_fnc_loadScene;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Nearing_location">*/
                                class Nearing_location
                                {
                                        itemno = 67;
                                        priority = 0.000000;
                                        to="GPS";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_GPSTrig"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Left_3">*/
                                class Left_3
                                {
                                        itemno = 43;
                                        priority = 0.000000;
                                        to="Left_3";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_left3"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "GPS">*/
                class GPS
                {
                        name = "GPS";
                        itemno = 68;
                        init = /*%FSM<STATEINIT""">*/"// Give info on GPS" \n
                         "if (!(visibleGPS) && ""ItemGPS"" in assignedItems BIS_lacey) then {" \n
                         "	[" \n
                         "		[""Navigation"", ""Direction"", ""GPS_sub""]," \n
                         "		nil, nil," \n
                         "		10e10," \n
                         "		""visibleGPS""," \n
                         "		true," \n
                         "		true" \n
                         "	] call BIS_fnc_advHint;" \n
                         "	" \n
                         "	""90_GPS"" spawn BIS_fnc_missionConversations;" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "At_AAF">*/
                                class At_AAF
                                {
                                        itemno = 15;
                                        priority = 0.000000;
                                        to="Stop_the_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_location"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Right_1">*/
                                class Right_1
                                {
                                        itemno = 46;
                                        priority = 0.000000;
                                        to="Right_1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_right1"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
        };
        initState="Mission_Flow";
        finalStates[] =
        {
                "End",
        };
};
/*%FSM</COMPILE>*/