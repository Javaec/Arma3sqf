/*%FSM<COMPILE "C:\Bis\FSMEditor\scriptedFSM.cfg, Mission Flow">*/
/*%FSM<HEAD>*/
/*
item0[] = {"Mission_Flow",0,250,0.000000,-125.000000,100.000000,-75.000000,0.000000,"Mission Flow"};
item1[] = {"",7,210,45.999992,-54.000008,54.000008,-45.999992,0.000000,""};
item2[] = {"",7,210,-254.000015,-54.000000,-245.999985,-46.000000,0.000000,""};
item3[] = {"CTRG",4,218,-300.000000,-25.000000,-200.000000,25.000000,0.000000,"CTRG"};
item4[] = {"NATO",4,218,0.000000,-25.000000,100.000000,25.000000,0.000000,"NATO"};
item5[] = {"Help_James",2,250,-300.000000,50.000000,-200.000000,100.000000,0.000000,"Help James"};
item6[] = {"In_truck",4,218,-300.000000,575.000000,-200.000000,625.000000,0.000000,"In truck"};
item7[] = {"Take_to_Miller",2,250,-300.000000,650.000000,-200.000000,700.000000,0.000000,"Take to Miller"};
item8[] = {"",7,210,321.000000,-54.000000,329.000000,-46.000000,0.000000,""};
item9[] = {"Court_martialed",4,218,275.000000,-25.000000,375.000000,25.000000,0.000000,"Court-martialed"};
item10[] = {"At_Miller",4,218,-300.000000,725.000000,-200.000000,775.000000,0.000000,"At Miller"};
item11[] = {"Ending__2",1,250,-300.000000,800.000000,-200.000000,850.000000,0.000000,"Ending #2"};
item12[] = {"Regroup",2,250,0.000000,50.000000,100.000000,100.000000,0.000000,"Regroup"};
item13[] = {"",7,210,-79.000000,471.000000,-71.000000,479.000000,0.000000,""};
item14[] = {"Regrouped",4,218,0.000000,125.000000,100.000000,175.000000,0.000000,"Regrouped"};
item15[] = {"Destroy_retreating",2,250,0.000000,200.000000,100.000000,250.000000,0.000000,"Destroy" \n "retreating" \n "forces"};
item16[] = {"Attack",2,250,0.000000,475.000000,100.000000,525.000000,0.000000,"Attack"};
item17[] = {"Add_support",2,250,-125.000000,400.000000,-25.000000,450.000000,0.000000,"Add support"};
item18[] = {"See_James",4,218,-425.000000,50.000000,-325.000000,100.000000,0.000000,"See James"};
item19[] = {"Wave",2,250,-425.000000,125.000000,-325.000000,175.000000,0.000000,"Wave"};
item20[] = {"At_James",4,218,-300.000000,125.000000,-200.000000,175.000000,0.000000,"At James"};
item21[] = {"The_Device",2,250,-300.000000,200.000000,-200.000000,250.000000,0.000000,"The Device"};
item22[] = {"Entering_base",4,218,-300.000000,275.000000,-200.000000,325.000000,0.000000,"Entering" \n "base"};
item23[] = {"NATO_angered",2,250,-300.000000,350.000000,-200.000000,400.000000,0.000000,"NATO angered"};
item24[] = {"Truck_spotted",4,218,-300.000000,425.000000,-200.000000,475.000000,0.000000,"Truck spotted"};
item25[] = {"Found_truck",2,250,-300.000000,500.000000,-200.000000,550.000000,0.000000,"Found truck"};
item26[] = {"",7,210,-454.000000,-54.000000,-446.000000,-46.000000,0.000000,""};
item27[] = {"",7,210,-454.000000,596.000000,-446.000000,604.000000,0.000000,""};
item28[] = {"",7,210,-179.000000,71.000000,-171.000000,79.000000,0.000000,""};
item29[] = {"",7,210,-179.000000,221.000000,-171.000000,229.000000,0.000000,""};
item30[] = {"",7,210,-179.000000,371.000000,-171.000000,379.000000,0.000000,""};
item31[] = {"",7,210,-179.000000,521.000000,-171.000000,529.000000,0.000000,""};
item32[] = {"",7,210,-179.000000,671.000000,-171.000000,679.000000,0.000000,""};
item33[] = {"Friendly_fire",1,250,275.000000,50.000000,375.000000,100.000000,0.000000,"Friendly fire"};
item34[] = {"",7,210,-179.000000,821.000061,-171.000000,829.000000,0.000000,""};
item35[] = {"",7,210,46.000000,271.000000,54.000004,279.000000,0.000000,""};
item36[] = {"Softened",4,218,0.000000,325.000000,100.000000,375.000000,0.000000,"Softened"};
item37[] = {"",7,210,46.000000,296.000000,54.000000,304.000000,0.000000,""};
item38[] = {"",7,210,171.000061,296.000000,178.999939,304.000000,0.000000,""};
item39[] = {"Out_of_ammo",4,218,125.000000,325.000000,225.000000,375.000000,0.000000,"Out of ammo"};
item40[] = {"",7,210,-79.000000,296.000000,-71.000000,304.000000,0.000000,""};
item41[] = {"Entered_AO",4,218,-125.000000,325.000000,-25.000000,375.000000,0.000000,"Entered AO"};
item42[] = {"Reprimand",2,250,125.000000,400.000000,225.000000,450.000000,0.000000,"Reprimand"};
item43[] = {"_",8,218,125.000000,475.000000,225.000000,525.000000,0.000000,""};
item44[] = {"Defeated",4,218,0.000000,550.000000,100.000000,600.000000,0.000000,"Defeated"};
item45[] = {"Ending__1",1,250,0.000000,625.000000,100.000000,675.000000,0.000000,"Ending #1"};
item46[] = {"",7,210,246.000000,296.000000,254.000000,304.000000,0.000000,""};
item47[] = {"",7,210,246.000000,-4.000000,254.000000,4.000000,0.000000,""};
item48[] = {"",7,210,-28.999996,496.000000,-21.000004,504.000000,0.000000,""};
item49[] = {"",7,210,-29.000000,646.000000,-21.000000,654.000000,0.000000,""};
item50[] = {"",7,210,-29.000000,821.000000,-21.000000,828.999939,0.000000,""};
item51[] = {"",7,210,245.999954,821.000000,254.000031,828.999939,0.000000,""};
item52[] = {"",7,210,-329.000000,671.000000,-321.000000,679.000000,0.000000,""};
item53[] = {"Truck_destroyed",4,218,-450.000000,650.000000,-350.000000,700.000000,0.000000,"Truck destroyed"};
item54[] = {"",7,210,-329.000000,821.000061,-321.000000,829.000000,0.000000,""};
item55[] = {"Fail__1",1,250,-450.000000,725.000000,-350.000000,775.000000,0.000000,"Fail #1"};
item56[] = {"",7,210,-154.000000,471.000000,-146.000000,479.000000,0.000000,""};
item57[] = {"",7,210,-154.000000,271.000000,-146.000000,279.000000,0.000000,""};
link0[] = {0,1};
link1[] = {1,2};
link2[] = {1,4};
link3[] = {1,8};
link4[] = {2,3};
link5[] = {2,26};
link6[] = {3,5};
link7[] = {4,12};
link8[] = {5,18};
link9[] = {5,20};
link10[] = {5,28};
link11[] = {6,7};
link12[] = {7,10};
link13[] = {7,32};
link14[] = {7,52};
link15[] = {8,9};
link16[] = {9,33};
link17[] = {10,11};
link18[] = {11,34};
link19[] = {11,54};
link20[] = {12,14};
link21[] = {13,56};
link22[] = {14,15};
link23[] = {15,35};
link24[] = {16,44};
link25[] = {16,48};
link26[] = {17,13};
link27[] = {18,19};
link28[] = {19,20};
link29[] = {20,21};
link30[] = {21,22};
link31[] = {21,29};
link32[] = {22,23};
link33[] = {23,24};
link34[] = {23,30};
link35[] = {24,25};
link36[] = {25,6};
link37[] = {25,31};
link38[] = {26,27};
link39[] = {27,6};
link40[] = {28,29};
link41[] = {29,30};
link42[] = {30,31};
link43[] = {31,32};
link44[] = {32,34};
link45[] = {34,50};
link46[] = {35,37};
link47[] = {36,16};
link48[] = {37,36};
link49[] = {37,38};
link50[] = {37,40};
link51[] = {38,39};
link52[] = {38,46};
link53[] = {39,42};
link54[] = {40,41};
link55[] = {41,17};
link56[] = {42,43};
link57[] = {43,16};
link58[] = {44,45};
link59[] = {45,49};
link60[] = {46,47};
link61[] = {47,9};
link62[] = {48,49};
link63[] = {49,50};
link64[] = {50,51};
link65[] = {51,46};
link66[] = {52,53};
link67[] = {53,55};
link68[] = {54,52};
link69[] = {56,57};
link70[] = {57,35};
globals[] = {25.000000,1,0,0,0,640,480,1,104,6316128,1,-547.804565,339.351532,982.918823,-102.960159,875,1071,1};
window[] = {2,-1,-1,-1,-1,905,25,1419,25,3,893};
*//*%FSM</HEAD>*/
class FSM
{
        fsmName = "Mission Flow";
        class States
        {
                /*%FSM<STATE "Mission_Flow">*/
                class Mission_Flow
                {
                        name = "Mission_Flow";
                        itemno = 0;
                        init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "CTRG">*/
                                class CTRG
                                {
                                        itemno = 3;
                                        priority = 0.000000;
                                        to="Help_James";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_CTRGTrig"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 9;
                                        priority = 0.000000;
                                        to="Friendly_fire";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(" \n
                                         "	side BIS_inf == sideEnemy" \n
                                         "	&&" \n
                                         "	isNil ""BIS_choseCTRG""" \n
                                         ")" \n
                                         "||" \n
                                         "!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "In_truck">*/
                                class In_truck
                                {
                                        itemno = 6;
                                        priority = 0.000000;
                                        to="Take_to_Miller";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"driver BIS_device == BIS_inf"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "NATO">*/
                                class NATO
                                {
                                        itemno = 4;
                                        priority = 0.000000;
                                        to="Regroup";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_NATOTrig"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Help_James">*/
                class Help_James
                {
                        name = "Help_James";
                        itemno = 5;
                        init = /*%FSM<STATEINIT""">*/"// Register that the player chose CTRG" \n
                         "BIS_choseCTRG = true;" \n
                         "" \n
                         "// Update tasks" \n
                         "{_x call BIS_fnc_missionTasks} forEach [""BIS_CTRG"", ""BIS_NATO""];" \n
                         "" \n
                         """30_Wave"" spawn BIS_fnc_missionConversations;" \n
                         "" \n
                         "// Player engaged by all" \n
                         "BIS_inf addRating -9999;" \n
                         "" \n
                         "{deleteVehicle _x} forEach (BIS_arty + BIS_joinUnits);" \n
                         "[] call BIS_hideHQ;" \n
                         "[] call BIS_NATOAttack;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "At_James">*/
                                class At_James
                                {
                                        itemno = 20;
                                        priority = 0.000000;
                                        to="The_Device";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"BIS_inf distance BIS_james <= 5" \n
                                         "&&" \n
                                         "vehicle BIS_inf == BIS_inf"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 9;
                                        priority = 0.000000;
                                        to="Friendly_fire";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(" \n
                                         "	side BIS_inf == sideEnemy" \n
                                         "	&&" \n
                                         "	isNil ""BIS_choseCTRG""" \n
                                         ")" \n
                                         "||" \n
                                         "!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "See_James">*/
                                class See_James
                                {
                                        itemno = 18;
                                        priority = 0.000000;
                                        to="Wave";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(" \n
                                         "	cursorTarget == BIS_james" \n
                                         "	||" \n
                                         "	vehicle BIS_inf distance BIS_james <= 10" \n
                                         ")" \n
                                         "&&" \n
                                         "isNil ""_wave"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Take_to_Miller">*/
                class Take_to_Miller
                {
                        name = "Take_to_Miller";
                        itemno = 7;
                        init = /*%FSM<STATEINIT""">*/"// Unhide submarine" \n
                         "[BIS_sub, -3] call BIS_fnc_setHeight;" \n
                         "BIS_sub hideObject false;" \n
                         "BIS_sub enableSimulation true;" \n
                         "BIS_sub setCaptive false;" \n
                         "" \n
                         "// Let the truck take damage" \n
                         "BIS_device allowDamage true;" \n
                         "" \n
                         "if (!(isNil ""BIS_truckFound"")) then {" \n
                         "	// Remove task destination" \n
                         "	[""BIS_device"", objNull] call BIS_fnc_taskSetDestination;" \n
                         "} else {" \n
                         "	// Update tasks" \n
                         "	{_x call BIS_fnc_missionTasks} forEach [""BIS_NATO"", ""BIS_CTRG""];" \n
                         "};" \n
                         "" \n
                         "[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: take to Miller"";" \n
                         "	" \n
                         "	if (!(isNil ""BIS_truckFound"")) then {" \n
                         "		sleep 1;" \n
                         "		" \n
                         "		saveGame;" \n
                         "		" \n
                         "		sleep 1;" \n
                         "		" \n
                         "		0 fadeMusic 0.4;" \n
                         "		playMusic ""LeadTrack01_F_EPC"";" \n
                         "		" \n
                         "		// Update tasks" \n
                         "		{_x call BIS_fnc_missionTasks} forEach [""BIS_device"", ""BIS_miller""];" \n
                         "		" \n
                         "		// Restore task destination" \n
                         "		[""BIS_device"", position BIS_device] call BIS_fnc_taskSetDestination;" \n
                         "		" \n
                         "		""65_In_Truck"" call BIS_fnc_missionConversations;" \n
                         "	} else {" \n
                         "		// Player bypassed James" \n
                         "		""65_In_Truck"" call BIS_fnc_missionConversations;" \n
                         "		""x05_James_Bypassed"" call BIS_fnc_missionConversations;" \n
                         "		" \n
                         "		// Kill James" \n
                         "		BIS_james setDamage 1;" \n
                         "		" \n
                         "		sleep 1;" \n
                         "		" \n
                         "		saveGame;" \n
                         "		" \n
                         "		sleep 1;" \n
                         "		" \n
                         "		// Reveal marker" \n
                         "		""BIS_miller"" setMarkerAlpha 1;" \n
                         "		" \n
                         "		// Add task" \n
                         "		""BIS_miller"" call BIS_fnc_missionTasks;" \n
                         "		" \n
                         "		0 fadeMusic 0.4;" \n
                         "		playMusic ""LeadTrack01_F_EPC"";" \n
                         "	};" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 9;
                                        priority = 0.000000;
                                        to="Friendly_fire";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(" \n
                                         "	side BIS_inf == sideEnemy" \n
                                         "	&&" \n
                                         "	isNil ""BIS_choseCTRG""" \n
                                         ")" \n
                                         "||" \n
                                         "!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Truck_destroyed">*/
                                class Truck_destroyed
                                {
                                        itemno = 53;
                                        priority = 0.000000;
                                        to="Fail__1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(canMove BIS_device)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "At_Miller">*/
                                class At_Miller
                                {
                                        itemno = 10;
                                        priority = 0.000000;
                                        to="Ending__2";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_millerTrig"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Ending__2">*/
                class Ending__2
                {
                        name = "Ending__2";
                        itemno = 11;
                        init = /*%FSM<STATEINIT""">*/"// Execute the ending sequence" \n
                         "execVM ""ending2.sqf"";"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Truck_destroyed">*/
                                class Truck_destroyed
                                {
                                        itemno = 53;
                                        priority = 0.000000;
                                        to="Fail__1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(canMove BIS_device)"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 9;
                                        priority = 0.000000;
                                        to="Friendly_fire";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(" \n
                                         "	side BIS_inf == sideEnemy" \n
                                         "	&&" \n
                                         "	isNil ""BIS_choseCTRG""" \n
                                         ")" \n
                                         "||" \n
                                         "!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Regroup">*/
                class Regroup
                {
                        name = "Regroup";
                        itemno = 12;
                        init = /*%FSM<STATEINIT""">*/"// Register that the player chose NATO" \n
                         "BIS_choseNATO = true;" \n
                         "" \n
                         "// Update tasks" \n
                         "{_x call BIS_fnc_missionTasks} forEach [""BIS_NATO"", ""BIS_CTRG"", ""BIS_regroup""];" \n
                         "" \n
                         """05_NATO_Chosen"" spawn BIS_fnc_missionConversations;" \n
                         "" \n
                         "{deleteVehicle _x} forEach BIS_CTRGEnd;" \n
                         "BIS_james setDamage 1;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Regrouped">*/
                                class Regrouped
                                {
                                        itemno = 14;
                                        priority = 0.000000;
                                        to="Destroy_retreating";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"BIS_inf distance BIS_BHQ <= 5" \n
                                         "&&" \n
                                         "vehicle BIS_inf == BIS_inf"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Destroy_retreating">*/
                class Destroy_retreating
                {
                        name = "Destroy_retreating";
                        itemno = 15;
                        init = /*%FSM<STATEINIT""">*/"private [""_count"", ""_limit""];" \n
                         "_count = count BIS_retVehicles;" \n
                         "_limit = round (_count / 2);" \n
                         "" \n
                         "// Succeed task" \n
                         """BIS_regroup"" call BIS_fnc_missionTasks;" \n
                         "" \n
                         "[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: destroy retreating forces"";" \n
                         "	" \n
                         "	""10_Orders"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	saveGame;" \n
                         "	" \n
                         "	sleep 1;" \n
                         "	" \n
                         "	// Reveal marker" \n
                         "	""BIS_OP"" setMarkerAlpha 1;" \n
                         "	" \n
                         "	// Add task" \n
                         "	""BIS_destroy"" call BIS_fnc_missionTasks;" \n
                         "	" \n
                         "	// Give player the command of their team" \n
                         "	{" \n
                         "		_x removeEventHandler [""Killed"", _x getVariable ""BIS_friendlyFireEH""];" \n
                         "		_x setVariable [""BIS_friendlyFireEH"", nil];" \n
                         "	} forEach units BIS_joinGroup;" \n
                         "	" \n
                         "	units BIS_joinGroup joinSilent BIS_inf;" \n
                         "	" \n
                         "	// Take involved units off captive" \n
                         "	{_x setCaptive false} forEach (BIS_joinUnits + BIS_roamers + BIS_FOUnits + BIS_retUnits + BIS_retVehicles);" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Out_of_ammo">*/
                                class Out_of_ammo
                                {
                                        itemno = 39;
                                        priority = 0.000000;
                                        to="Reprimand";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_finalHit"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Entered_AO">*/
                                class Entered_AO
                                {
                                        itemno = 41;
                                        priority = 0.000000;
                                        to="Add_support";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_supportTrig" \n
                                         "&&" \n
                                         "isNil ""_addSupport"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 9;
                                        priority = 0.000000;
                                        to="Friendly_fire";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(" \n
                                         "	side BIS_inf == sideEnemy" \n
                                         "	&&" \n
                                         "	isNil ""BIS_choseCTRG""" \n
                                         ")" \n
                                         "||" \n
                                         "!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Softened">*/
                                class Softened
                                {
                                        itemno = 36;
                                        priority = 0.000000;
                                        to="Attack";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{!(canMove _x) || !(canFire _x)} count BIS_retVehicles >= _limit"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Attack">*/
                class Attack
                {
                        name = "Attack";
                        itemno = 16;
                        init = /*%FSM<STATEINIT""">*/"// Start attack" \n
                         "[] call BIS_NATOAttack;" \n
                         "" \n
                         "if (!(isNil ""_addSupport"")) then {" \n
                         "	// Remove artillery support" \n
                         "	{[BIS_requester, _x] call BIS_fnc_removeSupportLink} forEach [BIS_provider1, BIS_provider2, BIS_provider3, BIS_provider4];" \n
                         "	" \n
                         "	// Remove Instructor Figure" \n
                         "	[""RemoveTopic"", [""i01_Scouting""]] call BIS_fnc_InstructorFigure;" \n
                         "};" \n
                         "" \n
                         "0 fadeMusic 0.6;" \n
                         "playMusic ""LeadTrack06_F_EPC"";" \n
                         "" \n
                         "// Make music flow into credits" \n
                         "BIS_musicIndex = 0;" \n
                         "BIS_musicEH = addMusicEventHandler [" \n
                         "	""MusicStop""," \n
                         "	{" \n
                         "		switch (BIS_musicIndex) do {" \n
                         "			case 0: {" \n
                         "				// Second song" \n
                         "				[] spawn {" \n
                         "					scriptName ""missionFlow.fsm: credits song 2"";" \n
                         "					" \n
                         "					sleep 1;" \n
                         "					" \n
                         "					0 fadeMusic 1;" \n
                         "					playMusic ""LeadTrack05_F_EPC"";" \n
                         "				};" \n
                         "			};" \n
                         "			" \n
                         "			case 1: {" \n
                         "				// Third song" \n
                         "				[] spawn {" \n
                         "					scriptName ""missionFlow.fsm: credits song 3"";" \n
                         "					" \n
                         "					sleep 1;" \n
                         "					" \n
                         "					0 fadeMusic 1;" \n
                         "					playMusic ""LeadTrack01_F_EPC"";" \n
                         "				};" \n
                         "			};" \n
                         "			" \n
                         "			case 2: {" \n
                         "				// Remove eventhandler" \n
                         "				removeMusicEventHandler [""MusicStop"", BIS_musicEH];" \n
                         "				" \n
                         "				// Fourth song" \n
                         "				[] spawn {" \n
                         "					scriptName ""missionFlow.fsm: credits song 4"";" \n
                         "					" \n
                         "					sleep 1;" \n
                         "					" \n
                         "					0 fadeMusic 1;" \n
                         "					playMusic ""LeadTrack04_F_EPC"";" \n
                         "				};" \n
                         "			};" \n
                         "		};" \n
                         "		" \n
                         "		// Increase index" \n
                         "		BIS_musicIndex = BIS_musicIndex + 1;" \n
                         "	}" \n
                         "];" \n
                         "" \n
                         "private [""_time""];" \n
                         "_time = time + 56;" \n
                         "" \n
                         "[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: attack"";" \n
                         "	" \n
                         "	sleep 1;" \n
                         "	" \n
                         "	// Update task" \n
                         "	""BIS_destroy"" call BIS_fnc_missionTasks;" \n
                         "	" \n
                         "	if (isNil ""BIS_outOfAmmo"") then {" \n
                         "		// Player successfully took out enough" \n
                         "		""15_Neutralized"" call BIS_fnc_missionConversations;" \n
                         "	} else {" \n
                         "		// Support ran out of ammo" \n
                         "		""x01_Out_Of_Ammo"" call BIS_fnc_missionConversations;" \n
                         "	};" \n
                         "	" \n
                         "	sleep 15;" \n
                         "	" \n
                         "	// Inform the rest that they are engaging" \n
                         "	""20_Contact"" call BIS_fnc_missionConversations;" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 9;
                                        priority = 0.000000;
                                        to="Friendly_fire";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(" \n
                                         "	side BIS_inf == sideEnemy" \n
                                         "	&&" \n
                                         "	isNil ""BIS_choseCTRG""" \n
                                         ")" \n
                                         "||" \n
                                         "!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Defeated">*/
                                class Defeated
                                {
                                        itemno = 44;
                                        priority = 0.000000;
                                        to="Ending__1";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"time >= _time"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Add_support">*/
                class Add_support
                {
                        name = "Add_support";
                        itemno = 17;
                        init = /*%FSM<STATEINIT""">*/"// Hide the HQ unit" \n
                         "[] call BIS_hideHQ;" \n
                         "" \n
                         "private [""_addSupport""];" \n
                         "_addSupport = [] spawn {" \n
                         "	scriptName ""missionFlow.fsm: add support"";" \n
                         "	" \n
                         "	// Add artillery units to player" \n
                         "	{[BIS_inf, BIS_requester, _x] call BIS_fnc_addSupportLink} forEach [BIS_provider1, BIS_provider2, BIS_provider3, BIS_provider4];" \n
                         "	" \n
                         "	sleep 0.05;" \n
                         "	" \n
                         "	// Add plane support to player" \n
                         "	BIS_planeSupport = [BIS_inf, ""Plane"", groupID (group BIS_planeFake)] call BIS_fnc_addCommMenuItem;" \n
                         "	" \n
                         "	sleep 0.05;" \n
                         "	" \n
                         "	// Add Instructor Figure" \n
                         "	[" \n
                         "		""AddTopic""," \n
                         "		[" \n
                         "			""i01_Scouting""," \n
                         "			""C_out2""," \n
                         "			localize ""STR_A3_C_out2_Instructor_Scouting""" \n
                         "		]" \n
                         "	] call BIS_fnc_InstructorFigure;" \n
                         "	" \n
                         "	sleep 20;" \n
                         "	" \n
                         "	// Minor quake" \n
                         "	1 spawn BIS_fnc_earthquake;" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Out_of_ammo">*/
                                class Out_of_ammo
                                {
                                        itemno = 39;
                                        priority = 0.000000;
                                        to="Reprimand";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"!(isNil ""BIS_finalHit"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Entered_AO">*/
                                class Entered_AO
                                {
                                        itemno = 41;
                                        priority = 0.000000;
                                        to="Add_support";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_supportTrig" \n
                                         "&&" \n
                                         "isNil ""_addSupport"""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 9;
                                        priority = 0.000000;
                                        to="Friendly_fire";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(" \n
                                         "	side BIS_inf == sideEnemy" \n
                                         "	&&" \n
                                         "	isNil ""BIS_choseCTRG""" \n
                                         ")" \n
                                         "||" \n
                                         "!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Softened">*/
                                class Softened
                                {
                                        itemno = 36;
                                        priority = 0.000000;
                                        to="Attack";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"{!(canMove _x) || !(canFire _x)} count BIS_retVehicles >= _limit"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Wave">*/
                class Wave
                {
                        name = "Wave";
                        itemno = 19;
                        init = /*%FSM<STATEINIT""">*/"private [""_wave""];" \n
                         "_wave = true;" \n
                         "" \n
                         "BIS_james playMoveNow ""Acts_SittingWounded_wave"";" \n
                         "" \n
                         "private [""_animEH""];" \n
                         "_animEH = BIS_james addEventHandler [" \n
                         "	""AnimDone""," \n
                         "	{" \n
                         "		private [""_unit"", ""_anim""];" \n
                         "		_unit = _this select 0;" \n
                         "		_anim = _this select 1;" \n
                         "		" \n
                         "		if (_anim == ""Acts_SittingWounded_wave"") then {" \n
                         "			// Remove eventhandler" \n
                         "			_unit removeEventHandler [""AnimDone"", _unit getVariable ""BIS_animEH""];" \n
                         "			_unit setVariable [""BIS_animEH"", nil];" \n
                         "			" \n
                         "			// Resume anim loop" \n
                         "			_unit switchMove ""Acts_SittingWounded_loop"";" \n
                         "		};" \n
                         "	}" \n
                         "];" \n
                         "" \n
                         "BIS_james setVariable [""BIS_animEH"", _animEH];"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "At_James">*/
                                class At_James
                                {
                                        itemno = 20;
                                        priority = 0.000000;
                                        to="The_Device";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"BIS_inf distance BIS_james <= 5" \n
                                         "&&" \n
                                         "vehicle BIS_inf == BIS_inf"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "The_Device">*/
                class The_Device
                {
                        name = "The_Device";
                        itemno = 21;
                        init = /*%FSM<STATEINIT""">*/"// Succeed task" \n
                         "BIS_atJames = true;" \n
                         """BIS_CTRG"" call BIS_fnc_missionTasks;" \n
                         "" \n
                         "0 fadeMusic 0.2;" \n
                         "playMusic ""EventTrack02a_F_EPA"";" \n
                         "" \n
                         "[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: the device"";" \n
                         "	" \n
                         "	""35_The_Device"" call BIS_fnc_missionConversations;" \n
                         "	""40_James_Dead"" call BIS_fnc_missionConversations;" \n
                         "	" \n
                         "	sleep 1;" \n
                         "	" \n
                         "	saveGame;" \n
                         "	" \n
                         "	sleep 1;" \n
                         "	" \n
                         "	// Reveal markers" \n
                         "	{_x setMarkerAlpha 1} forEach [""BIS_research"", ""BIS_miller""];" \n
                         "	" \n
                         "	// Add tasks" \n
                         "	{_x call BIS_fnc_missionTasks} forEach [""BIS_device"", ""BIS_miller""];" \n
                         "	" \n
                         "	0 fadeMusic 0.2;" \n
                         "	playMusic ""EventTrack01_F_EPB"";" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 9;
                                        priority = 0.000000;
                                        to="Friendly_fire";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(" \n
                                         "	side BIS_inf == sideEnemy" \n
                                         "	&&" \n
                                         "	isNil ""BIS_choseCTRG""" \n
                                         ")" \n
                                         "||" \n
                                         "!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Entering_base">*/
                                class Entering_base
                                {
                                        itemno = 22;
                                        priority = 0.000000;
                                        to="NATO_angered";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"triggerActivated BIS_researchTrig"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "NATO_angered">*/
                class NATO_angered
                {
                        name = "NATO_angered";
                        itemno = 23;
                        init = /*%FSM<STATEINIT""">*/"[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: NATO angered"";" \n
                         "	" \n
                         "	""45_Danger"" call BIS_fnc_missionConversations;" \n
                         "	""50_NATO_Angered"" call BIS_fnc_missionConversations;" \n
                         "	""55_Hang_Up"" call BIS_fnc_missionConversations;" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 9;
                                        priority = 0.000000;
                                        to="Friendly_fire";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(" \n
                                         "	side BIS_inf == sideEnemy" \n
                                         "	&&" \n
                                         "	isNil ""BIS_choseCTRG""" \n
                                         ")" \n
                                         "||" \n
                                         "!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "Truck_spotted">*/
                                class Truck_spotted
                                {
                                        itemno = 24;
                                        priority = 0.000000;
                                        to="Found_truck";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"cursorTarget == BIS_device" \n
                                         "||" \n
                                         "vehicle BIS_inf distance markerPos ""BIS_research"" <= 5" \n
                                         "||" \n
                                         "vehicle BIS_inf distance BIS_device <= 5"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Found_truck">*/
                class Found_truck
                {
                        name = "Found_truck";
                        itemno = 25;
                        init = /*%FSM<STATEINIT""">*/"// Register that the player found the truck" \n
                         "BIS_truckFound = true;" \n
                         "" \n
                         "// Change the task's description" \n
                         "private [""_desc""];" \n
                         "_desc = ""BIS_device"" call BIS_fnc_taskDescription;" \n
                         "" \n
                         "[" \n
                         "	""BIS_device""," \n
                         "	[" \n
                         "		_desc select 0," \n
                         "		_desc select 1," \n
                         "		""STR_A3_Showcase_Vehicles_task1_wp""" \n
                         "	]" \n
                         "] call BIS_fnc_taskSetDescription;" \n
                         "" \n
                         "// Change the task's destination" \n
                         "[""BIS_device"", [BIS_device, true]] call BIS_fnc_taskSetDestination;" \n
                         "" \n
                         """60_Truck_Found"" spawn BIS_fnc_missionConversations;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 9;
                                        priority = 0.000000;
                                        to="Friendly_fire";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(" \n
                                         "	side BIS_inf == sideEnemy" \n
                                         "	&&" \n
                                         "	isNil ""BIS_choseCTRG""" \n
                                         ")" \n
                                         "||" \n
                                         "!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                                /*%FSM<LINK "In_truck">*/
                                class In_truck
                                {
                                        itemno = 6;
                                        priority = 0.000000;
                                        to="Take_to_Miller";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"driver BIS_device == BIS_inf"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Friendly_fire">*/
                class Friendly_fire
                {
                        name = "Friendly_fire";
                        itemno = 33;
                        init = /*%FSM<STATEINIT""">*/"[] call BIS_failTasks;" \n
                         "" \n
                         "// Fail the mission" \n
                         "[""friendlyFire"", false] call BIS_fnc_endMission;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Reprimand">*/
                class Reprimand
                {
                        name = "Reprimand";
                        itemno = 42;
                        init = /*%FSM<STATEINIT""">*/"// Register that the player used up all the ammo" \n
                         "BIS_outOfAmmo = true;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "_">*/
                                class _
                                {
                                        itemno = 43;
                                        priority = 0.000000;
                                        to="Attack";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/""/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Ending__1">*/
                class Ending__1
                {
                        name = "Ending__1";
                        itemno = 45;
                        init = /*%FSM<STATEINIT""">*/"// Signal the defeat" \n
                         "BIS_defeated = true;" \n
                         "" \n
                         "// Make units surrender" \n
                         "{_x spawn BIS_surrender} forEach (BIS_roamers + BIS_FOUnits + BIS_retUnits);" \n
                         "" \n
                         "// Stop friendlies from engaging any further" \n
                         "{_x setCombatMode ""BLUE""} forEach ([BIS_plane1D] + units BIS_armorGroup);" \n
                         "" \n
                         "if (!(isNil ""_addSupport"")) then {" \n
                         "	// Remove plane support" \n
                         "	if (isNil ""BIS_planeSent"") then {" \n
                         "		[BIS_inf, BIS_planeSupport] call BIS_fnc_removeCommMenuItem;" \n
                         "	} else {" \n
                         "		if (!(isNil {BIS_plane1 getVariable ""BIS_firedEH""})) then {" \n
                         "			BIS_plane1 removeEventHandler [""Fired"", BIS_plane1 getVariable ""BIS_firedEH""];" \n
                         "			BIS_plane1 setVariable [""BIS_firedEH"", nil];" \n
                         "		};" \n
                         "	};" \n
                         "};" \n
                         "" \n
                         """25_Defeated"" spawn BIS_fnc_missionConversations;" \n
                         "" \n
                         "[] spawn {" \n
                         "	scriptName ""missionFlow.fsm: ending #1"";" \n
                         "	" \n
                         "	sleep 35;" \n
                         "	" \n
                         "	// Roll credits" \n
                         "	""C_EA_1"" execVM ""credits.sqf"";" \n
                         "};"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                                /*%FSM<LINK "Court_martialed">*/
                                class Court_martialed
                                {
                                        itemno = 9;
                                        priority = 0.000000;
                                        to="Friendly_fire";
                                        precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
                                        condition=/*%FSM<CONDITION""">*/"(" \n
                                         "	side BIS_inf == sideEnemy" \n
                                         "	&&" \n
                                         "	isNil ""BIS_choseCTRG""" \n
                                         ")" \n
                                         "||" \n
                                         "!(isNil ""BIS_courtMartial"")"/*%FSM</CONDITION""">*/;
                                        action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
                                };
                                /*%FSM</LINK>*/
                        };
                };
                /*%FSM</STATE>*/
                /*%FSM<STATE "Fail__1">*/
                class Fail__1
                {
                        name = "Fail__1";
                        itemno = 55;
                        init = /*%FSM<STATEINIT""">*/"[] call BIS_failTasks;" \n
                         "" \n
                         "// Fail the mission" \n
                         "[[missionName, 1], false] call BIS_fnc_endMission;"/*%FSM</STATEINIT""">*/;
                        precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
                        class Links
                        {
                        };
                };
                /*%FSM</STATE>*/
        };
        initState="Mission_Flow";
        finalStates[] =
        {
                "Ending__2",
                "Friendly_fire",
                "Ending__1",
                "Fail__1",
        };
};
/*%FSM</COMPILE>*/